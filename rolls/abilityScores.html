<!DOCTYPE html>
<html>
  <head>
    <title>Ability Score Generator v1.0.1</title>
    <script type="text/javascript">
// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// this is a completely self-contained ability score generator,
// implemented in HTML5 and JavaScript.
//
//   version 1.0.1      es2015 updates
//   version 1.0        initial release
//
// written by drow [drow@bin.sh]
// concept by Justisaur [justisaur@gmail.com]
// http://creativecommons.org/licenses/by-nc/3.0/

  let first_sum  = 27;
  let second_sum = 25;
  let third_sum  = 23;

// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    </script>
    <link rel="stylesheet" href="data:text/css;base64,LyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8KLyogc2NvcmVzLmNzcyAqLwoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8KLyogc3RydWN0dXJlICovCgpib2R5IHsgbWFyZ2luOiAwcHg7IHBhZGRpbmc6IDBweDsKICBmb250LWZhbWlseTogJ0FzdWwnLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDE0cHg7IH0KCi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCi8qIGNvbW1vbiAqLwoKaDEgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMTUwJTsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KCmZvcm0geyBtYXJnaW46IDJleCAyZW07IHBhZGRpbmc6IDBweDsgfQppbnB1dCB7IG1hcmdpbi1yaWdodDogMC41ZW07IHBhZGRpbmc6IDAuNWV4IDAuNWVtOwogIGZvbnQtZmFtaWx5OiBNb25hY28sIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxMXB4OyB9Cgp0YWJsZSB7IG1hcmdpbjogMHB4IDJlbTsgYm9yZGVyOiBub25lOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyB9CnRkIHsgcGFkZGluZzogMC41ZXggMC41ZW07IHRleHQtYWxpZ246IGxlZnQ7IHZlcnRpY2FsLWFsaWduOiB0b3A7IH0KdGQua2V5IHsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CgouY2VudGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9CnRhYmxlLmNlbnRlciB7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87IH0KCi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCi8qIHNjcmVlbiAqLwoKQG1lZGlhIHNjcmVlbiB7CiAgZm9ybSB7IGRpc3BsYXk6IGJsb2NrOyB9Cn0KCi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCg==" />
  </head>
  <body>
    <form class="scripted">
      <h1>Ability Score Generator</h1>
      <table class="center"><tr><td class="key">Ability Scores:</td><td class="value"><input id="ability_scores" size="30" /></td><td class="value"><input id="reroll" type="button" value="Re-roll" /></td></tr></table>
    </form>
    <script src="data:text/javascript;base64,dmFyIFByb3RvdHlwZT17VmVyc2lvbjoiMS43LjMiLEJyb3dzZXI6KGZ1bmN0aW9uKCl7dmFyIGI9bmF2aWdhdG9yLnVzZXJBZ2VudDt2YXIgYT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93Lm9wZXJhKT09IltvYmplY3QgT3BlcmFdIjtyZXR1cm57SUU6ISF3aW5kb3cuYXR0YWNoRXZlbnQmJiFhLE9wZXJhOmEsV2ViS2l0OmIuaW5kZXhPZigiQXBwbGVXZWJLaXQvIik+LTEsR2Vja286Yi5pbmRleE9mKCJHZWNrbyIpPi0xJiZiLmluZGV4T2YoIktIVE1MIik9PT0tMSxNb2JpbGVTYWZhcmk6L0FwcGxlLipNb2JpbGUvLnRlc3QoYil9fSkoKSxCcm93c2VyRmVhdHVyZXM6e1hQYXRoOiEhZG9jdW1lbnQuZXZhbHVhdGUsU2VsZWN0b3JzQVBJOiEhZG9jdW1lbnQucXVlcnlTZWxlY3RvcixFbGVtZW50RXh0ZW5zaW9uczooZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cuRWxlbWVudHx8d2luZG93LkhUTUxFbGVtZW50O3JldHVybiAhIShhJiZhLnByb3RvdHlwZSl9KSgpLFNwZWNpZmljRWxlbWVudEV4dGVuc2lvbnM6KGZ1bmN0aW9uKCl7aWYodHlwZW9mIHdpbmRvdy5IVE1MRGl2RWxlbWVudCE9PSJ1bmRlZmluZWQiKXtyZXR1cm4gdHJ1ZX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKSxhPWZhbHNlO2lmKGMuX19wcm90b19fJiYoYy5fX3Byb3RvX18hPT1iLl9fcHJvdG9fXykpe2E9dHJ1ZX1jPWI9bnVsbDtyZXR1cm4gYX0pKCl9LFNjcmlwdEZyYWdtZW50OiI8c2NyaXB0W14+XSo+KFtcXFNcXHNdKj8pPFwvc2NyaXB0XFxzKj4iLEpTT05GaWx0ZXI6L15cL1wqLXNlY3VyZS0oW1xzXFNdKilcKlwvXHMqJC8sZW1wdHlGdW5jdGlvbjpmdW5jdGlvbigpe30sSzpmdW5jdGlvbihhKXtyZXR1cm4gYX19O2lmKFByb3RvdHlwZS5Ccm93c2VyLk1vYmlsZVNhZmFyaSl7UHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlcy5TcGVjaWZpY0VsZW1lbnRFeHRlbnNpb25zPWZhbHNlfXZhciBDbGFzcz0oZnVuY3Rpb24oKXt2YXIgZD0oZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4ge3RvU3RyaW5nOjF9KXtpZihlPT09InRvU3RyaW5nIil7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0pKCk7ZnVuY3Rpb24gYSgpe31mdW5jdGlvbiBiKCl7dmFyIGg9bnVsbCxnPSRBKGFyZ3VtZW50cyk7aWYoT2JqZWN0LmlzRnVuY3Rpb24oZ1swXSkpe2g9Zy5zaGlmdCgpfWZ1bmN0aW9uIGUoKXt0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfU9iamVjdC5leHRlbmQoZSxDbGFzcy5NZXRob2RzKTtlLnN1cGVyY2xhc3M9aDtlLnN1YmNsYXNzZXM9W107aWYoaCl7YS5wcm90b3R5cGU9aC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IGE7aC5zdWJjbGFzc2VzLnB1c2goZSl9Zm9yKHZhciBmPTAsaj1nLmxlbmd0aDtmPGo7ZisrKXtlLmFkZE1ldGhvZHMoZ1tmXSl9aWYoIWUucHJvdG90eXBlLmluaXRpYWxpemUpe2UucHJvdG90eXBlLmluaXRpYWxpemU9UHJvdG90eXBlLmVtcHR5RnVuY3Rpb259ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTtyZXR1cm4gZX1mdW5jdGlvbiBjKGwpe3ZhciBnPXRoaXMuc3VwZXJjbGFzcyYmdGhpcy5zdXBlcmNsYXNzLnByb3RvdHlwZSxmPU9iamVjdC5rZXlzKGwpO2lmKGQpe2lmKGwudG9TdHJpbmchPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpe2YucHVzaCgidG9TdHJpbmciKX1pZihsLnZhbHVlT2YhPU9iamVjdC5wcm90b3R5cGUudmFsdWVPZil7Zi5wdXNoKCJ2YWx1ZU9mIil9fWZvcih2YXIgZT0wLGg9Zi5sZW5ndGg7ZTxoO2UrKyl7dmFyIGs9ZltlXSxqPWxba107aWYoZyYmT2JqZWN0LmlzRnVuY3Rpb24oaikmJmouYXJndW1lbnROYW1lcygpWzBdPT0iJHN1cGVyIil7dmFyIG09ajtqPShmdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZ1tpXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSkoaykud3JhcChtKTtqLnZhbHVlT2Y9KGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBpLnZhbHVlT2YuY2FsbChpKX19KShtKTtqLnRvU3RyaW5nPShmdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gaS50b1N0cmluZy5jYWxsKGkpfX0pKG0pfXRoaXMucHJvdG90eXBlW2tdPWp9cmV0dXJuIHRoaXN9cmV0dXJue2NyZWF0ZTpiLE1ldGhvZHM6e2FkZE1ldGhvZHM6Y319fSkoKTsoZnVuY3Rpb24oKXt2YXIgeT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGs9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx6PSJOdWxsIixCPSJVbmRlZmluZWQiLEs9IkJvb2xlYW4iLHc9Ik51bWJlciIsdj0iU3RyaW5nIixJPSJPYmplY3QiLGk9IltvYmplY3QgRnVuY3Rpb25dIixkPSJbb2JqZWN0IEJvb2xlYW5dIixqPSJbb2JqZWN0IE51bWJlcl0iLGY9IltvYmplY3QgU3RyaW5nXSIsYj0iW29iamVjdCBBcnJheV0iLEg9IltvYmplY3QgRGF0ZV0iLGU9d2luZG93LkpTT04mJnR5cGVvZiBKU09OLnN0cmluZ2lmeT09PSJmdW5jdGlvbiImJkpTT04uc3RyaW5naWZ5KDApPT09IjAiJiZ0eXBlb2YgSlNPTi5zdHJpbmdpZnkoUHJvdG90eXBlLkspPT09InVuZGVmaW5lZCI7dmFyIHE9WyJ0b1N0cmluZyIsInRvTG9jYWxlU3RyaW5nIiwidmFsdWVPZiIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY29uc3RydWN0b3IiXTt2YXIgYT0oZnVuY3Rpb24oKXtmb3IodmFyIEwgaW4ge3RvU3RyaW5nOjF9KXtpZihMPT09InRvU3RyaW5nIil7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0pKCk7ZnVuY3Rpb24gRChNKXtzd2l0Y2goTSl7Y2FzZSBudWxsOnJldHVybiB6O2Nhc2UgKHZvaWQgMCk6cmV0dXJuIEJ9dmFyIEw9dHlwZW9mIE07c3dpdGNoKEwpe2Nhc2UiYm9vbGVhbiI6cmV0dXJuIEs7Y2FzZSJudW1iZXIiOnJldHVybiB3O2Nhc2Uic3RyaW5nIjpyZXR1cm4gdn1yZXR1cm4gSX1mdW5jdGlvbiBoKEwsTil7Zm9yKHZhciBNIGluIE4pe0xbTV09TltNXX1yZXR1cm4gTH1mdW5jdGlvbiBsKEwpe3RyeXtpZihvKEwpKXtyZXR1cm4idW5kZWZpbmVkIn1pZihMPT09bnVsbCl7cmV0dXJuIm51bGwifXJldHVybiBMLmluc3BlY3Q/TC5pbnNwZWN0KCk6U3RyaW5nKEwpfWNhdGNoKE0pe2lmKE0gaW5zdGFuY2VvZiBSYW5nZUVycm9yKXtyZXR1cm4iLi4uIn10aHJvdyBNfX1mdW5jdGlvbiBBKEwpe3JldHVybiBtKCIiLHsiIjpMfSxbXSl9ZnVuY3Rpb24gbShVLFIsUyl7dmFyIFQ9UltVXTtpZihEKFQpPT09SSYmdHlwZW9mIFQudG9KU09OPT09ImZ1bmN0aW9uIil7VD1ULnRvSlNPTihVKX12YXIgTj15LmNhbGwoVCk7c3dpdGNoKE4pe2Nhc2UgajpjYXNlIGQ6Y2FzZSBmOlQ9VC52YWx1ZU9mKCl9c3dpdGNoKFQpe2Nhc2UgbnVsbDpyZXR1cm4ibnVsbCI7Y2FzZSB0cnVlOnJldHVybiJ0cnVlIjtjYXNlIGZhbHNlOnJldHVybiJmYWxzZSJ9dmFyIFE9dHlwZW9mIFQ7c3dpdGNoKFEpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gVC5pbnNwZWN0KHRydWUpO2Nhc2UibnVtYmVyIjpyZXR1cm4gaXNGaW5pdGUoVCk/U3RyaW5nKFQpOiJudWxsIjtjYXNlIm9iamVjdCI6Zm9yKHZhciBNPTAsTD1TLmxlbmd0aDtNPEw7TSsrKXtpZihTW01dPT09VCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiQ3ljbGljIHJlZmVyZW5jZSB0byAnIitUKyInIGluIG9iamVjdCIpfX1TLnB1c2goVCk7dmFyIFA9W107aWYoTj09PWIpe2Zvcih2YXIgTT0wLEw9VC5sZW5ndGg7TTxMO00rKyl7dmFyIE89bShNLFQsUyk7UC5wdXNoKHR5cGVvZiBPPT09InVuZGVmaW5lZCI/Im51bGwiOk8pfVA9IlsiK1Auam9pbigiLCIpKyJdIn1lbHNle3ZhciBWPU9iamVjdC5rZXlzKFQpO2Zvcih2YXIgTT0wLEw9Vi5sZW5ndGg7TTxMO00rKyl7dmFyIFU9VltNXSxPPW0oVSxULFMpO2lmKHR5cGVvZiBPIT09InVuZGVmaW5lZCIpe1AucHVzaChVLmluc3BlY3QodHJ1ZSkrIjoiK08pfX1QPSJ7IitQLmpvaW4oIiwiKSsifSJ9Uy5wb3AoKTtyZXR1cm4gUH19ZnVuY3Rpb24gSihMKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoTCl9ZnVuY3Rpb24gQyhMKXtyZXR1cm4gJEgoTCkudG9RdWVyeVN0cmluZygpfWZ1bmN0aW9uIHAoTCl7cmV0dXJuIEwmJkwudG9IVE1MP0wudG9IVE1MKCk6U3RyaW5nLmludGVycHJldChMKX1mdW5jdGlvbiB4KEwpe2lmKEQoTCkhPT1JKXt0aHJvdyBuZXcgVHlwZUVycm9yKCl9dmFyIE49W107Zm9yKHZhciBPIGluIEwpe2lmKGsuY2FsbChMLE8pKXtOLnB1c2goTyl9fWlmKGEpe2Zvcih2YXIgTT0wO089cVtNXTtNKyspe2lmKGsuY2FsbChMLE8pKXtOLnB1c2goTyl9fX1yZXR1cm4gTn1mdW5jdGlvbiBHKEwpe3ZhciBNPVtdO2Zvcih2YXIgTiBpbiBMKXtNLnB1c2goTFtOXSl9cmV0dXJuIE19ZnVuY3Rpb24gcyhMKXtyZXR1cm4gaCh7fSxMKX1mdW5jdGlvbiBFKEwpe3JldHVybiAhIShMJiZMLm5vZGVUeXBlPT0xKX1mdW5jdGlvbiB1KEwpe3JldHVybiB5LmNhbGwoTCk9PT1ifXZhciBjPSh0eXBlb2YgQXJyYXkuaXNBcnJheT09ImZ1bmN0aW9uIikmJkFycmF5LmlzQXJyYXkoW10pJiYhQXJyYXkuaXNBcnJheSh7fSk7aWYoYyl7dT1BcnJheS5pc0FycmF5fWZ1bmN0aW9uIHIoTCl7cmV0dXJuIEwgaW5zdGFuY2VvZiBIYXNofWZ1bmN0aW9uIG4oTCl7cmV0dXJuIHkuY2FsbChMKT09PWl9ZnVuY3Rpb24gZyhMKXtyZXR1cm4geS5jYWxsKEwpPT09Zn1mdW5jdGlvbiBGKEwpe3JldHVybiB5LmNhbGwoTCk9PT1qfWZ1bmN0aW9uIHQoTCl7cmV0dXJuIHkuY2FsbChMKT09PUh9ZnVuY3Rpb24gbyhMKXtyZXR1cm4gdHlwZW9mIEw9PT0idW5kZWZpbmVkIn1oKE9iamVjdCx7ZXh0ZW5kOmgsaW5zcGVjdDpsLHRvSlNPTjplP0o6QSx0b1F1ZXJ5U3RyaW5nOkMsdG9IVE1MOnAsa2V5czpPYmplY3Qua2V5c3x8eCx2YWx1ZXM6RyxjbG9uZTpzLGlzRWxlbWVudDpFLGlzQXJyYXk6dSxpc0hhc2g6cixpc0Z1bmN0aW9uOm4saXNTdHJpbmc6Zyxpc051bWJlcjpGLGlzRGF0ZTp0LGlzVW5kZWZpbmVkOm99KX0pKCk7T2JqZWN0LmV4dGVuZChGdW5jdGlvbi5wcm90b3R5cGUsKGZ1bmN0aW9uKCl7dmFyIGw9QXJyYXkucHJvdG90eXBlLnNsaWNlO2Z1bmN0aW9uIGQocCxtKXt2YXIgbz1wLmxlbmd0aCxuPW0ubGVuZ3RoO3doaWxlKG4tLSl7cFtvK25dPW1bbl19cmV0dXJuIHB9ZnVuY3Rpb24gaihuLG0pe249bC5jYWxsKG4sMCk7cmV0dXJuIGQobixtKX1mdW5jdGlvbiBnKCl7dmFyIG09dGhpcy50b1N0cmluZygpLm1hdGNoKC9eW1xzXChdKmZ1bmN0aW9uW14oXSpcKChbXildKilcKS8pWzFdLnJlcGxhY2UoL1wvXC8uKj9bXHJcbl18XC9cKig/Oi58W1xyXG5dKSo/XCpcLy9nLCIiKS5yZXBsYWNlKC9ccysvZywiIikuc3BsaXQoIiwiKTtyZXR1cm4gbS5sZW5ndGg9PTEmJiFtWzBdP1tdOm19ZnVuY3Rpb24gaChvKXtpZihhcmd1bWVudHMubGVuZ3RoPDImJk9iamVjdC5pc1VuZGVmaW5lZChhcmd1bWVudHNbMF0pKXtyZXR1cm4gdGhpc31pZighT2JqZWN0LmlzRnVuY3Rpb24odGhpcykpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBvYmplY3QgaXMgbm90IGNhbGxhYmxlLiIpfXZhciBxPWZ1bmN0aW9uKCl7fTt2YXIgbT10aGlzLG49bC5jYWxsKGFyZ3VtZW50cywxKTt2YXIgcD1mdW5jdGlvbigpe3ZhciByPWoobixhcmd1bWVudHMpO3ZhciBzPXRoaXMgaW5zdGFuY2VvZiBwP3RoaXM6bztyZXR1cm4gbS5hcHBseShzLHIpfTtxLnByb3RvdHlwZT10aGlzLnByb3RvdHlwZTtwLnByb3RvdHlwZT1uZXcgcSgpO3JldHVybiBwfWZ1bmN0aW9uIGYobyl7dmFyIG09dGhpcyxuPWwuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKHEpe3ZhciBwPWQoW3F8fHdpbmRvdy5ldmVudF0sbik7cmV0dXJuIG0uYXBwbHkobyxwKX19ZnVuY3Rpb24gaygpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gdGhpc312YXIgbT10aGlzLG49bC5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbz1qKG4sYXJndW1lbnRzKTtyZXR1cm4gbS5hcHBseSh0aGlzLG8pfX1mdW5jdGlvbiBlKG8pe3ZhciBtPXRoaXMsbj1sLmNhbGwoYXJndW1lbnRzLDEpO289byoxMDAwO3JldHVybiB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBtLmFwcGx5KG0sbil9LG8pfWZ1bmN0aW9uIGEoKXt2YXIgbT1kKFswLjAxXSxhcmd1bWVudHMpO3JldHVybiB0aGlzLmRlbGF5LmFwcGx5KHRoaXMsbSl9ZnVuY3Rpb24gYyhuKXt2YXIgbT10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBvPWQoW20uYmluZCh0aGlzKV0sYXJndW1lbnRzKTtyZXR1cm4gbi5hcHBseSh0aGlzLG8pfX1mdW5jdGlvbiBiKCl7aWYodGhpcy5fbWV0aG9kaXplZCl7cmV0dXJuIHRoaXMuX21ldGhvZGl6ZWR9dmFyIG09dGhpcztyZXR1cm4gdGhpcy5fbWV0aG9kaXplZD1mdW5jdGlvbigpe3ZhciBuPWQoW3RoaXNdLGFyZ3VtZW50cyk7cmV0dXJuIG0uYXBwbHkobnVsbCxuKX19dmFyIGk9e2FyZ3VtZW50TmFtZXM6ZyxiaW5kQXNFdmVudExpc3RlbmVyOmYsY3Vycnk6ayxkZWxheTplLGRlZmVyOmEsd3JhcDpjLG1ldGhvZGl6ZTpifTtpZighRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpe2kuYmluZD1ofXJldHVybiBpfSkoKSk7KGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGIoKXtyZXR1cm4gdGhpcy5nZXRVVENGdWxsWWVhcigpKyItIisodGhpcy5nZXRVVENNb250aCgpKzEpLnRvUGFkZGVkU3RyaW5nKDIpKyItIit0aGlzLmdldFVUQ0RhdGUoKS50b1BhZGRlZFN0cmluZygyKSsiVCIrdGhpcy5nZXRVVENIb3VycygpLnRvUGFkZGVkU3RyaW5nKDIpKyI6Iit0aGlzLmdldFVUQ01pbnV0ZXMoKS50b1BhZGRlZFN0cmluZygyKSsiOiIrdGhpcy5nZXRVVENTZWNvbmRzKCkudG9QYWRkZWRTdHJpbmcoMikrIloifWZ1bmN0aW9uIGEoKXtyZXR1cm4gdGhpcy50b0lTT1N0cmluZygpfWlmKCFjLnRvSVNPU3RyaW5nKXtjLnRvSVNPU3RyaW5nPWJ9aWYoIWMudG9KU09OKXtjLnRvSlNPTj1hfX0pKERhdGUucHJvdG90eXBlKTtSZWdFeHAucHJvdG90eXBlLm1hdGNoPVJlZ0V4cC5wcm90b3R5cGUudGVzdDtSZWdFeHAuZXNjYXBlPWZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXVwvXFxdKS9nLCJcXCQxIil9O3ZhciBQZXJpb2RpY2FsRXhlY3V0ZXI9Q2xhc3MuY3JlYXRlKHtpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5jYWxsYmFjaz1iO3RoaXMuZnJlcXVlbmN5PWE7dGhpcy5jdXJyZW50bHlFeGVjdXRpbmc9ZmFsc2U7dGhpcy5yZWdpc3RlckNhbGxiYWNrKCl9LHJlZ2lzdGVyQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnRpbWVyPXNldEludGVydmFsKHRoaXMub25UaW1lckV2ZW50LmJpbmQodGhpcyksdGhpcy5mcmVxdWVuY3kqMTAwMCl9LGV4ZWN1dGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxiYWNrKHRoaXMpfSxzdG9wOmZ1bmN0aW9uKCl7aWYoIXRoaXMudGltZXIpe3JldHVybn1jbGVhckludGVydmFsKHRoaXMudGltZXIpO3RoaXMudGltZXI9bnVsbH0sb25UaW1lckV2ZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuY3VycmVudGx5RXhlY3V0aW5nKXt0cnl7dGhpcy5jdXJyZW50bHlFeGVjdXRpbmc9dHJ1ZTt0aGlzLmV4ZWN1dGUoKTt0aGlzLmN1cnJlbnRseUV4ZWN1dGluZz1mYWxzZX1jYXRjaChhKXt0aGlzLmN1cnJlbnRseUV4ZWN1dGluZz1mYWxzZTt0aHJvdyBhfX19fSk7T2JqZWN0LmV4dGVuZChTdHJpbmcse2ludGVycHJldDpmdW5jdGlvbihhKXtyZXR1cm4gYT09bnVsbD8iIjpTdHJpbmcoYSl9LHNwZWNpYWxDaGFyOnsiXGIiOiJcXGIiLCJcdCI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsIlxcIjoiXFxcXCJ9fSk7T2JqZWN0LmV4dGVuZChTdHJpbmcucHJvdG90eXBlLChmdW5jdGlvbigpe3ZhciBOQVRJVkVfSlNPTl9QQVJTRV9TVVBQT1JUPXdpbmRvdy5KU09OJiZ0eXBlb2YgSlNPTi5wYXJzZT09PSJmdW5jdGlvbiImJkpTT04ucGFyc2UoJ3sidGVzdCI6IHRydWV9JykudGVzdDtmdW5jdGlvbiBwcmVwYXJlUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQpe2lmKE9iamVjdC5pc0Z1bmN0aW9uKHJlcGxhY2VtZW50KSl7cmV0dXJuIHJlcGxhY2VtZW50fXZhciB0ZW1wbGF0ZT1uZXcgVGVtcGxhdGUocmVwbGFjZW1lbnQpO3JldHVybiBmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHRlbXBsYXRlLmV2YWx1YXRlKG1hdGNoKX19ZnVuY3Rpb24gaXNOb25FbXB0eVJlZ0V4cChyZWdleHApe3JldHVybiByZWdleHAuc291cmNlJiZyZWdleHAuc291cmNlIT09Iig/OikifWZ1bmN0aW9uIGdzdWIocGF0dGVybixyZXBsYWNlbWVudCl7dmFyIHJlc3VsdD0iIixzb3VyY2U9dGhpcyxtYXRjaDtyZXBsYWNlbWVudD1wcmVwYXJlUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQpO2lmKE9iamVjdC5pc1N0cmluZyhwYXR0ZXJuKSl7cGF0dGVybj1SZWdFeHAuZXNjYXBlKHBhdHRlcm4pfWlmKCEocGF0dGVybi5sZW5ndGh8fGlzTm9uRW1wdHlSZWdFeHAocGF0dGVybikpKXtyZXBsYWNlbWVudD1yZXBsYWNlbWVudCgiIik7cmV0dXJuIHJlcGxhY2VtZW50K3NvdXJjZS5zcGxpdCgiIikuam9pbihyZXBsYWNlbWVudCkrcmVwbGFjZW1lbnR9d2hpbGUoc291cmNlLmxlbmd0aD4wKXttYXRjaD1zb3VyY2UubWF0Y2gocGF0dGVybik7aWYobWF0Y2gmJm1hdGNoWzBdLmxlbmd0aD4wKXtyZXN1bHQrPXNvdXJjZS5zbGljZSgwLG1hdGNoLmluZGV4KTtyZXN1bHQrPVN0cmluZy5pbnRlcnByZXQocmVwbGFjZW1lbnQobWF0Y2gpKTtzb3VyY2U9c291cmNlLnNsaWNlKG1hdGNoLmluZGV4K21hdGNoWzBdLmxlbmd0aCl9ZWxzZXtyZXN1bHQrPXNvdXJjZSxzb3VyY2U9IiJ9fXJldHVybiByZXN1bHR9ZnVuY3Rpb24gc3ViKHBhdHRlcm4scmVwbGFjZW1lbnQsY291bnQpe3JlcGxhY2VtZW50PXByZXBhcmVSZXBsYWNlbWVudChyZXBsYWNlbWVudCk7Y291bnQ9T2JqZWN0LmlzVW5kZWZpbmVkKGNvdW50KT8xOmNvdW50O3JldHVybiB0aGlzLmdzdWIocGF0dGVybixmdW5jdGlvbihtYXRjaCl7aWYoLS1jb3VudDwwKXtyZXR1cm4gbWF0Y2hbMF19cmV0dXJuIHJlcGxhY2VtZW50KG1hdGNoKX0pfWZ1bmN0aW9uIHNjYW4ocGF0dGVybixpdGVyYXRvcil7dGhpcy5nc3ViKHBhdHRlcm4saXRlcmF0b3IpO3JldHVybiBTdHJpbmcodGhpcyl9ZnVuY3Rpb24gdHJ1bmNhdGUobGVuZ3RoLHRydW5jYXRpb24pe2xlbmd0aD1sZW5ndGh8fDMwO3RydW5jYXRpb249T2JqZWN0LmlzVW5kZWZpbmVkKHRydW5jYXRpb24pPyIuLi4iOnRydW5jYXRpb247cmV0dXJuIHRoaXMubGVuZ3RoPmxlbmd0aD90aGlzLnNsaWNlKDAsbGVuZ3RoLXRydW5jYXRpb24ubGVuZ3RoKSt0cnVuY2F0aW9uOlN0cmluZyh0aGlzKX1mdW5jdGlvbiBzdHJpcCgpe3JldHVybiB0aGlzLnJlcGxhY2UoL15ccysvLCIiKS5yZXBsYWNlKC9ccyskLywiIil9ZnVuY3Rpb24gc3RyaXBUYWdzKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvPFx3KyhccysoIlteIl0qInwnW14nXSonfFtePl0pKyk/KFwvKT8+fDxcL1x3Kz4vZ2ksIiIpfWZ1bmN0aW9uIHN0cmlwU2NyaXB0cygpe3JldHVybiB0aGlzLnJlcGxhY2UobmV3IFJlZ0V4cChQcm90b3R5cGUuU2NyaXB0RnJhZ21lbnQsImltZyIpLCIiKX1mdW5jdGlvbiBleHRyYWN0U2NyaXB0cygpe3ZhciBtYXRjaEFsbD1uZXcgUmVnRXhwKFByb3RvdHlwZS5TY3JpcHRGcmFnbWVudCwiaW1nIiksbWF0Y2hPbmU9bmV3IFJlZ0V4cChQcm90b3R5cGUuU2NyaXB0RnJhZ21lbnQsImltIik7cmV0dXJuKHRoaXMubWF0Y2gobWF0Y2hBbGwpfHxbXSkubWFwKGZ1bmN0aW9uKHNjcmlwdFRhZyl7cmV0dXJuKHNjcmlwdFRhZy5tYXRjaChtYXRjaE9uZSl8fFsiIiwiIl0pWzFdfSl9ZnVuY3Rpb24gZXZhbFNjcmlwdHMoKXtyZXR1cm4gdGhpcy5leHRyYWN0U2NyaXB0cygpLm1hcChmdW5jdGlvbihzY3JpcHQpe3JldHVybiBldmFsKHNjcmlwdCl9KX1mdW5jdGlvbiBlc2NhcGVIVE1MKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLzwvZywiJmx0OyIpLnJlcGxhY2UoLz4vZywiJmd0OyIpfWZ1bmN0aW9uIHVuZXNjYXBlSFRNTCgpe3JldHVybiB0aGlzLnN0cmlwVGFncygpLnJlcGxhY2UoLyZsdDsvZywiPCIpLnJlcGxhY2UoLyZndDsvZywiPiIpLnJlcGxhY2UoLyZhbXA7L2csIiYiKX1mdW5jdGlvbiB0b1F1ZXJ5UGFyYW1zKHNlcGFyYXRvcil7dmFyIG1hdGNoPXRoaXMuc3RyaXAoKS5tYXRjaCgvKFtePyNdKikoIy4qKT8kLyk7aWYoIW1hdGNoKXtyZXR1cm57fX1yZXR1cm4gbWF0Y2hbMV0uc3BsaXQoc2VwYXJhdG9yfHwiJiIpLmluamVjdCh7fSxmdW5jdGlvbihoYXNoLHBhaXIpe2lmKChwYWlyPXBhaXIuc3BsaXQoIj0iKSlbMF0pe3ZhciBrZXk9ZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIuc2hpZnQoKSksdmFsdWU9cGFpci5sZW5ndGg+MT9wYWlyLmpvaW4oIj0iKTpwYWlyWzBdO2lmKHZhbHVlIT11bmRlZmluZWQpe3ZhbHVlPXZhbHVlLmdzdWIoIisiLCIgIik7dmFsdWU9ZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1pZihrZXkgaW4gaGFzaCl7aWYoIU9iamVjdC5pc0FycmF5KGhhc2hba2V5XSkpe2hhc2hba2V5XT1baGFzaFtrZXldXX1oYXNoW2tleV0ucHVzaCh2YWx1ZSl9ZWxzZXtoYXNoW2tleV09dmFsdWV9fXJldHVybiBoYXNofSl9ZnVuY3Rpb24gdG9BcnJheSgpe3JldHVybiB0aGlzLnNwbGl0KCIiKX1mdW5jdGlvbiBzdWNjKCl7cmV0dXJuIHRoaXMuc2xpY2UoMCx0aGlzLmxlbmd0aC0xKStTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuY2hhckNvZGVBdCh0aGlzLmxlbmd0aC0xKSsxKX1mdW5jdGlvbiB0aW1lcyhjb3VudCl7cmV0dXJuIGNvdW50PDE/IiI6bmV3IEFycmF5KGNvdW50KzEpLmpvaW4odGhpcyl9ZnVuY3Rpb24gY2FtZWxpemUoKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC8tKyguKT8vZyxmdW5jdGlvbihtYXRjaCxjaHIpe3JldHVybiBjaHI/Y2hyLnRvVXBwZXJDYXNlKCk6IiJ9KX1mdW5jdGlvbiBjYXBpdGFsaXplKCl7cmV0dXJuIHRoaXMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdGhpcy5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiB1bmRlcnNjb3JlKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvOjovZywiLyIpLnJlcGxhY2UoLyhbQS1aXSspKFtBLVpdW2Etel0pL2csIiQxXyQyIikucmVwbGFjZSgvKFthLXpcZF0pKFtBLVpdKS9nLCIkMV8kMiIpLnJlcGxhY2UoLy0vZywiXyIpLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZGFzaGVyaXplKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXy9nLCItIil9ZnVuY3Rpb24gaW5zcGVjdCh1c2VEb3VibGVRdW90ZXMpe3ZhciBlc2NhcGVkU3RyaW5nPXRoaXMucmVwbGFjZSgvW1x4MDAtXHgxZlxcXS9nLGZ1bmN0aW9uKGNoYXJhY3Rlcil7aWYoY2hhcmFjdGVyIGluIFN0cmluZy5zcGVjaWFsQ2hhcil7cmV0dXJuIFN0cmluZy5zcGVjaWFsQ2hhcltjaGFyYWN0ZXJdfXJldHVybiJcXHUwMCIrY2hhcmFjdGVyLmNoYXJDb2RlQXQoKS50b1BhZGRlZFN0cmluZygyLDE2KX0pO2lmKHVzZURvdWJsZVF1b3Rlcyl7cmV0dXJuJyInK2VzY2FwZWRTdHJpbmcucmVwbGFjZSgvIi9nLCdcXCInKSsnIid9cmV0dXJuIiciK2VzY2FwZWRTdHJpbmcucmVwbGFjZSgvJy9nLCJcXCciKSsiJyJ9ZnVuY3Rpb24gdW5maWx0ZXJKU09OKGZpbHRlcil7cmV0dXJuIHRoaXMucmVwbGFjZShmaWx0ZXJ8fFByb3RvdHlwZS5KU09ORmlsdGVyLCIkMSIpfWZ1bmN0aW9uIGlzSlNPTigpe3ZhciBzdHI9dGhpcztpZihzdHIuYmxhbmsoKSl7cmV0dXJuIGZhbHNlfXN0cj1zdHIucmVwbGFjZSgvXFwoPzpbIlxcXC9iZm5ydF18dVswLTlhLWZBLUZdezR9KS9nLCJAIik7c3RyPXN0ci5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywiXSIpO3N0cj1zdHIucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKTtyZXR1cm4oL15bXF0sOnt9XHNdKiQvKS50ZXN0KHN0cil9ZnVuY3Rpb24gZXZhbEpTT04oc2FuaXRpemUpe3ZhciBqc29uPXRoaXMudW5maWx0ZXJKU09OKCksY3g9L1tcdTAwYWRcdTA2MDAtXHUwNjA0XHUwNzBmXHUxN2I0XHUxN2I1XHUyMDBjLVx1MjAwZlx1MjAyOC1cdTIwMmZcdTIwNjAtXHUyMDZmXHVmZWZmXHVmZmYwLVx1ZmZmZlx1MDAwMF0vZztpZihjeC50ZXN0KGpzb24pKXtqc29uPWpzb24ucmVwbGFjZShjeCxmdW5jdGlvbihhKXtyZXR1cm4iXFx1IisoIjAwMDAiK2EuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KX0pfXRyeXtpZighc2FuaXRpemV8fGpzb24uaXNKU09OKCkpe3JldHVybiBldmFsKCIoIitqc29uKyIpIil9fWNhdGNoKGUpe310aHJvdyBuZXcgU3ludGF4RXJyb3IoIkJhZGx5IGZvcm1lZCBKU09OIHN0cmluZzogIit0aGlzLmluc3BlY3QoKSl9ZnVuY3Rpb24gcGFyc2VKU09OKCl7dmFyIGpzb249dGhpcy51bmZpbHRlckpTT04oKTtyZXR1cm4gSlNPTi5wYXJzZShqc29uKX1mdW5jdGlvbiBpbmNsdWRlKHBhdHRlcm4pe3JldHVybiB0aGlzLmluZGV4T2YocGF0dGVybik+LTF9ZnVuY3Rpb24gc3RhcnRzV2l0aChwYXR0ZXJuLHBvc2l0aW9uKXtwb3NpdGlvbj1PYmplY3QuaXNOdW1iZXIocG9zaXRpb24pP3Bvc2l0aW9uOjA7cmV0dXJuIHRoaXMubGFzdEluZGV4T2YocGF0dGVybixwb3NpdGlvbik9PT1wb3NpdGlvbn1mdW5jdGlvbiBlbmRzV2l0aChwYXR0ZXJuLHBvc2l0aW9uKXtwYXR0ZXJuPVN0cmluZyhwYXR0ZXJuKTtwb3NpdGlvbj1PYmplY3QuaXNOdW1iZXIocG9zaXRpb24pP3Bvc2l0aW9uOnRoaXMubGVuZ3RoO2lmKHBvc2l0aW9uPDApe3Bvc2l0aW9uPTB9aWYocG9zaXRpb24+dGhpcy5sZW5ndGgpe3Bvc2l0aW9uPXRoaXMubGVuZ3RofXZhciBkPXBvc2l0aW9uLXBhdHRlcm4ubGVuZ3RoO3JldHVybiBkPj0wJiZ0aGlzLmluZGV4T2YocGF0dGVybixkKT09PWR9ZnVuY3Rpb24gZW1wdHkoKXtyZXR1cm4gdGhpcz09IiJ9ZnVuY3Rpb24gYmxhbmsoKXtyZXR1cm4vXlxzKiQvLnRlc3QodGhpcyl9ZnVuY3Rpb24gaW50ZXJwb2xhdGUob2JqZWN0LHBhdHRlcm4pe3JldHVybiBuZXcgVGVtcGxhdGUodGhpcyxwYXR0ZXJuKS5ldmFsdWF0ZShvYmplY3QpfXJldHVybntnc3ViOmdzdWIsc3ViOnN1YixzY2FuOnNjYW4sdHJ1bmNhdGU6dHJ1bmNhdGUsc3RyaXA6U3RyaW5nLnByb3RvdHlwZS50cmltfHxzdHJpcCxzdHJpcFRhZ3M6c3RyaXBUYWdzLHN0cmlwU2NyaXB0czpzdHJpcFNjcmlwdHMsZXh0cmFjdFNjcmlwdHM6ZXh0cmFjdFNjcmlwdHMsZXZhbFNjcmlwdHM6ZXZhbFNjcmlwdHMsZXNjYXBlSFRNTDplc2NhcGVIVE1MLHVuZXNjYXBlSFRNTDp1bmVzY2FwZUhUTUwsdG9RdWVyeVBhcmFtczp0b1F1ZXJ5UGFyYW1zLHBhcnNlUXVlcnk6dG9RdWVyeVBhcmFtcyx0b0FycmF5OnRvQXJyYXksc3VjYzpzdWNjLHRpbWVzOnRpbWVzLGNhbWVsaXplOmNhbWVsaXplLGNhcGl0YWxpemU6Y2FwaXRhbGl6ZSx1bmRlcnNjb3JlOnVuZGVyc2NvcmUsZGFzaGVyaXplOmRhc2hlcml6ZSxpbnNwZWN0Omluc3BlY3QsdW5maWx0ZXJKU09OOnVuZmlsdGVySlNPTixpc0pTT046aXNKU09OLGV2YWxKU09OOk5BVElWRV9KU09OX1BBUlNFX1NVUFBPUlQ/cGFyc2VKU09OOmV2YWxKU09OLGluY2x1ZGU6aW5jbHVkZSxzdGFydHNXaXRoOlN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aHx8c3RhcnRzV2l0aCxlbmRzV2l0aDpTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRofHxlbmRzV2l0aCxlbXB0eTplbXB0eSxibGFuazpibGFuayxpbnRlcnBvbGF0ZTppbnRlcnBvbGF0ZX19KSgpKTt2YXIgVGVtcGxhdGU9Q2xhc3MuY3JlYXRlKHtpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy50ZW1wbGF0ZT1hLnRvU3RyaW5nKCk7dGhpcy5wYXR0ZXJuPWJ8fFRlbXBsYXRlLlBhdHRlcm59LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe2lmKGEmJk9iamVjdC5pc0Z1bmN0aW9uKGEudG9UZW1wbGF0ZVJlcGxhY2VtZW50cykpe2E9YS50b1RlbXBsYXRlUmVwbGFjZW1lbnRzKCl9cmV0dXJuIHRoaXMudGVtcGxhdGUuZ3N1Yih0aGlzLnBhdHRlcm4sZnVuY3Rpb24oZCl7aWYoYT09bnVsbCl7cmV0dXJuKGRbMV0rIiIpfXZhciBmPWRbMV18fCIiO2lmKGY9PSJcXCIpe3JldHVybiBkWzJdfXZhciBiPWEsZz1kWzNdLGU9L14oW14uW10rfFxbKCg/Oi4qP1teXFxdKT8pXF0pKFwufFxbfCQpLztkPWUuZXhlYyhnKTtpZihkPT1udWxsKXtyZXR1cm4gZn13aGlsZShkIT1udWxsKXt2YXIgYz1kWzFdLnN0YXJ0c1dpdGgoIlsiKT9kWzJdLnJlcGxhY2UoL1xcXFxdL2csIl0iKTpkWzFdO2I9YltjXTtpZihudWxsPT1ifHwiIj09ZFszXSl7YnJlYWt9Zz1nLnN1YnN0cmluZygiWyI9PWRbM10/ZFsxXS5sZW5ndGg6ZFswXS5sZW5ndGgpO2Q9ZS5leGVjKGcpfXJldHVybiBmK1N0cmluZy5pbnRlcnByZXQoYil9KX19KTtUZW1wbGF0ZS5QYXR0ZXJuPS8oXnwufFxyfFxuKSgjXHsoLio/KVx9KS87dmFyICRicmVhaz17fTt2YXIgRW51bWVyYWJsZT0oZnVuY3Rpb24oKXtmdW5jdGlvbiBjKHgsdyl7dHJ5e3RoaXMuX2VhY2goeCx3KX1jYXRjaCh5KXtpZih5IT0kYnJlYWspe3Rocm93IHl9fXJldHVybiB0aGlzfWZ1bmN0aW9uIHIoeix5LHgpe3ZhciB3PS16LEE9W10sQj10aGlzLnRvQXJyYXkoKTtpZih6PDEpe3JldHVybiBCfXdoaWxlKCh3Kz16KTxCLmxlbmd0aCl7QS5wdXNoKEIuc2xpY2Uodyx3K3opKX1yZXR1cm4gQS5jb2xsZWN0KHkseCl9ZnVuY3Rpb24gYih5LHgpe3k9eXx8UHJvdG90eXBlLks7dmFyIHc9dHJ1ZTt0aGlzLmVhY2goZnVuY3Rpb24oQSx6KXt3PXcmJiEheS5jYWxsKHgsQSx6LHRoaXMpO2lmKCF3KXt0aHJvdyAkYnJlYWt9fSx0aGlzKTtyZXR1cm4gd31mdW5jdGlvbiBpKHkseCl7eT15fHxQcm90b3R5cGUuSzt2YXIgdz1mYWxzZTt0aGlzLmVhY2goZnVuY3Rpb24oQSx6KXtpZih3PSEheS5jYWxsKHgsQSx6LHRoaXMpKXt0aHJvdyAkYnJlYWt9fSx0aGlzKTtyZXR1cm4gd31mdW5jdGlvbiBqKHkseCl7eT15fHxQcm90b3R5cGUuSzt2YXIgdz1bXTt0aGlzLmVhY2goZnVuY3Rpb24oQSx6KXt3LnB1c2goeS5jYWxsKHgsQSx6LHRoaXMpKX0sdGhpcyk7cmV0dXJuIHd9ZnVuY3Rpb24gdCh5LHgpe3ZhciB3O3RoaXMuZWFjaChmdW5jdGlvbihBLHope2lmKHkuY2FsbCh4LEEseix0aGlzKSl7dz1BO3Rocm93ICRicmVha319LHRoaXMpO3JldHVybiB3fWZ1bmN0aW9uIGgoeSx4KXt2YXIgdz1bXTt0aGlzLmVhY2goZnVuY3Rpb24oQSx6KXtpZih5LmNhbGwoeCxBLHosdGhpcykpe3cucHVzaChBKX19LHRoaXMpO3JldHVybiB3fWZ1bmN0aW9uIGcoeix5LHgpe3k9eXx8UHJvdG90eXBlLks7dmFyIHc9W107aWYoT2JqZWN0LmlzU3RyaW5nKHopKXt6PW5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZSh6KSl9dGhpcy5lYWNoKGZ1bmN0aW9uKEIsQSl7aWYoei5tYXRjaChCKSl7dy5wdXNoKHkuY2FsbCh4LEIsQSx0aGlzKSl9fSx0aGlzKTtyZXR1cm4gd31mdW5jdGlvbiBhKHcpe2lmKE9iamVjdC5pc0Z1bmN0aW9uKHRoaXMuaW5kZXhPZikmJnRoaXMuaW5kZXhPZih3KSE9LTEpe3JldHVybiB0cnVlfXZhciB4PWZhbHNlO3RoaXMuZWFjaChmdW5jdGlvbih5KXtpZih5PT13KXt4PXRydWU7dGhyb3cgJGJyZWFrfX0pO3JldHVybiB4fWZ1bmN0aW9uIHEoeCx3KXt3PU9iamVjdC5pc1VuZGVmaW5lZCh3KT9udWxsOnc7cmV0dXJuIHRoaXMuZWFjaFNsaWNlKHgsZnVuY3Rpb24oeSl7d2hpbGUoeS5sZW5ndGg8eCl7eS5wdXNoKHcpfXJldHVybiB5fSl9ZnVuY3Rpb24gbCh3LHkseCl7dGhpcy5lYWNoKGZ1bmN0aW9uKEEseil7dz15LmNhbGwoeCx3LEEseix0aGlzKX0sdGhpcyk7cmV0dXJuIHd9ZnVuY3Rpb24gdih4KXt2YXIgdz0kQShhcmd1bWVudHMpLnNsaWNlKDEpO3JldHVybiB0aGlzLm1hcChmdW5jdGlvbih5KXtyZXR1cm4geVt4XS5hcHBseSh5LHcpfSl9ZnVuY3Rpb24gcCh5LHgpe3k9eXx8UHJvdG90eXBlLks7dmFyIHc7dGhpcy5lYWNoKGZ1bmN0aW9uKEEseil7QT15LmNhbGwoeCxBLHosdGhpcyk7aWYodz09bnVsbHx8QT49dyl7dz1BfX0sdGhpcyk7cmV0dXJuIHd9ZnVuY3Rpb24gbih5LHgpe3k9eXx8UHJvdG90eXBlLks7dmFyIHc7dGhpcy5lYWNoKGZ1bmN0aW9uKEEseil7QT15LmNhbGwoeCxBLHosdGhpcyk7aWYodz09bnVsbHx8QTx3KXt3PUF9fSx0aGlzKTtyZXR1cm4gd31mdW5jdGlvbiBlKHoseCl7ej16fHxQcm90b3R5cGUuSzt2YXIgeT1bXSx3PVtdO3RoaXMuZWFjaChmdW5jdGlvbihCLEEpeyh6LmNhbGwoeCxCLEEsdGhpcyk/eTp3KS5wdXNoKEIpfSx0aGlzKTtyZXR1cm5beSx3XX1mdW5jdGlvbiBmKHgpe3ZhciB3PVtdO3RoaXMuZWFjaChmdW5jdGlvbih5KXt3LnB1c2goeVt4XSl9KTtyZXR1cm4gd31mdW5jdGlvbiBkKHkseCl7dmFyIHc9W107dGhpcy5lYWNoKGZ1bmN0aW9uKEEseil7aWYoIXkuY2FsbCh4LEEseix0aGlzKSl7dy5wdXNoKEEpfX0sdGhpcyk7cmV0dXJuIHd9ZnVuY3Rpb24gbSh4LHcpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbih6LHkpe3JldHVybnt2YWx1ZTp6LGNyaXRlcmlhOnguY2FsbCh3LHoseSx0aGlzKX19LHRoaXMpLnNvcnQoZnVuY3Rpb24oQixBKXt2YXIgej1CLmNyaXRlcmlhLHk9QS5jcml0ZXJpYTtyZXR1cm4gejx5Py0xOno+eT8xOjB9KS5wbHVjaygidmFsdWUiKX1mdW5jdGlvbiBvKCl7cmV0dXJuIHRoaXMubWFwKCl9ZnVuY3Rpb24gcygpe3ZhciB4PVByb3RvdHlwZS5LLHc9JEEoYXJndW1lbnRzKTtpZihPYmplY3QuaXNGdW5jdGlvbih3Lmxhc3QoKSkpe3g9dy5wb3AoKX12YXIgeT1bdGhpc10uY29uY2F0KHcpLm1hcCgkQSk7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKEEseil7cmV0dXJuIHgoeS5wbHVjayh6KSl9KX1mdW5jdGlvbiBrKCl7cmV0dXJuIHRoaXMudG9BcnJheSgpLmxlbmd0aH1mdW5jdGlvbiB1KCl7cmV0dXJuIiM8RW51bWVyYWJsZToiK3RoaXMudG9BcnJheSgpLmluc3BlY3QoKSsiPiJ9cmV0dXJue2VhY2g6YyxlYWNoU2xpY2U6cixhbGw6YixldmVyeTpiLGFueTppLHNvbWU6aSxjb2xsZWN0OmosbWFwOmosZGV0ZWN0OnQsZmluZEFsbDpoLHNlbGVjdDpoLGZpbHRlcjpoLGdyZXA6ZyxpbmNsdWRlOmEsbWVtYmVyOmEsaW5Hcm91cHNPZjpxLGluamVjdDpsLGludm9rZTp2LG1heDpwLG1pbjpuLHBhcnRpdGlvbjplLHBsdWNrOmYscmVqZWN0OmQsc29ydEJ5Om0sdG9BcnJheTpvLGVudHJpZXM6byx6aXA6cyxzaXplOmssaW5zcGVjdDp1LGZpbmQ6dH19KSgpO2Z1bmN0aW9uICRBKGMpe2lmKCFjKXtyZXR1cm5bXX1pZigidG9BcnJheSIgaW4gT2JqZWN0KGMpKXtyZXR1cm4gYy50b0FycmF5KCl9dmFyIGI9Yy5sZW5ndGh8fDAsYT1uZXcgQXJyYXkoYik7d2hpbGUoYi0tKXthW2JdPWNbYl19cmV0dXJuIGF9ZnVuY3Rpb24gJHcoYSl7aWYoIU9iamVjdC5pc1N0cmluZyhhKSl7cmV0dXJuW119YT1hLnN0cmlwKCk7cmV0dXJuIGE/YS5zcGxpdCgvXHMrLyk6W119QXJyYXkuZnJvbT0kQTsoZnVuY3Rpb24oKXt2YXIgdj1BcnJheS5wcm90b3R5cGUsbz12LnNsaWNlLHE9di5mb3JFYWNoO2Z1bmN0aW9uIGIoQixBKXtmb3IodmFyIHo9MCxDPXRoaXMubGVuZ3RoPj4+MDt6PEM7eisrKXtpZih6IGluIHRoaXMpe0IuY2FsbChBLHRoaXNbel0seix0aGlzKX19fWlmKCFxKXtxPWJ9ZnVuY3Rpb24gbigpe3RoaXMubGVuZ3RoPTA7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gZCgpe3JldHVybiB0aGlzWzBdfWZ1bmN0aW9uIGcoKXtyZXR1cm4gdGhpc1t0aGlzLmxlbmd0aC0xXX1mdW5jdGlvbiBrKCl7cmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKHope3JldHVybiB6IT1udWxsfSl9ZnVuY3Rpb24geSgpe3JldHVybiB0aGlzLmluamVjdChbXSxmdW5jdGlvbihBLHope2lmKE9iamVjdC5pc0FycmF5KHopKXtyZXR1cm4gQS5jb25jYXQoei5mbGF0dGVuKCkpfUEucHVzaCh6KTtyZXR1cm4gQX0pfWZ1bmN0aW9uIGooKXt2YXIgej1vLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbihBKXtyZXR1cm4gIXouaW5jbHVkZShBKX0pfWZ1bmN0aW9uIGYoeil7cmV0dXJuKHo9PT1mYWxzZT90aGlzLnRvQXJyYXkoKTp0aGlzKS5fcmV2ZXJzZSgpfWZ1bmN0aW9uIG0oeil7cmV0dXJuIHRoaXMuaW5qZWN0KFtdLGZ1bmN0aW9uKEMsQixBKXtpZigwPT1BfHwoej9DLmxhc3QoKSE9QjohQy5pbmNsdWRlKEIpKSl7Qy5wdXNoKEIpfXJldHVybiBDfSl9ZnVuY3Rpb24gcih6KXtyZXR1cm4gdGhpcy51bmlxKCkuZmluZEFsbChmdW5jdGlvbihBKXtyZXR1cm4gei5pbmRleE9mKEEpIT09LTF9KX1mdW5jdGlvbiB0KCl7cmV0dXJuIG8uY2FsbCh0aGlzLDApfWZ1bmN0aW9uIGwoKXtyZXR1cm4gdGhpcy5sZW5ndGh9ZnVuY3Rpb24gdygpe3JldHVybiJbIit0aGlzLm1hcChPYmplY3QuaW5zcGVjdCkuam9pbigiLCAiKSsiXSJ9ZnVuY3Rpb24gYShDLEEpe2lmKHRoaXM9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoKX12YXIgRD1PYmplY3QodGhpcyksQj1ELmxlbmd0aD4+PjA7aWYoQj09PTApe3JldHVybiAtMX1BPU51bWJlcihBKTtpZihpc05hTihBKSl7QT0wfWVsc2V7aWYoQSE9PTAmJmlzRmluaXRlKEEpKXtBPShBPjA/MTotMSkqTWF0aC5mbG9vcihNYXRoLmFicyhBKSl9fWlmKEE+Qil7cmV0dXJuIC0xfXZhciB6PUE+PTA/QTpNYXRoLm1heChCLU1hdGguYWJzKEEpLDApO2Zvcig7ejxCO3orKyl7aWYoeiBpbiBEJiZEW3pdPT09Qyl7cmV0dXJuIHp9fXJldHVybiAtMX1mdW5jdGlvbiBwKEMsQSl7aWYodGhpcz09bnVsbCl7dGhyb3cgbmV3IFR5cGVFcnJvcigpfXZhciBEPU9iamVjdCh0aGlzKSxCPUQubGVuZ3RoPj4+MDtpZihCPT09MCl7cmV0dXJuIC0xfWlmKCFPYmplY3QuaXNVbmRlZmluZWQoQSkpe0E9TnVtYmVyKEEpO2lmKGlzTmFOKEEpKXtBPTB9ZWxzZXtpZihBIT09MCYmaXNGaW5pdGUoQSkpe0E9KEE+MD8xOi0xKSpNYXRoLmZsb29yKE1hdGguYWJzKEEpKX19fWVsc2V7QT1CfXZhciB6PUE+PTA/TWF0aC5taW4oQSxCLTEpOkItTWF0aC5hYnMoQSk7Zm9yKDt6Pj0wO3otLSl7aWYoeiBpbiBEJiZEW3pdPT09Qyl7cmV0dXJuIHp9fXJldHVybiAtMX1mdW5jdGlvbiBjKEcpe3ZhciBFPVtdLEY9by5jYWxsKGFyZ3VtZW50cywwKSxILEE9MDtGLnVuc2hpZnQodGhpcyk7Zm9yKHZhciBEPTAsej1GLmxlbmd0aDtEPHo7RCsrKXtIPUZbRF07aWYoT2JqZWN0LmlzQXJyYXkoSCkmJiEoImNhbGxlZSIgaW4gSCkpe2Zvcih2YXIgQz0wLEI9SC5sZW5ndGg7QzxCO0MrKyl7aWYoQyBpbiBIKXtFW0FdPUhbQ119QSsrfX1lbHNle0VbQSsrXT1IfX1FLmxlbmd0aD1BO3JldHVybiBFfWZ1bmN0aW9uIHMoeil7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiB6LmNhbGwodGhpcyxQcm90b3R5cGUuSyl9ZWxzZXtpZihhcmd1bWVudHNbMF09PT11bmRlZmluZWQpe3ZhciBBPW8uY2FsbChhcmd1bWVudHMsMSk7QS51bnNoaWZ0KFByb3RvdHlwZS5LKTtyZXR1cm4gei5hcHBseSh0aGlzLEEpfWVsc2V7cmV0dXJuIHouYXBwbHkodGhpcyxhcmd1bWVudHMpfX19fWZ1bmN0aW9uIHUoRCl7aWYodGhpcz09bnVsbCl7dGhyb3cgbmV3IFR5cGVFcnJvcigpfUQ9RHx8UHJvdG90eXBlLks7dmFyIHo9T2JqZWN0KHRoaXMpO3ZhciBDPVtdLEI9YXJndW1lbnRzWzFdLEY9MDtmb3IodmFyIEE9MCxFPXoubGVuZ3RoPj4+MDtBPEU7QSsrKXtpZihBIGluIHope0NbRl09RC5jYWxsKEIseltBXSxBLHopfUYrK31DLmxlbmd0aD1GO3JldHVybiBDfWlmKHYubWFwKXt1PXMoQXJyYXkucHJvdG90eXBlLm1hcCl9ZnVuY3Rpb24gaChEKXtpZih0aGlzPT1udWxsfHwhT2JqZWN0LmlzRnVuY3Rpb24oRCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoKX12YXIgej1PYmplY3QodGhpcyk7dmFyIEM9W10sQj1hcmd1bWVudHNbMV0sRjtmb3IodmFyIEE9MCxFPXoubGVuZ3RoPj4+MDtBPEU7QSsrKXtpZihBIGluIHope0Y9eltBXTtpZihELmNhbGwoQixGLEEseikpe0MucHVzaChGKX19fXJldHVybiBDfWlmKHYuZmlsdGVyKXtoPUFycmF5LnByb3RvdHlwZS5maWx0ZXJ9ZnVuY3Rpb24gaShDKXtpZih0aGlzPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCl9Qz1DfHxQcm90b3R5cGUuSzt2YXIgQj1hcmd1bWVudHNbMV07dmFyIHo9T2JqZWN0KHRoaXMpO2Zvcih2YXIgQT0wLEQ9ei5sZW5ndGg+Pj4wO0E8RDtBKyspe2lmKEEgaW4geiYmQy5jYWxsKEIseltBXSxBLHopKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfWlmKHYuc29tZSl7aT1zKEFycmF5LnByb3RvdHlwZS5zb21lKX1mdW5jdGlvbiB4KEMpe2lmKHRoaXM9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoKX1DPUN8fFByb3RvdHlwZS5LO3ZhciBCPWFyZ3VtZW50c1sxXTt2YXIgej1PYmplY3QodGhpcyk7Zm9yKHZhciBBPTAsRD16Lmxlbmd0aD4+PjA7QTxEO0ErKyl7aWYoQSBpbiB6JiYhQy5jYWxsKEIseltBXSxBLHopKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWlmKHYuZXZlcnkpe3g9cyhBcnJheS5wcm90b3R5cGUuZXZlcnkpfU9iamVjdC5leHRlbmQodixFbnVtZXJhYmxlKTtpZih2LmVudHJpZXM9PT1FbnVtZXJhYmxlLmVudHJpZXMpe2RlbGV0ZSB2LmVudHJpZXN9aWYoIXYuX3JldmVyc2Upe3YuX3JldmVyc2U9di5yZXZlcnNlfU9iamVjdC5leHRlbmQodix7X2VhY2g6cSxtYXA6dSxjb2xsZWN0OnUsc2VsZWN0OmgsZmlsdGVyOmgsZmluZEFsbDpoLHNvbWU6aSxhbnk6aSxldmVyeTp4LGFsbDp4LGNsZWFyOm4sZmlyc3Q6ZCxsYXN0OmcsY29tcGFjdDprLGZsYXR0ZW46eSx3aXRob3V0OmoscmV2ZXJzZTpmLHVuaXE6bSxpbnRlcnNlY3Q6cixjbG9uZTp0LHRvQXJyYXk6dCxzaXplOmwsaW5zcGVjdDp3fSk7dmFyIGU9KGZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KGFyZ3VtZW50cylbMF1bMF0hPT0xfSkoMSwyKTtpZihlKXt2LmNvbmNhdD1jfWlmKCF2LmluZGV4T2Ype3YuaW5kZXhPZj1hfWlmKCF2Lmxhc3RJbmRleE9mKXt2Lmxhc3RJbmRleE9mPXB9fSkoKTtmdW5jdGlvbiAkSChhKXtyZXR1cm4gbmV3IEhhc2goYSl9dmFyIEhhc2g9Q2xhc3MuY3JlYXRlKEVudW1lcmFibGUsKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShwKXt0aGlzLl9vYmplY3Q9T2JqZWN0LmlzSGFzaChwKT9wLnRvT2JqZWN0KCk6T2JqZWN0LmNsb25lKHApfWZ1bmN0aW9uIGYocyxyKXt2YXIgcT0wO2Zvcih2YXIgcCBpbiB0aGlzLl9vYmplY3Qpe3ZhciB0PXRoaXMuX29iamVjdFtwXSx1PVtwLHRdO3Uua2V5PXA7dS52YWx1ZT10O3MuY2FsbChyLHUscSk7cSsrfX1mdW5jdGlvbiBqKHAscSl7cmV0dXJuIHRoaXMuX29iamVjdFtwXT1xfWZ1bmN0aW9uIGMocCl7aWYodGhpcy5fb2JqZWN0W3BdIT09T2JqZWN0LnByb3RvdHlwZVtwXSl7cmV0dXJuIHRoaXMuX29iamVjdFtwXX19ZnVuY3Rpb24gbShwKXt2YXIgcT10aGlzLl9vYmplY3RbcF07ZGVsZXRlIHRoaXMuX29iamVjdFtwXTtyZXR1cm4gcX1mdW5jdGlvbiBvKCl7cmV0dXJuIE9iamVjdC5jbG9uZSh0aGlzLl9vYmplY3QpfWZ1bmN0aW9uIG4oKXtyZXR1cm4gdGhpcy5wbHVjaygia2V5Iil9ZnVuY3Rpb24gbCgpe3JldHVybiB0aGlzLnBsdWNrKCJ2YWx1ZSIpfWZ1bmN0aW9uIGcocSl7dmFyIHA9dGhpcy5kZXRlY3QoZnVuY3Rpb24ocil7cmV0dXJuIHIudmFsdWU9PT1xfSk7cmV0dXJuIHAmJnAua2V5fWZ1bmN0aW9uIGkocCl7cmV0dXJuIHRoaXMuY2xvbmUoKS51cGRhdGUocCl9ZnVuY3Rpb24gZChwKXtyZXR1cm4gbmV3IEhhc2gocCkuaW5qZWN0KHRoaXMsZnVuY3Rpb24ocSxyKXtxLnNldChyLmtleSxyLnZhbHVlKTtyZXR1cm4gcX0pfWZ1bmN0aW9uIGIocCxxKXtpZihPYmplY3QuaXNVbmRlZmluZWQocSkpe3JldHVybiBwfXE9U3RyaW5nLmludGVycHJldChxKTtxPXEuZ3N1YigvKFxyKT9cbi8sIlxyXG4iKTtxPWVuY29kZVVSSUNvbXBvbmVudChxKTtxPXEuZ3N1YigvJTIwLywiKyIpO3JldHVybiBwKyI9IitxfWZ1bmN0aW9uIGEoKXtyZXR1cm4gdGhpcy5pbmplY3QoW10sZnVuY3Rpb24odCx3KXt2YXIgcz1lbmNvZGVVUklDb21wb25lbnQody5rZXkpLHE9dy52YWx1ZTtpZihxJiZ0eXBlb2YgcT09Im9iamVjdCIpe2lmKE9iamVjdC5pc0FycmF5KHEpKXt2YXIgdj1bXTtmb3IodmFyIHI9MCxwPXEubGVuZ3RoLHU7cjxwO3IrKyl7dT1xW3JdO3YucHVzaChiKHMsdSkpfXJldHVybiB0LmNvbmNhdCh2KX19ZWxzZXt0LnB1c2goYihzLHEpKX1yZXR1cm4gdH0pLmpvaW4oIiYiKX1mdW5jdGlvbiBrKCl7cmV0dXJuIiM8SGFzaDp7Iit0aGlzLm1hcChmdW5jdGlvbihwKXtyZXR1cm4gcC5tYXAoT2JqZWN0Lmluc3BlY3QpLmpvaW4oIjogIil9KS5qb2luKCIsICIpKyJ9PiJ9ZnVuY3Rpb24gaCgpe3JldHVybiBuZXcgSGFzaCh0aGlzKX1yZXR1cm57aW5pdGlhbGl6ZTplLF9lYWNoOmYsc2V0OmosZ2V0OmMsdW5zZXQ6bSx0b09iamVjdDpvLHRvVGVtcGxhdGVSZXBsYWNlbWVudHM6byxrZXlzOm4sdmFsdWVzOmwsaW5kZXg6ZyxtZXJnZTppLHVwZGF0ZTpkLHRvUXVlcnlTdHJpbmc6YSxpbnNwZWN0OmssdG9KU09OOm8sY2xvbmU6aH19KSgpKTtIYXNoLmZyb209JEg7T2JqZWN0LmV4dGVuZChOdW1iZXIucHJvdG90eXBlLChmdW5jdGlvbigpe2Z1bmN0aW9uIGQoKXtyZXR1cm4gdGhpcy50b1BhZGRlZFN0cmluZygyLDE2KX1mdW5jdGlvbiBiKCl7cmV0dXJuIHRoaXMrMX1mdW5jdGlvbiBoKGosaSl7JFIoMCx0aGlzLHRydWUpLmVhY2goaixpKTtyZXR1cm4gdGhpc31mdW5jdGlvbiBnKGssail7dmFyIGk9dGhpcy50b1N0cmluZyhqfHwxMCk7cmV0dXJuIjAiLnRpbWVzKGstaS5sZW5ndGgpK2l9ZnVuY3Rpb24gYSgpe3JldHVybiBNYXRoLmFicyh0aGlzKX1mdW5jdGlvbiBjKCl7cmV0dXJuIE1hdGgucm91bmQodGhpcyl9ZnVuY3Rpb24gZSgpe3JldHVybiBNYXRoLmNlaWwodGhpcyl9ZnVuY3Rpb24gZigpe3JldHVybiBNYXRoLmZsb29yKHRoaXMpfXJldHVybnt0b0NvbG9yUGFydDpkLHN1Y2M6Yix0aW1lczpoLHRvUGFkZGVkU3RyaW5nOmcsYWJzOmEscm91bmQ6YyxjZWlsOmUsZmxvb3I6Zn19KSgpKTtmdW5jdGlvbiAkUihjLGEsYil7cmV0dXJuIG5ldyBPYmplY3RSYW5nZShjLGEsYil9dmFyIE9iamVjdFJhbmdlPUNsYXNzLmNyZWF0ZShFbnVtZXJhYmxlLChmdW5jdGlvbigpe2Z1bmN0aW9uIGIoZixkLGUpe3RoaXMuc3RhcnQ9Zjt0aGlzLmVuZD1kO3RoaXMuZXhjbHVzaXZlPWV9ZnVuY3Rpb24gYyhmLGUpe3ZhciBnPXRoaXMuc3RhcnQsZDtmb3IoZD0wO3RoaXMuaW5jbHVkZShnKTtkKyspe2YuY2FsbChlLGcsZCk7Zz1nLnN1Y2MoKX19ZnVuY3Rpb24gYShkKXtpZihkPHRoaXMuc3RhcnQpe3JldHVybiBmYWxzZX1pZih0aGlzLmV4Y2x1c2l2ZSl7cmV0dXJuIGQ8dGhpcy5lbmR9cmV0dXJuIGQ8PXRoaXMuZW5kfXJldHVybntpbml0aWFsaXplOmIsX2VhY2g6YyxpbmNsdWRlOmF9fSkoKSk7dmFyIEFic3RyYWN0PXt9O3ZhciBUcnk9e3RoZXNlOmZ1bmN0aW9uKCl7dmFyIGM7Zm9yKHZhciBiPTAsZD1hcmd1bWVudHMubGVuZ3RoO2I8ZDtiKyspe3ZhciBhPWFyZ3VtZW50c1tiXTt0cnl7Yz1hKCk7YnJlYWt9Y2F0Y2goZil7fX1yZXR1cm4gY319O3ZhciBBamF4PXtnZXRUcmFuc3BvcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gVHJ5LnRoZXNlKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTXN4bWwyLlhNTEhUVFAiKX0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9KXx8ZmFsc2V9LGFjdGl2ZVJlcXVlc3RDb3VudDowfTtBamF4LlJlc3BvbmRlcnM9e3Jlc3BvbmRlcnM6W10sX2VhY2g6ZnVuY3Rpb24oYixhKXt0aGlzLnJlc3BvbmRlcnMuX2VhY2goYixhKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaW5jbHVkZShhKSl7dGhpcy5yZXNwb25kZXJzLnB1c2goYSl9fSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe3RoaXMucmVzcG9uZGVycz10aGlzLnJlc3BvbmRlcnMud2l0aG91dChhKX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZCxiLGMsYSl7dGhpcy5lYWNoKGZ1bmN0aW9uKGYpe2lmKE9iamVjdC5pc0Z1bmN0aW9uKGZbZF0pKXt0cnl7ZltkXS5hcHBseShmLFtiLGMsYV0pfWNhdGNoKGcpe319fSl9fTtPYmplY3QuZXh0ZW5kKEFqYXguUmVzcG9uZGVycyxFbnVtZXJhYmxlKTtBamF4LlJlc3BvbmRlcnMucmVnaXN0ZXIoe29uQ3JlYXRlOmZ1bmN0aW9uKCl7QWpheC5hY3RpdmVSZXF1ZXN0Q291bnQrK30sb25Db21wbGV0ZTpmdW5jdGlvbigpe0FqYXguYWN0aXZlUmVxdWVzdENvdW50LS19fSk7QWpheC5CYXNlPUNsYXNzLmNyZWF0ZSh7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLm9wdGlvbnM9e21ldGhvZDoicG9zdCIsYXN5bmNocm9ub3VzOnRydWUsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsZW5jb2Rpbmc6IlVURi04IixwYXJhbWV0ZXJzOiIiLGV2YWxKU09OOnRydWUsZXZhbEpTOnRydWV9O09iamVjdC5leHRlbmQodGhpcy5vcHRpb25zLGF8fHt9KTt0aGlzLm9wdGlvbnMubWV0aG9kPXRoaXMub3B0aW9ucy5tZXRob2QudG9Mb3dlckNhc2UoKTtpZihPYmplY3QuaXNIYXNoKHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzKSl7dGhpcy5vcHRpb25zLnBhcmFtZXRlcnM9dGhpcy5vcHRpb25zLnBhcmFtZXRlcnMudG9PYmplY3QoKX19fSk7QWpheC5SZXF1ZXN0PUNsYXNzLmNyZWF0ZShBamF4LkJhc2Use19jb21wbGV0ZTpmYWxzZSxpbml0aWFsaXplOmZ1bmN0aW9uKCRzdXBlcixiLGEpeyRzdXBlcihhKTt0aGlzLnRyYW5zcG9ydD1BamF4LmdldFRyYW5zcG9ydCgpO3RoaXMucmVxdWVzdChiKX0scmVxdWVzdDpmdW5jdGlvbihiKXt0aGlzLnVybD1iO3RoaXMubWV0aG9kPXRoaXMub3B0aW9ucy5tZXRob2Q7dmFyIGQ9T2JqZWN0LmlzU3RyaW5nKHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzKT90aGlzLm9wdGlvbnMucGFyYW1ldGVyczpPYmplY3QudG9RdWVyeVN0cmluZyh0aGlzLm9wdGlvbnMucGFyYW1ldGVycyk7aWYoIVsiZ2V0IiwicG9zdCJdLmluY2x1ZGUodGhpcy5tZXRob2QpKXtkKz0oZD8iJiI6IiIpKyJfbWV0aG9kPSIrdGhpcy5tZXRob2Q7dGhpcy5tZXRob2Q9InBvc3QifWlmKGQmJnRoaXMubWV0aG9kPT09ImdldCIpe3RoaXMudXJsKz0odGhpcy51cmwuaW5jbHVkZSgiPyIpPyImIjoiPyIpK2R9dGhpcy5wYXJhbWV0ZXJzPWQudG9RdWVyeVBhcmFtcygpO3RyeXt2YXIgYT1uZXcgQWpheC5SZXNwb25zZSh0aGlzKTtpZih0aGlzLm9wdGlvbnMub25DcmVhdGUpe3RoaXMub3B0aW9ucy5vbkNyZWF0ZShhKX1BamF4LlJlc3BvbmRlcnMuZGlzcGF0Y2goIm9uQ3JlYXRlIix0aGlzLGEpO3RoaXMudHJhbnNwb3J0Lm9wZW4odGhpcy5tZXRob2QudG9VcHBlckNhc2UoKSx0aGlzLnVybCx0aGlzLm9wdGlvbnMuYXN5bmNocm9ub3VzKTtpZih0aGlzLm9wdGlvbnMuYXN5bmNocm9ub3VzKXt0aGlzLnJlc3BvbmRUb1JlYWR5U3RhdGUuYmluZCh0aGlzKS5kZWZlcigxKX10aGlzLnRyYW5zcG9ydC5vbnJlYWR5c3RhdGVjaGFuZ2U9dGhpcy5vblN0YXRlQ2hhbmdlLmJpbmQodGhpcyk7dGhpcy5zZXRSZXF1ZXN0SGVhZGVycygpO3RoaXMuYm9keT10aGlzLm1ldGhvZD09InBvc3QiPyh0aGlzLm9wdGlvbnMucG9zdEJvZHl8fGQpOm51bGw7dGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmJvZHkpO2lmKCF0aGlzLm9wdGlvbnMuYXN5bmNocm9ub3VzJiZ0aGlzLnRyYW5zcG9ydC5vdmVycmlkZU1pbWVUeXBlKXt0aGlzLm9uU3RhdGVDaGFuZ2UoKX19Y2F0Y2goYyl7dGhpcy5kaXNwYXRjaEV4Y2VwdGlvbihjKX19LG9uU3RhdGVDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zcG9ydC5yZWFkeVN0YXRlO2lmKGE+MSYmISgoYT09NCkmJnRoaXMuX2NvbXBsZXRlKSl7dGhpcy5yZXNwb25kVG9SZWFkeVN0YXRlKHRoaXMudHJhbnNwb3J0LnJlYWR5U3RhdGUpfX0sc2V0UmVxdWVzdEhlYWRlcnM6ZnVuY3Rpb24oKXt2YXIgZT17IlgtUmVxdWVzdGVkLVdpdGgiOiJYTUxIdHRwUmVxdWVzdCIsIlgtUHJvdG90eXBlLVZlcnNpb24iOlByb3RvdHlwZS5WZXJzaW9uLEFjY2VwdDoidGV4dC9qYXZhc2NyaXB0LCB0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9O2lmKHRoaXMubWV0aG9kPT0icG9zdCIpe2VbIkNvbnRlbnQtdHlwZSJdPXRoaXMub3B0aW9ucy5jb250ZW50VHlwZSsodGhpcy5vcHRpb25zLmVuY29kaW5nPyI7IGNoYXJzZXQ9Iit0aGlzLm9wdGlvbnMuZW5jb2Rpbmc6IiIpO2lmKHRoaXMudHJhbnNwb3J0Lm92ZXJyaWRlTWltZVR5cGUmJihuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9HZWNrb1wvKFxkezR9KS8pfHxbMCwyMDA1XSlbMV08MjAwNSl7ZS5Db25uZWN0aW9uPSJjbG9zZSJ9fWlmKHR5cGVvZiB0aGlzLm9wdGlvbnMucmVxdWVzdEhlYWRlcnM9PSJvYmplY3QiKXt2YXIgYz10aGlzLm9wdGlvbnMucmVxdWVzdEhlYWRlcnM7aWYoT2JqZWN0LmlzRnVuY3Rpb24oYy5wdXNoKSl7Zm9yKHZhciBiPTAsZD1jLmxlbmd0aDtiPGQ7Yis9Mil7ZVtjW2JdXT1jW2IrMV19fWVsc2V7JEgoYykuZWFjaChmdW5jdGlvbihmKXtlW2Yua2V5XT1mLnZhbHVlfSl9fWZvcih2YXIgYSBpbiBlKXtpZihlW2FdIT1udWxsKXt0aGlzLnRyYW5zcG9ydC5zZXRSZXF1ZXN0SGVhZGVyKGEsZVthXSl9fX0sc3VjY2VzczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0U3RhdHVzKCk7cmV0dXJuICFhfHwoYT49MjAwJiZhPDMwMCl8fGE9PTMwNH0sZ2V0U3RhdHVzOmZ1bmN0aW9uKCl7dHJ5e2lmKHRoaXMudHJhbnNwb3J0LnN0YXR1cz09PTEyMjMpe3JldHVybiAyMDR9cmV0dXJuIHRoaXMudHJhbnNwb3J0LnN0YXR1c3x8MH1jYXRjaChhKXtyZXR1cm4gMH19LHJlc3BvbmRUb1JlYWR5U3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGM9QWpheC5SZXF1ZXN0LkV2ZW50c1thXSxiPW5ldyBBamF4LlJlc3BvbnNlKHRoaXMpO2lmKGM9PSJDb21wbGV0ZSIpe3RyeXt0aGlzLl9jb21wbGV0ZT10cnVlOyh0aGlzLm9wdGlvbnNbIm9uIitiLnN0YXR1c118fHRoaXMub3B0aW9uc1sib24iKyh0aGlzLnN1Y2Nlc3MoKT8iU3VjY2VzcyI6IkZhaWx1cmUiKV18fFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uKShiLGIuaGVhZGVySlNPTil9Y2F0Y2goZCl7dGhpcy5kaXNwYXRjaEV4Y2VwdGlvbihkKX12YXIgZj1iLmdldEhlYWRlcigiQ29udGVudC10eXBlIik7aWYodGhpcy5vcHRpb25zLmV2YWxKUz09ImZvcmNlInx8KHRoaXMub3B0aW9ucy5ldmFsSlMmJnRoaXMuaXNTYW1lT3JpZ2luKCkmJmYmJmYubWF0Y2goL15ccyoodGV4dHxhcHBsaWNhdGlvbilcLyh4LSk/KGphdmF8ZWNtYSlzY3JpcHQoOy4qKT9ccyokL2kpKSl7dGhpcy5ldmFsUmVzcG9uc2UoKX19dHJ5eyh0aGlzLm9wdGlvbnNbIm9uIitjXXx8UHJvdG90eXBlLmVtcHR5RnVuY3Rpb24pKGIsYi5oZWFkZXJKU09OKTtBamF4LlJlc3BvbmRlcnMuZGlzcGF0Y2goIm9uIitjLHRoaXMsYixiLmhlYWRlckpTT04pfWNhdGNoKGQpe3RoaXMuZGlzcGF0Y2hFeGNlcHRpb24oZCl9aWYoYz09IkNvbXBsZXRlIil7dGhpcy50cmFuc3BvcnQub25yZWFkeXN0YXRlY2hhbmdlPVByb3RvdHlwZS5lbXB0eUZ1bmN0aW9ufX0saXNTYW1lT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy51cmwubWF0Y2goL15ccypodHRwcz86XC9cL1teXC9dKi8pO3JldHVybiAhYXx8KGFbMF09PSIje3Byb3RvY29sfS8vI3tkb21haW59I3twb3J0fSIuaW50ZXJwb2xhdGUoe3Byb3RvY29sOmxvY2F0aW9uLnByb3RvY29sLGRvbWFpbjpkb2N1bWVudC5kb21haW4scG9ydDpsb2NhdGlvbi5wb3J0PyI6Iitsb2NhdGlvbi5wb3J0OiIifSkpfSxnZXRIZWFkZXI6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiB0aGlzLnRyYW5zcG9ydC5nZXRSZXNwb25zZUhlYWRlcihhKXx8bnVsbH1jYXRjaChiKXtyZXR1cm4gbnVsbH19LGV2YWxSZXNwb25zZTpmdW5jdGlvbigpe3RyeXtyZXR1cm4gZXZhbCgodGhpcy50cmFuc3BvcnQucmVzcG9uc2VUZXh0fHwiIikudW5maWx0ZXJKU09OKCkpfWNhdGNoKGUpe3RoaXMuZGlzcGF0Y2hFeGNlcHRpb24oZSl9fSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbihhKXsodGhpcy5vcHRpb25zLm9uRXhjZXB0aW9ufHxQcm90b3R5cGUuZW1wdHlGdW5jdGlvbikodGhpcyxhKTtBamF4LlJlc3BvbmRlcnMuZGlzcGF0Y2goIm9uRXhjZXB0aW9uIix0aGlzLGEpfX0pO0FqYXguUmVxdWVzdC5FdmVudHM9WyJVbmluaXRpYWxpemVkIiwiTG9hZGluZyIsIkxvYWRlZCIsIkludGVyYWN0aXZlIiwiQ29tcGxldGUiXTtBamF4LlJlc3BvbnNlPUNsYXNzLmNyZWF0ZSh7aW5pdGlhbGl6ZTpmdW5jdGlvbihjKXt0aGlzLnJlcXVlc3Q9Yzt2YXIgZD10aGlzLnRyYW5zcG9ydD1jLnRyYW5zcG9ydCxhPXRoaXMucmVhZHlTdGF0ZT1kLnJlYWR5U3RhdGU7aWYoKGE+MiYmIVByb3RvdHlwZS5Ccm93c2VyLklFKXx8YT09NCl7dGhpcy5zdGF0dXM9dGhpcy5nZXRTdGF0dXMoKTt0aGlzLnN0YXR1c1RleHQ9dGhpcy5nZXRTdGF0dXNUZXh0KCk7dGhpcy5yZXNwb25zZVRleHQ9U3RyaW5nLmludGVycHJldChkLnJlc3BvbnNlVGV4dCk7dGhpcy5oZWFkZXJKU09OPXRoaXMuX2dldEhlYWRlckpTT04oKX1pZihhPT00KXt2YXIgYj1kLnJlc3BvbnNlWE1MO3RoaXMucmVzcG9uc2VYTUw9T2JqZWN0LmlzVW5kZWZpbmVkKGIpP251bGw6Yjt0aGlzLnJlc3BvbnNlSlNPTj10aGlzLl9nZXRSZXNwb25zZUpTT04oKX19LHN0YXR1czowLHN0YXR1c1RleHQ6IiIsZ2V0U3RhdHVzOkFqYXguUmVxdWVzdC5wcm90b3R5cGUuZ2V0U3RhdHVzLGdldFN0YXR1c1RleHQ6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LnN0YXR1c1RleHR8fCIifWNhdGNoKGEpe3JldHVybiIifX0sZ2V0SGVhZGVyOkFqYXguUmVxdWVzdC5wcm90b3R5cGUuZ2V0SGVhZGVyLGdldEFsbEhlYWRlcnM6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl9Y2F0Y2goYSl7cmV0dXJuIG51bGx9fSxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuZ2V0UmVzcG9uc2VIZWFkZXIoYSl9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zcG9ydC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKX0sX2dldEhlYWRlckpTT046ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEhlYWRlcigiWC1KU09OIik7aWYoIWEpe3JldHVybiBudWxsfXRyeXthPWRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoYSkpfWNhdGNoKGIpe310cnl7cmV0dXJuIGEuZXZhbEpTT04odGhpcy5yZXF1ZXN0Lm9wdGlvbnMuc2FuaXRpemVKU09OfHwhdGhpcy5yZXF1ZXN0LmlzU2FtZU9yaWdpbigpKX1jYXRjaChiKXt0aGlzLnJlcXVlc3QuZGlzcGF0Y2hFeGNlcHRpb24oYil9fSxfZ2V0UmVzcG9uc2VKU09OOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXF1ZXN0Lm9wdGlvbnM7aWYoIWEuZXZhbEpTT058fChhLmV2YWxKU09OIT0iZm9yY2UiJiYhKHRoaXMuZ2V0SGVhZGVyKCJDb250ZW50LXR5cGUiKXx8IiIpLmluY2x1ZGUoImFwcGxpY2F0aW9uL2pzb24iKSl8fHRoaXMucmVzcG9uc2VUZXh0LmJsYW5rKCkpe3JldHVybiBudWxsfXRyeXtyZXR1cm4gdGhpcy5yZXNwb25zZVRleHQuZXZhbEpTT04oYS5zYW5pdGl6ZUpTT058fCF0aGlzLnJlcXVlc3QuaXNTYW1lT3JpZ2luKCkpfWNhdGNoKGIpe3RoaXMucmVxdWVzdC5kaXNwYXRjaEV4Y2VwdGlvbihiKX19fSk7QWpheC5VcGRhdGVyPUNsYXNzLmNyZWF0ZShBamF4LlJlcXVlc3Qse2luaXRpYWxpemU6ZnVuY3Rpb24oJHN1cGVyLGEsYyxiKXt0aGlzLmNvbnRhaW5lcj17c3VjY2VzczooYS5zdWNjZXNzfHxhKSxmYWlsdXJlOihhLmZhaWx1cmV8fChhLnN1Y2Nlc3M/bnVsbDphKSl9O2I9T2JqZWN0LmNsb25lKGIpO3ZhciBkPWIub25Db21wbGV0ZTtiLm9uQ29tcGxldGU9KGZ1bmN0aW9uKGUsZil7dGhpcy51cGRhdGVDb250ZW50KGUucmVzcG9uc2VUZXh0KTtpZihPYmplY3QuaXNGdW5jdGlvbihkKSl7ZChlLGYpfX0pLmJpbmQodGhpcyk7JHN1cGVyKGMsYil9LHVwZGF0ZUNvbnRlbnQ6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcy5jb250YWluZXJbdGhpcy5zdWNjZXNzKCk/InN1Y2Nlc3MiOiJmYWlsdXJlIl0sYT10aGlzLm9wdGlvbnM7aWYoIWEuZXZhbFNjcmlwdHMpe2Q9ZC5zdHJpcFNjcmlwdHMoKX1pZihjPSQoYykpe2lmKGEuaW5zZXJ0aW9uKXtpZihPYmplY3QuaXNTdHJpbmcoYS5pbnNlcnRpb24pKXt2YXIgYj17fTtiW2EuaW5zZXJ0aW9uXT1kO2MuaW5zZXJ0KGIpfWVsc2V7YS5pbnNlcnRpb24oYyxkKX19ZWxzZXtjLnVwZGF0ZShkKX19fX0pO0FqYXguUGVyaW9kaWNhbFVwZGF0ZXI9Q2xhc3MuY3JlYXRlKEFqYXguQmFzZSx7aW5pdGlhbGl6ZTpmdW5jdGlvbigkc3VwZXIsYSxjLGIpeyRzdXBlcihiKTt0aGlzLm9uQ29tcGxldGU9dGhpcy5vcHRpb25zLm9uQ29tcGxldGU7dGhpcy5mcmVxdWVuY3k9KHRoaXMub3B0aW9ucy5mcmVxdWVuY3l8fDIpO3RoaXMuZGVjYXk9KHRoaXMub3B0aW9ucy5kZWNheXx8MSk7dGhpcy51cGRhdGVyPXt9O3RoaXMuY29udGFpbmVyPWE7dGhpcy51cmw9Yzt0aGlzLnN0YXJ0KCl9LHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9uQ29tcGxldGU9dGhpcy51cGRhdGVDb21wbGV0ZS5iaW5kKHRoaXMpO3RoaXMub25UaW1lckV2ZW50KCl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZXIub3B0aW9ucy5vbkNvbXBsZXRlPXVuZGVmaW5lZDtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7KHRoaXMub25Db21wbGV0ZXx8UHJvdG90eXBlLmVtcHR5RnVuY3Rpb24pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdXBkYXRlQ29tcGxldGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5vcHRpb25zLmRlY2F5KXt0aGlzLmRlY2F5PShhLnJlc3BvbnNlVGV4dD09dGhpcy5sYXN0VGV4dD90aGlzLmRlY2F5KnRoaXMub3B0aW9ucy5kZWNheToxKTt0aGlzLmxhc3RUZXh0PWEucmVzcG9uc2VUZXh0fXRoaXMudGltZXI9dGhpcy5vblRpbWVyRXZlbnQuYmluZCh0aGlzKS5kZWxheSh0aGlzLmRlY2F5KnRoaXMuZnJlcXVlbmN5KX0sb25UaW1lckV2ZW50OmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVyPW5ldyBBamF4LlVwZGF0ZXIodGhpcy5jb250YWluZXIsdGhpcy51cmwsdGhpcy5vcHRpb25zKX19KTsoZnVuY3Rpb24oYTgpe3ZhciBhRTt2YXIgYTE9QXJyYXkucHJvdG90eXBlLnNsaWNlO3ZhciBhdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtmdW5jdGlvbiBhWihicCl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IodmFyIEY9MCxicj1bXSxicT1hcmd1bWVudHMubGVuZ3RoO0Y8YnE7RisrKXtici5wdXNoKGFaKGFyZ3VtZW50c1tGXSkpfXJldHVybiBicn1pZihPYmplY3QuaXNTdHJpbmcoYnApKXticD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChicCl9cmV0dXJuIGFGLmV4dGVuZChicCl9YTguJD1hWjtpZighYTguTm9kZSl7YTguTm9kZT17fX1pZighYTguTm9kZS5FTEVNRU5UX05PREUpe09iamVjdC5leHRlbmQoYTguTm9kZSx7RUxFTUVOVF9OT0RFOjEsQVRUUklCVVRFX05PREU6MixURVhUX05PREU6MyxDREFUQV9TRUNUSU9OX05PREU6NCxFTlRJVFlfUkVGRVJFTkNFX05PREU6NSxFTlRJVFlfTk9ERTo2LFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERTo3LENPTU1FTlRfTk9ERTo4LERPQ1VNRU5UX05PREU6OSxET0NVTUVOVF9UWVBFX05PREU6MTAsRE9DVU1FTlRfRlJBR01FTlRfTk9ERToxMSxOT1RBVElPTl9OT0RFOjEyfSl9dmFyIHI9e307ZnVuY3Rpb24gYVEoRixpKXtpZihGPT09InNlbGVjdCIpe3JldHVybiBmYWxzZX1pZigidHlwZSIgaW4gaSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfXZhciBkPShmdW5jdGlvbigpe3RyeXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCc8aW5wdXQgbmFtZT0ieCI+Jyk7cmV0dXJuIGkudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmaS5uYW1lPT09IngifWNhdGNoKEYpe3JldHVybiBmYWxzZX19KSgpO3ZhciBhST1hOC5FbGVtZW50O2Z1bmN0aW9uIGFGKEYsaSl7aT1pfHx7fTtGPUYudG9Mb3dlckNhc2UoKTtpZihkJiZpLm5hbWUpe0Y9IjwiK0YrJyBuYW1lPSInK2kubmFtZSsnIj4nO2RlbGV0ZSBpLm5hbWU7cmV0dXJuIGFGLndyaXRlQXR0cmlidXRlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoRiksaSl9aWYoIXJbRl0pe3JbRl09YUYuZXh0ZW5kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoRikpfXZhciBicD1hUShGLGkpP3JbRl0uY2xvbmVOb2RlKGZhbHNlKTpkb2N1bWVudC5jcmVhdGVFbGVtZW50KEYpO3JldHVybiBhRi53cml0ZUF0dHJpYnV0ZShicCxpKX1hOC5FbGVtZW50PWFGO09iamVjdC5leHRlbmQoYTguRWxlbWVudCxhSXx8e30pO2lmKGFJKXthOC5FbGVtZW50LnByb3RvdHlwZT1hSS5wcm90b3R5cGV9YUYuTWV0aG9kcz17QnlUYWc6e30sU2ltdWxhdGVkOnt9fTt2YXIgYTM9e307dmFyIEg9e2lkOiJpZCIsY2xhc3NOYW1lOiJjbGFzcyJ9O2Z1bmN0aW9uIGJhKEYpe0Y9YVooRik7dmFyIGk9IjwiK0YudGFnTmFtZS50b0xvd2VyQ2FzZSgpO3ZhciBicCxicjtmb3IodmFyIGJxIGluIEgpe2JwPUhbYnFdO2JyPShGW2JxXXx8IiIpLnRvU3RyaW5nKCk7aWYoYnIpe2krPSIgIiticCsiPSIrYnIuaW5zcGVjdCh0cnVlKX19cmV0dXJuIGkrIj4ifWEzLmluc3BlY3Q9YmE7ZnVuY3Rpb24gdihpKXtyZXR1cm4gYVooaSkuZ2V0U3R5bGUoImRpc3BsYXkiKSE9PSJub25lIn1mdW5jdGlvbiBheChGLGkpe0Y9YVooRik7aWYodHlwZW9mIGkhPT0iYm9vbGVhbiIpe2k9IWFGLnZpc2libGUoRil9YUZbaT8ic2hvdyI6ImhpZGUiXShGKTtyZXR1cm4gRn1mdW5jdGlvbiBhSChpKXtpPWFaKGkpO2kuc3R5bGUuZGlzcGxheT0ibm9uZSI7cmV0dXJuIGl9ZnVuY3Rpb24gaihpKXtpPWFaKGkpO2kuc3R5bGUuZGlzcGxheT0iIjtyZXR1cm4gaX1PYmplY3QuZXh0ZW5kKGEzLHt2aXNpYmxlOnYsdG9nZ2xlOmF4LGhpZGU6YUgsc2hvdzpqfSk7ZnVuY3Rpb24gYWQoaSl7aT1hWihpKTtpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSk7cmV0dXJuIGl9dmFyIGFUPShmdW5jdGlvbigpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLEY9dHJ1ZTtpLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0idGVzdCI+dGVzdDwvb3B0aW9uPic7aWYoaS5vcHRpb25zJiZpLm9wdGlvbnNbMF0pe0Y9aS5vcHRpb25zWzBdLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkhPT0iT1BUSU9OIn1pPW51bGw7cmV0dXJuIEZ9KSgpO3ZhciBJPShmdW5jdGlvbigpe3RyeXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpO2lmKGkmJmkudEJvZGllcyl7aS5pbm5lckhUTUw9Ijx0Ym9keT48dHI+PHRkPnRlc3Q8L3RkPjwvdHI+PC90Ym9keT4iO3ZhciBicD10eXBlb2YgaS50Qm9kaWVzWzBdPT0idW5kZWZpbmVkIjtpPW51bGw7cmV0dXJuIGJwfX1jYXRjaChGKXtyZXR1cm4gdHJ1ZX19KSgpO3ZhciBhMj0oZnVuY3Rpb24oKXt0cnl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aS5pbm5lckhUTUw9IjxsaW5rIC8+Ijt2YXIgYnA9KGkuY2hpbGROb2Rlcy5sZW5ndGg9PT0wKTtpPW51bGw7cmV0dXJuIGJwfWNhdGNoKEYpe3JldHVybiB0cnVlfX0pKCk7dmFyIHg9YVR8fEl8fGEyO3ZhciBhcT0oZnVuY3Rpb24oKXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxicD1mYWxzZTt0cnl7aS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpO2JwPSFpLmZpcnN0Q2hpbGR8fGkuZmlyc3RDaGlsZCYmaS5maXJzdENoaWxkLm5vZGVUeXBlIT09M31jYXRjaChGKXticD10cnVlfWk9bnVsbDtyZXR1cm4gYnB9KSgpO2Z1bmN0aW9uIE8oYnIsYnQpe2JyPWFaKGJyKTt2YXIgYnU9YnIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSxicT1idS5sZW5ndGg7d2hpbGUoYnEtLSl7WihidVticV0pfWlmKGJ0JiZidC50b0VsZW1lbnQpe2J0PWJ0LnRvRWxlbWVudCgpfWlmKE9iamVjdC5pc0VsZW1lbnQoYnQpKXtyZXR1cm4gYnIudXBkYXRlKCkuaW5zZXJ0KGJ0KX1idD1PYmplY3QudG9IVE1MKGJ0KTt2YXIgYnA9YnIudGFnTmFtZS50b1VwcGVyQ2FzZSgpO2lmKGJwPT09IlNDUklQVCImJmFxKXtici50ZXh0PWJ0O3JldHVybiBicn1pZih4KXtpZihicCBpbiBMLnRhZ3Mpe3doaWxlKGJyLmZpcnN0Q2hpbGQpe2JyLnJlbW92ZUNoaWxkKGJyLmZpcnN0Q2hpbGQpfXZhciBGPXQoYnAsYnQuc3RyaXBTY3JpcHRzKCkpO2Zvcih2YXIgYnE9MCxiczticz1GW2JxXTticSsrKXtici5hcHBlbmRDaGlsZChicyl9fWVsc2V7aWYoYTImJk9iamVjdC5pc1N0cmluZyhidCkmJmJ0LmluZGV4T2YoIjxsaW5rIik+LTEpe3doaWxlKGJyLmZpcnN0Q2hpbGQpe2JyLnJlbW92ZUNoaWxkKGJyLmZpcnN0Q2hpbGQpfXZhciBGPXQoYnAsYnQuc3RyaXBTY3JpcHRzKCksdHJ1ZSk7Zm9yKHZhciBicT0wLGJzO2JzPUZbYnFdO2JxKyspe2JyLmFwcGVuZENoaWxkKGJzKX19ZWxzZXtici5pbm5lckhUTUw9YnQuc3RyaXBTY3JpcHRzKCl9fX1lbHNle2JyLmlubmVySFRNTD1idC5zdHJpcFNjcmlwdHMoKX1idC5ldmFsU2NyaXB0cy5iaW5kKGJ0KS5kZWZlcigpO3JldHVybiBicn1mdW5jdGlvbiBhaChGLGJwKXtGPWFaKEYpO2lmKGJwJiZicC50b0VsZW1lbnQpe2JwPWJwLnRvRWxlbWVudCgpfWVsc2V7aWYoIU9iamVjdC5pc0VsZW1lbnQoYnApKXticD1PYmplY3QudG9IVE1MKGJwKTt2YXIgaT1GLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtpLnNlbGVjdE5vZGUoRik7YnAuZXZhbFNjcmlwdHMuYmluZChicCkuZGVmZXIoKTticD1pLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChicC5zdHJpcFNjcmlwdHMoKSl9fUYucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYnAsRik7cmV0dXJuIEZ9dmFyIEw9e2JlZm9yZTpmdW5jdGlvbihpLEYpe2kucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRixpKX0sdG9wOmZ1bmN0aW9uKGksRil7aS5pbnNlcnRCZWZvcmUoRixpLmZpcnN0Q2hpbGQpfSxib3R0b206ZnVuY3Rpb24oaSxGKXtpLmFwcGVuZENoaWxkKEYpfSxhZnRlcjpmdW5jdGlvbihpLEYpe2kucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRixpLm5leHRTaWJsaW5nKX0sdGFnczp7VEFCTEU6WyI8dGFibGU+IiwiPC90YWJsZT4iLDFdLFRCT0RZOlsiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+IiwyXSxUUjpbIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiIsM10sVEQ6WyI8dGFibGU+PHRib2R5Pjx0cj48dGQ+IiwiPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4iLDRdLFNFTEVDVDpbIjxzZWxlY3Q+IiwiPC9zZWxlY3Q+IiwxXX19O3ZhciBhSj1MLnRhZ3M7T2JqZWN0LmV4dGVuZChhSix7VEhFQUQ6YUouVEJPRFksVEZPT1Q6YUouVEJPRFksVEg6YUouVER9KTtmdW5jdGlvbiBhbyhicCxicyl7YnA9YVooYnApO2lmKGJzJiZicy50b0VsZW1lbnQpe2JzPWJzLnRvRWxlbWVudCgpfWlmKE9iamVjdC5pc0VsZW1lbnQoYnMpKXticC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChicyxicCk7cmV0dXJuIGJwfWJzPU9iamVjdC50b0hUTUwoYnMpO3ZhciBicj1icC5wYXJlbnROb2RlLEY9YnIudGFnTmFtZS50b1VwcGVyQ2FzZSgpO2lmKEYgaW4gTC50YWdzKXt2YXIgYnQ9YUYubmV4dChicCk7dmFyIGk9dChGLGJzLnN0cmlwU2NyaXB0cygpKTtici5yZW1vdmVDaGlsZChicCk7dmFyIGJxO2lmKGJ0KXticT1mdW5jdGlvbihidSl7YnIuaW5zZXJ0QmVmb3JlKGJ1LGJ0KX19ZWxzZXticT1mdW5jdGlvbihidSl7YnIuYXBwZW5kQ2hpbGQoYnUpfX1pLmVhY2goYnEpfWVsc2V7YnAub3V0ZXJIVE1MPWJzLnN0cmlwU2NyaXB0cygpfWJzLmV2YWxTY3JpcHRzLmJpbmQoYnMpLmRlZmVyKCk7cmV0dXJuIGJwfWlmKCJvdXRlckhUTUwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7YWg9YW99ZnVuY3Rpb24gYTcoaSl7aWYoT2JqZWN0LmlzVW5kZWZpbmVkKGkpfHxpPT09bnVsbCl7cmV0dXJuIGZhbHNlfWlmKE9iamVjdC5pc1N0cmluZyhpKXx8T2JqZWN0LmlzTnVtYmVyKGkpKXtyZXR1cm4gdHJ1ZX1pZihPYmplY3QuaXNFbGVtZW50KGkpKXtyZXR1cm4gdHJ1ZX1pZihpLnRvRWxlbWVudHx8aS50b0hUTUwpe3JldHVybiB0cnVlfXJldHVybiBmYWxzZX1mdW5jdGlvbiBibihicixidCxGKXtGPUYudG9Mb3dlckNhc2UoKTt2YXIgYnY9TFtGXTtpZihidCYmYnQudG9FbGVtZW50KXtidD1idC50b0VsZW1lbnQoKX1pZihPYmplY3QuaXNFbGVtZW50KGJ0KSl7YnYoYnIsYnQpO3JldHVybiBicn1idD1PYmplY3QudG9IVE1MKGJ0KTt2YXIgYnE9KChGPT09ImJlZm9yZSJ8fEY9PT0iYWZ0ZXIiKT9ici5wYXJlbnROb2RlOmJyKS50YWdOYW1lLnRvVXBwZXJDYXNlKCk7dmFyIGJ1PXQoYnEsYnQuc3RyaXBTY3JpcHRzKCkpO2lmKEY9PT0idG9wInx8Rj09PSJhZnRlciIpe2J1LnJldmVyc2UoKX1mb3IodmFyIGJwPTAsYnM7YnM9YnVbYnBdO2JwKyspe2J2KGJyLGJzKX1idC5ldmFsU2NyaXB0cy5iaW5kKGJ0KS5kZWZlcigpfWZ1bmN0aW9uIFEoRixicCl7Rj1hWihGKTtpZihhNyhicCkpe2JwPXtib3R0b206YnB9fWZvcih2YXIgaSBpbiBicCl7Ym4oRixicFtpXSxpKX1yZXR1cm4gRn1mdW5jdGlvbiB1KEYsYnAsaSl7Rj1hWihGKTtpZihPYmplY3QuaXNFbGVtZW50KGJwKSl7YVooYnApLndyaXRlQXR0cmlidXRlKGl8fHt9KX1lbHNle2lmKE9iamVjdC5pc1N0cmluZyhicCkpe2JwPW5ldyBhRihicCxpKX1lbHNle2JwPW5ldyBhRigiZGl2IixicCl9fWlmKEYucGFyZW50Tm9kZSl7Ri5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChicCxGKX1icC5hcHBlbmRDaGlsZChGKTtyZXR1cm4gYnB9ZnVuY3Rpb24gdyhGKXtGPWFaKEYpO3ZhciBicD1GLmZpcnN0Q2hpbGQ7d2hpbGUoYnApe3ZhciBpPWJwLm5leHRTaWJsaW5nO2lmKGJwLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUmJiEvXFMvLnRlc3QoYnAubm9kZVZhbHVlKSl7Ri5yZW1vdmVDaGlsZChicCl9YnA9aX1yZXR1cm4gRn1mdW5jdGlvbiBhNChpKXtyZXR1cm4gYVooaSkuaW5uZXJIVE1MLmJsYW5rKCl9ZnVuY3Rpb24gdChicyxicixidCl7dmFyIGJxPUwudGFnc1tic10sYnU9YXY7dmFyIEY9ISFicTtpZighRiYmYnQpe0Y9dHJ1ZTticT1bIiIsIiIsMF19aWYoRil7YnUuaW5uZXJIVE1MPSImIzE2MDsiK2JxWzBdK2JyK2JxWzFdO2J1LnJlbW92ZUNoaWxkKGJ1LmZpcnN0Q2hpbGQpO2Zvcih2YXIgYnA9YnFbMl07YnAtLTspe2J1PWJ1LmZpcnN0Q2hpbGR9fWVsc2V7YnUuaW5uZXJIVE1MPWJyfXJldHVybiAkQShidS5jaGlsZE5vZGVzKX1mdW5jdGlvbiBFKGJxLEYpe2lmKCEoYnE9YVooYnEpKSl7cmV0dXJufXZhciBicz1icS5jbG9uZU5vZGUoRik7aWYoIWFZKXticy5fcHJvdG90eXBlVUlEPWFFO2lmKEYpe3ZhciBicj1hRi5zZWxlY3QoYnMsIioiKSxicD1ici5sZW5ndGg7d2hpbGUoYnAtLSl7YnJbYnBdLl9wcm90b3R5cGVVSUQ9YUV9fX1yZXR1cm4gYUYuZXh0ZW5kKGJzKX1mdW5jdGlvbiBaKEYpe3ZhciBpPU0oRik7aWYoaSl7YUYuc3RvcE9ic2VydmluZyhGKTtpZighYVkpe0YuX3Byb3RvdHlwZVVJRD1hRX1kZWxldGUgYUYuU3RvcmFnZVtpXX19ZnVuY3Rpb24gYmwoYnApe3ZhciBGPWJwLmxlbmd0aDt3aGlsZShGLS0pe1ooYnBbRl0pfX1mdW5jdGlvbiBhdChicil7dmFyIGJxPWJyLmxlbmd0aCxicCxGO3doaWxlKGJxLS0pe2JwPWJyW2JxXTtGPU0oYnApO2RlbGV0ZSBhRi5TdG9yYWdlW0ZdO2RlbGV0ZSBFdmVudC5jYWNoZVtGXX19aWYoYVkpe2JsPWF0fWZ1bmN0aW9uIG0oYnApe2lmKCEoYnA9YVooYnApKSl7cmV0dXJufVooYnApO3ZhciBicT1icC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLEY9YnEubGVuZ3RoO3doaWxlKEYtLSl7WihicVtGXSl9cmV0dXJuIG51bGx9T2JqZWN0LmV4dGVuZChhMyx7cmVtb3ZlOmFkLHVwZGF0ZTpPLHJlcGxhY2U6YWgsaW5zZXJ0OlEsd3JhcDp1LGNsZWFuV2hpdGVzcGFjZTp3LGVtcHR5OmE0LGNsb25lOkUscHVyZ2U6bX0pO2Z1bmN0aW9uIGFtKGksYnAsYnEpe2k9YVooaSk7YnE9YnF8fC0xO3ZhciBGPVtdO3doaWxlKGk9aVticF0pe2lmKGkubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7Ri5wdXNoKGFGLmV4dGVuZChpKSl9aWYoRi5sZW5ndGg9PT1icSl7YnJlYWt9fXJldHVybiBGfWZ1bmN0aW9uIGFMKGkpe3JldHVybiBhbShpLCJwYXJlbnROb2RlIil9ZnVuY3Rpb24gYm0oaSl7cmV0dXJuIGFGLnNlbGVjdChpLCIqIil9ZnVuY3Rpb24gWChpKXtpPWFaKGkpLmZpcnN0Q2hpbGQ7d2hpbGUoaSYmaS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFKXtpPWkubmV4dFNpYmxpbmd9cmV0dXJuIGFaKGkpfWZ1bmN0aW9uIGJpKEYpe3ZhciBpPVtdLGJwPWFaKEYpLmZpcnN0Q2hpbGQ7d2hpbGUoYnApe2lmKGJwLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe2kucHVzaChhRi5leHRlbmQoYnApKX1icD1icC5uZXh0U2libGluZ31yZXR1cm4gaX1mdW5jdGlvbiBwKGkpe3JldHVybiBhbShpLCJwcmV2aW91c1NpYmxpbmciKX1mdW5jdGlvbiBiaChpKXtyZXR1cm4gYW0oaSwibmV4dFNpYmxpbmciKX1mdW5jdGlvbiBhVihpKXtpPWFaKGkpO3ZhciBicD1wKGkpLEY9YmgoaSk7cmV0dXJuIGJwLnJldmVyc2UoKS5jb25jYXQoRil9ZnVuY3Rpb24gYVIoRixpKXtGPWFaKEYpO2lmKE9iamVjdC5pc1N0cmluZyhpKSl7cmV0dXJuIFByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaChGLGkpfXJldHVybiBpLm1hdGNoKEYpfWZ1bmN0aW9uIGFXKEYsYnAsYnEsaSl7Rj1hWihGKSxicT1icXx8MCxpPWl8fDA7aWYoT2JqZWN0LmlzTnVtYmVyKGJxKSl7aT1icSxicT1udWxsfXdoaWxlKEY9RlticF0pe2lmKEYubm9kZVR5cGUhPT0xKXtjb250aW51ZX1pZihicSYmIVByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaChGLGJxKSl7Y29udGludWV9aWYoLS1pPj0wKXtjb250aW51ZX1yZXR1cm4gYUYuZXh0ZW5kKEYpfX1mdW5jdGlvbiBhYShGLGJwLGkpe0Y9YVooRik7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3JldHVybiBhWihGLnBhcmVudE5vZGUpfXJldHVybiBhVyhGLCJwYXJlbnROb2RlIixicCxpKX1mdW5jdGlvbiB5KEYsYnEsaSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3JldHVybiBYKEYpfUY9YVooRiksYnE9YnF8fDAsaT1pfHwwO2lmKE9iamVjdC5pc051bWJlcihicSkpe2k9YnEsYnE9IioifXZhciBicD1Qcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0KGJxLEYpW2ldO3JldHVybiBhRi5leHRlbmQoYnApfWZ1bmN0aW9uIGgoRixicCxpKXtyZXR1cm4gYVcoRiwicHJldmlvdXNTaWJsaW5nIixicCxpKX1mdW5jdGlvbiBhQihGLGJwLGkpe3JldHVybiBhVyhGLCJuZXh0U2libGluZyIsYnAsaSl9ZnVuY3Rpb24gYmIoaSl7aT1hWihpKTt2YXIgRj1hMS5jYWxsKGFyZ3VtZW50cywxKS5qb2luKCIsICIpO3JldHVybiBQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0KEYsaSl9ZnVuY3Rpb24gYUQoYnEpe2JxPWFaKGJxKTt2YXIgYnM9YTEuY2FsbChhcmd1bWVudHMsMSkuam9pbigiLCAiKTt2YXIgYnQ9YUYuc2libGluZ3MoYnEpLGJwPVtdO2Zvcih2YXIgRj0wLGJyO2JyPWJ0W0ZdO0YrKyl7aWYoUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoKGJyLGJzKSl7YnAucHVzaChicil9fXJldHVybiBicH1mdW5jdGlvbiBEKEYsaSl7Rj1hWihGKSxpPWFaKGkpO2lmKCFGfHwhaSl7cmV0dXJuIGZhbHNlfXdoaWxlKEY9Ri5wYXJlbnROb2RlKXtpZihGPT09aSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX1mdW5jdGlvbiBCKEYsaSl7Rj1hWihGKSxpPWFaKGkpO2lmKCFGfHwhaSl7cmV0dXJuIGZhbHNlfWlmKCFpLmNvbnRhaW5zKXtyZXR1cm4gRChGLGkpfXJldHVybiBpLmNvbnRhaW5zKEYpJiZpIT09Rn1mdW5jdGlvbiBKKEYsaSl7Rj1hWihGKSxpPWFaKGkpO2lmKCFGfHwhaSl7cmV0dXJuIGZhbHNlfXJldHVybihGLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGkpJjgpPT09OH12YXIgYU07aWYoYXYuY29tcGFyZURvY3VtZW50UG9zaXRpb24pe2FNPUp9ZWxzZXtpZihhdi5jb250YWlucyl7YU09Qn1lbHNle2FNPUR9fU9iamVjdC5leHRlbmQoYTMse3JlY3Vyc2l2ZWx5Q29sbGVjdDphbSxhbmNlc3RvcnM6YUwsZGVzY2VuZGFudHM6Ym0sZmlyc3REZXNjZW5kYW50OlgsaW1tZWRpYXRlRGVzY2VuZGFudHM6YmkscHJldmlvdXNTaWJsaW5nczpwLG5leHRTaWJsaW5nczpiaCxzaWJsaW5nczphVixtYXRjaDphUix1cDphYSxkb3duOnkscHJldmlvdXM6aCxuZXh0OmFCLHNlbGVjdDpiYixhZGphY2VudDphRCxkZXNjZW5kYW50T2Y6YU0sZ2V0RWxlbWVudHNCeVNlbGVjdG9yOmJiLGNoaWxkRWxlbWVudHM6Yml9KTt2YXIgVD0xO2Z1bmN0aW9uIGFVKGkpe2k9YVooaSk7dmFyIEY9YUYucmVhZEF0dHJpYnV0ZShpLCJpZCIpO2lmKEYpe3JldHVybiBGfWRve0Y9ImFub255bW91c19lbGVtZW50XyIrVCsrfXdoaWxlKGFaKEYpKTthRi53cml0ZUF0dHJpYnV0ZShpLCJpZCIsRik7cmV0dXJuIEZ9ZnVuY3Rpb24gYTkoRixpKXtyZXR1cm4gYVooRikuZ2V0QXR0cmlidXRlKGkpfWZ1bmN0aW9uIEsoRixpKXtGPWFaKEYpO3ZhciBicD1hRy5yZWFkO2lmKGJwLnZhbHVlc1tpXSl7cmV0dXJuIGJwLnZhbHVlc1tpXShGLGkpfWlmKGJwLm5hbWVzW2ldKXtpPWJwLm5hbWVzW2ldfWlmKGkuaW5jbHVkZSgiOiIpKXtpZighRi5hdHRyaWJ1dGVzfHwhRi5hdHRyaWJ1dGVzW2ldKXtyZXR1cm4gbnVsbH1yZXR1cm4gRi5hdHRyaWJ1dGVzW2ldLnZhbHVlfXJldHVybiBGLmdldEF0dHJpYnV0ZShpKX1mdW5jdGlvbiBlKEYsaSl7aWYoaT09PSJ0aXRsZSIpe3JldHVybiBGLnRpdGxlfXJldHVybiBGLmdldEF0dHJpYnV0ZShpKX12YXIgVT0oZnVuY3Rpb24oKXthdi5zZXRBdHRyaWJ1dGUoIm9uY2xpY2siLFtdKTt2YXIgaT1hdi5nZXRBdHRyaWJ1dGUoIm9uY2xpY2siKTt2YXIgRj1PYmplY3QuaXNBcnJheShpKTthdi5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTtyZXR1cm4gRn0pKCk7aWYoVSl7YTk9S31lbHNle2lmKFByb3RvdHlwZS5Ccm93c2VyLk9wZXJhKXthOT1lfX1mdW5jdGlvbiBhMChicSxicCxicyl7YnE9YVooYnEpO3ZhciBGPXt9LGJyPWFHLndyaXRlO2lmKHR5cGVvZiBicD09PSJvYmplY3QiKXtGPWJwfWVsc2V7RlticF09T2JqZWN0LmlzVW5kZWZpbmVkKGJzKT90cnVlOmJzfWZvcih2YXIgaSBpbiBGKXticD1ici5uYW1lc1tpXXx8aTticz1GW2ldO2lmKGJyLnZhbHVlc1tpXSl7YnM9YnIudmFsdWVzW2ldKGJxLGJzKTtpZihPYmplY3QuaXNVbmRlZmluZWQoYnMpKXtjb250aW51ZX19aWYoYnM9PT1mYWxzZXx8YnM9PT1udWxsKXticS5yZW1vdmVBdHRyaWJ1dGUoYnApfWVsc2V7aWYoYnM9PT10cnVlKXticS5zZXRBdHRyaWJ1dGUoYnAsYnApfWVsc2V7YnEuc2V0QXR0cmlidXRlKGJwLGJzKX19fXJldHVybiBicX12YXIgYT0oZnVuY3Rpb24oKXtpZighZCl7cmV0dXJuIGZhbHNlfXZhciBGPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJzxpbnB1dCB0eXBlPSJjaGVja2JveCI+Jyk7Ri5jaGVja2VkPXRydWU7dmFyIGk9Ri5nZXRBdHRyaWJ1dGVOb2RlKCJjaGVja2VkIik7cmV0dXJuICFpfHwhaS5zcGVjaWZpZWR9KSgpO2Z1bmN0aW9uIFkoaSxicCl7YnA9YUcuaGFzW2JwXXx8YnA7dmFyIEY9YVooaSkuZ2V0QXR0cmlidXRlTm9kZShicCk7cmV0dXJuICEhKEYmJkYuc3BlY2lmaWVkKX1mdW5jdGlvbiBiZyhpLEYpe2lmKEY9PT0iY2hlY2tlZCIpe3JldHVybiBpLmNoZWNrZWR9cmV0dXJuIFkoaSxGKX1hOC5FbGVtZW50Lk1ldGhvZHMuU2ltdWxhdGVkLmhhc0F0dHJpYnV0ZT1hP2JnOlk7ZnVuY3Rpb24gayhpKXtyZXR1cm4gbmV3IGFGLkNsYXNzTmFtZXMoaSl9dmFyIFY9e307ZnVuY3Rpb24gZihGKXtpZihWW0ZdKXtyZXR1cm4gVltGXX12YXIgaT1uZXcgUmVnRXhwKCIoXnxcXHMrKSIrRisiKFxccyt8JCkiKTtWW0ZdPWk7cmV0dXJuIGl9ZnVuY3Rpb24gYWwoaSxGKXtpZighKGk9YVooaSkpKXtyZXR1cm59dmFyIGJwPWkuY2xhc3NOYW1lO2lmKGJwLmxlbmd0aD09PTApe3JldHVybiBmYWxzZX1pZihicD09PUYpe3JldHVybiB0cnVlfXJldHVybiBmKEYpLnRlc3QoYnApfWZ1bmN0aW9uIG8oaSxGKXtpZighKGk9YVooaSkpKXtyZXR1cm59aWYoIWFsKGksRikpe2kuY2xhc3NOYW1lKz0oaS5jbGFzc05hbWU/IiAiOiIiKStGfXJldHVybiBpfWZ1bmN0aW9uIGF1KGksRil7aWYoIShpPWFaKGkpKSl7cmV0dXJufWkuY2xhc3NOYW1lPWkuY2xhc3NOYW1lLnJlcGxhY2UoZihGKSwiICIpLnN0cmlwKCk7cmV0dXJuIGl9ZnVuY3Rpb24gYWUoRixicCxpKXtpZighKEY9YVooRikpKXtyZXR1cm59aWYoT2JqZWN0LmlzVW5kZWZpbmVkKGkpKXtpPSFhbChGLGJwKX12YXIgYnE9YUZbaT8iYWRkQ2xhc3NOYW1lIjoicmVtb3ZlQ2xhc3NOYW1lIl07cmV0dXJuIGJxKEYsYnApfXZhciBhRz17fTt2YXIgYVA9ImNsYXNzTmFtZSIsYXI9ImZvciI7YXYuc2V0QXR0cmlidXRlKGFQLCJ4Iik7aWYoYXYuY2xhc3NOYW1lIT09IngiKXthdi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwieCIpO2lmKGF2LmNsYXNzTmFtZT09PSJ4Iil7YVA9ImNsYXNzIn19dmFyIGFLPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7YUsuc2V0QXR0cmlidXRlKGFyLCJ4Iik7aWYoYUsuaHRtbEZvciE9PSJ4Iil7YUsuc2V0QXR0cmlidXRlKCJodG1sRm9yIiwieCIpO2lmKGFLLmh0bWxGb3I9PT0ieCIpe2FyPSJodG1sRm9yIn19YUs9bnVsbDtmdW5jdGlvbiBhYyhpLEYpe3JldHVybiBpLmdldEF0dHJpYnV0ZShGKX1mdW5jdGlvbiBnKGksRil7cmV0dXJuIGkuZ2V0QXR0cmlidXRlKEYsMil9ZnVuY3Rpb24gQShpLGJwKXt2YXIgRj1pLmdldEF0dHJpYnV0ZU5vZGUoYnApO3JldHVybiBGP0YudmFsdWU6IiJ9ZnVuY3Rpb24gYmooaSxGKXtyZXR1cm4gYVooaSkuaGFzQXR0cmlidXRlKEYpP0Y6bnVsbH1hdi5vbmNsaWNrPVByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uO3ZhciBQPWF2LmdldEF0dHJpYnV0ZSgib25jbGljayIpO3ZhciBhdztpZihTdHJpbmcoUCkuaW5kZXhPZigieyIpPi0xKXthdz1mdW5jdGlvbihpLEYpe3ZhciBicD1pLmdldEF0dHJpYnV0ZShGKTtpZighYnApe3JldHVybiBudWxsfWJwPWJwLnRvU3RyaW5nKCk7YnA9YnAuc3BsaXQoInsiKVsxXTticD1icC5zcGxpdCgifSIpWzBdO3JldHVybiBicC5zdHJpcCgpfX1lbHNle2lmKFA9PT0iIil7YXc9ZnVuY3Rpb24oaSxGKXt2YXIgYnA9aS5nZXRBdHRyaWJ1dGUoRik7aWYoIWJwKXtyZXR1cm4gbnVsbH1yZXR1cm4gYnAuc3RyaXAoKX19fWFHLnJlYWQ9e25hbWVzOnsiY2xhc3MiOmFQLGNsYXNzTmFtZTphUCwiZm9yIjphcixodG1sRm9yOmFyfSx2YWx1ZXM6e3N0eWxlOmZ1bmN0aW9uKGkpe3JldHVybiBpLnN0eWxlLmNzc1RleHQudG9Mb3dlckNhc2UoKX0sdGl0bGU6ZnVuY3Rpb24oaSl7cmV0dXJuIGkudGl0bGV9fX07YUcud3JpdGU9e25hbWVzOntjbGFzc05hbWU6ImNsYXNzIixodG1sRm9yOiJmb3IiLGNlbGxwYWRkaW5nOiJjZWxsUGFkZGluZyIsY2VsbHNwYWNpbmc6ImNlbGxTcGFjaW5nIn0sdmFsdWVzOntjaGVja2VkOmZ1bmN0aW9uKGksRil7Rj0hIUY7aS5jaGVja2VkPUY7cmV0dXJuIEY/ImNoZWNrZWQiOm51bGx9LHN0eWxlOmZ1bmN0aW9uKGksRil7aS5zdHlsZS5jc3NUZXh0PUY/RjoiIn19fTthRy5oYXM9e25hbWVzOnt9fTtPYmplY3QuZXh0ZW5kKGFHLndyaXRlLm5hbWVzLGFHLnJlYWQubmFtZXMpO3ZhciBhNj0kdygiY29sU3BhbiByb3dTcGFuIHZBbGlnbiBkYXRlVGltZSBhY2Nlc3NLZXkgdGFiSW5kZXggZW5jVHlwZSBtYXhMZW5ndGggcmVhZE9ubHkgbG9uZ0Rlc2MgZnJhbWVCb3JkZXIiKTtmb3IodmFyIGFmPTAsYWc7YWc9YTZbYWZdO2FmKyspe2FHLndyaXRlLm5hbWVzW2FnLnRvTG93ZXJDYXNlKCldPWFnO2FHLmhhcy5uYW1lc1thZy50b0xvd2VyQ2FzZSgpXT1hZ31PYmplY3QuZXh0ZW5kKGFHLnJlYWQudmFsdWVzLHtocmVmOmcsc3JjOmcsdHlwZTphYyxhY3Rpb246QSxkaXNhYmxlZDpiaixjaGVja2VkOmJqLHJlYWRvbmx5OmJqLG11bHRpcGxlOmJqLG9ubG9hZDphdyxvbnVubG9hZDphdyxvbmNsaWNrOmF3LG9uZGJsY2xpY2s6YXcsb25tb3VzZWRvd246YXcsb25tb3VzZXVwOmF3LG9ubW91c2VvdmVyOmF3LG9ubW91c2Vtb3ZlOmF3LG9ubW91c2VvdXQ6YXcsb25mb2N1czphdyxvbmJsdXI6YXcsb25rZXlwcmVzczphdyxvbmtleWRvd246YXcsb25rZXl1cDphdyxvbnN1Ym1pdDphdyxvbnJlc2V0OmF3LG9uc2VsZWN0OmF3LG9uY2hhbmdlOmF3fSk7T2JqZWN0LmV4dGVuZChhMyx7aWRlbnRpZnk6YVUscmVhZEF0dHJpYnV0ZTphOSx3cml0ZUF0dHJpYnV0ZTphMCxjbGFzc05hbWVzOmssaGFzQ2xhc3NOYW1lOmFsLGFkZENsYXNzTmFtZTpvLHJlbW92ZUNsYXNzTmFtZTphdSx0b2dnbGVDbGFzc05hbWU6YWV9KTtmdW5jdGlvbiBXKGkpe2lmKGk9PT0iZmxvYXQifHxpPT09InN0eWxlRmxvYXQiKXtyZXR1cm4iY3NzRmxvYXQifXJldHVybiBpLmNhbWVsaXplKCl9ZnVuY3Rpb24gYm8oaSl7aWYoaT09PSJmbG9hdCJ8fGk9PT0iY3NzRmxvYXQiKXtyZXR1cm4ic3R5bGVGbG9hdCJ9cmV0dXJuIGkuY2FtZWxpemUoKX1mdW5jdGlvbiBDKGJwLGJxKXticD1hWihicCk7dmFyIGJ0PWJwLnN0eWxlLEY7aWYoT2JqZWN0LmlzU3RyaW5nKGJxKSl7YnQuY3NzVGV4dCs9IjsiK2JxO2lmKGJxLmluY2x1ZGUoIm9wYWNpdHkiKSl7dmFyIGk9YnEubWF0Y2goL29wYWNpdHk6XHMqKFxkP1wuP1xkKikvKVsxXTthRi5zZXRPcGFjaXR5KGJwLGkpfXJldHVybiBicH1mb3IodmFyIGJzIGluIGJxKXtpZihicz09PSJvcGFjaXR5Iil7YUYuc2V0T3BhY2l0eShicCxicVtic10pfWVsc2V7dmFyIGJyPWJxW2JzXTtpZihicz09PSJmbG9hdCJ8fGJzPT09ImNzc0Zsb2F0Iil7YnM9T2JqZWN0LmlzVW5kZWZpbmVkKGJ0LnN0eWxlRmxvYXQpPyJjc3NGbG9hdCI6InN0eWxlRmxvYXQifWJ0W2JzXT1icn19cmV0dXJuIGJwfWZ1bmN0aW9uIGFPKEYsYnApe0Y9YVooRik7YnA9VyhicCk7dmFyIGJxPUYuc3R5bGVbYnBdO2lmKCFicXx8YnE9PT0iYXV0byIpe3ZhciBpPWRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoRixudWxsKTticT1pP2lbYnBdOm51bGx9aWYoYnA9PT0ib3BhY2l0eSIpe3JldHVybiBicT9wYXJzZUZsb2F0KGJxKToxfXJldHVybiBicT09PSJhdXRvIj9udWxsOmJxfWZ1bmN0aW9uIHMoaSxGKXtzd2l0Y2goRil7Y2FzZSJoZWlnaHQiOmNhc2Uid2lkdGgiOmlmKCFhRi52aXNpYmxlKGkpKXtyZXR1cm4gbnVsbH12YXIgYnA9cGFyc2VJbnQoYU8oaSxGKSwxMCk7aWYoYnAhPT1pWyJvZmZzZXQiK0YuY2FwaXRhbGl6ZSgpXSl7cmV0dXJuIGJwKyJweCJ9cmV0dXJuIGFGLm1lYXN1cmUoaSxGKTtkZWZhdWx0OnJldHVybiBhTyhpLEYpfX1mdW5jdGlvbiBhaihpLEYpe2k9YVooaSk7Rj1ibyhGKTt2YXIgYnA9aS5zdHlsZVtGXTtpZighYnAmJmkuY3VycmVudFN0eWxlKXticD1pLmN1cnJlbnRTdHlsZVtGXX1pZihGPT09Im9wYWNpdHkiKXtpZighTil7cmV0dXJuIGJlKGkpfWVsc2V7cmV0dXJuIGJwP3BhcnNlRmxvYXQoYnApOjF9fWlmKGJwPT09ImF1dG8iKXtpZigoRj09PSJ3aWR0aCJ8fEY9PT0iaGVpZ2h0IikmJmFGLnZpc2libGUoaSkpe3JldHVybiBhRi5tZWFzdXJlKGksRikrInB4In1yZXR1cm4gbnVsbH1yZXR1cm4gYnB9ZnVuY3Rpb24gYUEoaSl7cmV0dXJuKGl8fCIiKS5yZXBsYWNlKC9hbHBoYVwoW15cKV0qXCkvZ2ksIiIpfWZ1bmN0aW9uIGFiKGkpe2lmKCFpLmN1cnJlbnRTdHlsZXx8IWkuY3VycmVudFN0eWxlLmhhc0xheW91dCl7aS5zdHlsZS56b29tPTF9cmV0dXJuIGl9dmFyIE49KGZ1bmN0aW9uKCl7YXYuc3R5bGUuY3NzVGV4dD0ib3BhY2l0eTouNTUiO3JldHVybi9eMC41NS8udGVzdChhdi5zdHlsZS5vcGFjaXR5KX0pKCk7ZnVuY3Rpb24geihpLEYpe2k9YVooaSk7aWYoRj09MXx8Rj09PSIiKXtGPSIifWVsc2V7aWYoRjwwLjAwMDAxKXtGPTB9fWkuc3R5bGUub3BhY2l0eT1GO3JldHVybiBpfWZ1bmN0aW9uIGJmKGksYnEpe2lmKE4pe3JldHVybiB6KGksYnEpfWk9YWIoYVooaSkpO3ZhciBicD1hRi5nZXRTdHlsZShpLCJmaWx0ZXIiKSxGPWkuc3R5bGU7aWYoYnE9PTF8fGJxPT09IiIpe2JwPWFBKGJwKTtpZihicCl7Ri5maWx0ZXI9YnB9ZWxzZXtGLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIil9cmV0dXJuIGl9aWYoYnE8MC4wMDAwMSl7YnE9MH1GLmZpbHRlcj1hQShicCkrIiBhbHBoYShvcGFjaXR5PSIrKGJxKjEwMCkrIikiO3JldHVybiBpfWZ1bmN0aW9uIGJkKGkpe3JldHVybiBhRi5nZXRTdHlsZShpLCJvcGFjaXR5Iil9ZnVuY3Rpb24gYmUoRil7aWYoTil7cmV0dXJuIGJkKEYpfXZhciBicD1hRi5nZXRTdHlsZShGLCJmaWx0ZXIiKTtpZihicC5sZW5ndGg9PT0wKXtyZXR1cm4gMX12YXIgaT0oYnB8fCIiKS5tYXRjaCgvYWxwaGFcKG9wYWNpdHk9KC4qKVwpL2kpO2lmKGkmJmlbMV0pe3JldHVybiBwYXJzZUZsb2F0KGlbMV0pLzEwMH1yZXR1cm4gMX1PYmplY3QuZXh0ZW5kKGEzLHtzZXRTdHlsZTpDLGdldFN0eWxlOmFPLHNldE9wYWNpdHk6eixnZXRPcGFjaXR5OmJkfSk7aWYoInN0eWxlRmxvYXQiIGluIGF2LnN0eWxlKXthMy5nZXRTdHlsZT1hajthMy5zZXRPcGFjaXR5PWJmO2EzLmdldE9wYWNpdHk9YmV9dmFyIGw9MDthOC5FbGVtZW50LlN0b3JhZ2U9e1VJRDoxfTtmdW5jdGlvbiBNKGkpe2lmKGk9PT13aW5kb3cpe3JldHVybiAwfWlmKHR5cGVvZiBpLl9wcm90b3R5cGVVSUQ9PT0idW5kZWZpbmVkIil7aS5fcHJvdG90eXBlVUlEPWFGLlN0b3JhZ2UuVUlEKyt9cmV0dXJuIGkuX3Byb3RvdHlwZVVJRH1mdW5jdGlvbiBjKGkpe2lmKGk9PT13aW5kb3cpe3JldHVybiAwfWlmKGk9PWRvY3VtZW50KXtyZXR1cm4gMX1yZXR1cm4gaS51bmlxdWVJRH12YXIgYVk9KCJ1bmlxdWVJRCIgaW4gYXYpO2lmKGFZKXtNPWN9ZnVuY3Rpb24gYihGKXtpZighKEY9YVooRikpKXtyZXR1cm59dmFyIGk9TShGKTtpZighYUYuU3RvcmFnZVtpXSl7YUYuU3RvcmFnZVtpXT0kSCgpfXJldHVybiBhRi5TdG9yYWdlW2ldfWZ1bmN0aW9uIGE1KEYsaSxicCl7aWYoIShGPWFaKEYpKSl7cmV0dXJufXZhciBicT1iKEYpO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKXticS51cGRhdGUoaSl9ZWxzZXticS5zZXQoaSxicCl9cmV0dXJuIEZ9ZnVuY3Rpb24gYU4oYnAsRixpKXtpZighKGJwPWFaKGJwKSkpe3JldHVybn12YXIgYnI9YihicCksYnE9YnIuZ2V0KEYpO2lmKE9iamVjdC5pc1VuZGVmaW5lZChicSkpe2JyLnNldChGLGkpO2JxPWl9cmV0dXJuIGJxfU9iamVjdC5leHRlbmQoYTMse2dldFN0b3JhZ2U6YixzdG9yZTphNSxyZXRyaWV2ZTphTn0pO3ZhciBhbj17fSxhWD1hRi5NZXRob2RzLkJ5VGFnLGFDPVByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXM7aWYoIWFDLkVsZW1lbnRFeHRlbnNpb25zJiYoIl9fcHJvdG9fXyIgaW4gYXYpKXthOC5IVE1MRWxlbWVudD17fTthOC5IVE1MRWxlbWVudC5wcm90b3R5cGU9YXYuX19wcm90b19fO2FDLkVsZW1lbnRFeHRlbnNpb25zPXRydWV9ZnVuY3Rpb24gYmMoaSl7aWYodHlwZW9mIHdpbmRvdy5FbGVtZW50PT09InVuZGVmaW5lZCIpe3JldHVybiBmYWxzZX1pZighZCl7cmV0dXJuIGZhbHNlfXZhciBicD13aW5kb3cuRWxlbWVudC5wcm90b3R5cGU7aWYoYnApe3ZhciBicj0iXyIrKE1hdGgucmFuZG9tKCkrIiIpLnNsaWNlKDIpLEY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpKTticFticl09IngiO3ZhciBicT0oRlticl0hPT0ieCIpO2RlbGV0ZSBicFticl07Rj1udWxsO3JldHVybiBicX1yZXR1cm4gZmFsc2V9dmFyIGFwPWJjKCJvYmplY3QiKTtmdW5jdGlvbiBhayhGLGkpe2Zvcih2YXIgYnEgaW4gaSl7dmFyIGJwPWlbYnFdO2lmKE9iamVjdC5pc0Z1bmN0aW9uKGJwKSYmIShicSBpbiBGKSl7RlticV09YnAubWV0aG9kaXplKCl9fX12YXIgYms9e307ZnVuY3Rpb24gYXkoRil7dmFyIGk9TShGKTtyZXR1cm4oaSBpbiBiayl9ZnVuY3Rpb24gYXooYnApe2lmKCFicHx8YXkoYnApKXtyZXR1cm4gYnB9aWYoYnAubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8YnA9PXdpbmRvdyl7cmV0dXJuIGJwfXZhciBpPU9iamVjdC5jbG9uZShhbiksRj1icC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7aWYoYVhbRl0pe09iamVjdC5leHRlbmQoaSxhWFtGXSl9YWsoYnAsaSk7YmtbTShicCldPXRydWU7cmV0dXJuIGJwfWZ1bmN0aW9uIGFTKEYpe2lmKCFGfHxheShGKSl7cmV0dXJuIEZ9dmFyIGk9Ri50YWdOYW1lO2lmKGkmJigvXig/Om9iamVjdHxhcHBsZXR8ZW1iZWQpJC9pLnRlc3QoaSkpKXthayhGLGFGLk1ldGhvZHMpO2FrKEYsYUYuTWV0aG9kcy5TaW11bGF0ZWQpO2FrKEYsYUYuTWV0aG9kcy5CeVRhZ1tpLnRvVXBwZXJDYXNlKCldKX1yZXR1cm4gRn1pZihhQy5TcGVjaWZpY0VsZW1lbnRFeHRlbnNpb25zKXthej1hcD9hUzpQcm90b3R5cGUuS31mdW5jdGlvbiBTKEYsaSl7Rj1GLnRvVXBwZXJDYXNlKCk7aWYoIWFYW0ZdKXthWFtGXT17fX1PYmplY3QuZXh0ZW5kKGFYW0ZdLGkpfWZ1bmN0aW9uIHEoRixicCxpKXtpZihPYmplY3QuaXNVbmRlZmluZWQoaSkpe2k9ZmFsc2V9Zm9yKHZhciBiciBpbiBicCl7dmFyIGJxPWJwW2JyXTtpZighT2JqZWN0LmlzRnVuY3Rpb24oYnEpKXtjb250aW51ZX1pZighaXx8IShiciBpbiBGKSl7Rlticl09YnEubWV0aG9kaXplKCl9fX1mdW5jdGlvbiBhaShicSl7dmFyIGk7dmFyIGJwPXtPUFRHUk9VUDoiT3B0R3JvdXAiLFRFWFRBUkVBOiJUZXh0QXJlYSIsUDoiUGFyYWdyYXBoIixGSUVMRFNFVDoiRmllbGRTZXQiLFVMOiJVTGlzdCIsT0w6Ik9MaXN0IixETDoiRExpc3QiLERJUjoiRGlyZWN0b3J5IixIMToiSGVhZGluZyIsSDI6IkhlYWRpbmciLEgzOiJIZWFkaW5nIixINDoiSGVhZGluZyIsSDU6IkhlYWRpbmciLEg2OiJIZWFkaW5nIixROiJRdW90ZSIsSU5TOiJNb2QiLERFTDoiTW9kIixBOiJBbmNob3IiLElNRzoiSW1hZ2UiLENBUFRJT046IlRhYmxlQ2FwdGlvbiIsQ09MOiJUYWJsZUNvbCIsQ09MR1JPVVA6IlRhYmxlQ29sIixUSEVBRDoiVGFibGVTZWN0aW9uIixURk9PVDoiVGFibGVTZWN0aW9uIixUQk9EWToiVGFibGVTZWN0aW9uIixUUjoiVGFibGVSb3ciLFRIOiJUYWJsZUNlbGwiLFREOiJUYWJsZUNlbGwiLEZSQU1FU0VUOiJGcmFtZVNldCIsSUZSQU1FOiJJRnJhbWUifTtpZihicFticV0pe2k9IkhUTUwiK2JwW2JxXSsiRWxlbWVudCJ9aWYod2luZG93W2ldKXtyZXR1cm4gd2luZG93W2ldfWk9IkhUTUwiK2JxKyJFbGVtZW50IjtpZih3aW5kb3dbaV0pe3JldHVybiB3aW5kb3dbaV19aT0iSFRNTCIrYnEuY2FwaXRhbGl6ZSgpKyJFbGVtZW50IjtpZih3aW5kb3dbaV0pe3JldHVybiB3aW5kb3dbaV19dmFyIEY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChicSksYnI9Ri5fX3Byb3RvX198fEYuY29uc3RydWN0b3IucHJvdG90eXBlO0Y9bnVsbDtyZXR1cm4gYnJ9ZnVuY3Rpb24gUihicil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe0coKX1pZihhcmd1bWVudHMubGVuZ3RoPT09Mil7dmFyIGJ0PWJyO2JyPWFyZ3VtZW50c1sxXX1pZighYnQpe09iamVjdC5leHRlbmQoYUYuTWV0aG9kcyxicnx8e30pfWVsc2V7aWYoT2JqZWN0LmlzQXJyYXkoYnQpKXtmb3IodmFyIGJzPTAsYnE7YnE9YnRbYnNdO2JzKyspe1MoYnEsYnIpfX1lbHNle1MoYnQsYnIpfX12YXIgYnA9d2luZG93LkhUTUxFbGVtZW50P0hUTUxFbGVtZW50LnByb3RvdHlwZTphRi5wcm90b3R5cGU7aWYoYUMuRWxlbWVudEV4dGVuc2lvbnMpe3EoYnAsYUYuTWV0aG9kcyk7cShicCxhRi5NZXRob2RzLlNpbXVsYXRlZCx0cnVlKX1pZihhQy5TcGVjaWZpY0VsZW1lbnRFeHRlbnNpb25zKXtmb3IodmFyIGJxIGluIGFGLk1ldGhvZHMuQnlUYWcpe3ZhciBGPWFpKGJxKTtpZihPYmplY3QuaXNVbmRlZmluZWQoRikpe2NvbnRpbnVlfXEoRi5wcm90b3R5cGUsYVhbYnFdKX19T2JqZWN0LmV4dGVuZChhRixhRi5NZXRob2RzKTtPYmplY3QuZXh0ZW5kKGFGLGFGLk1ldGhvZHMuU2ltdWxhdGVkKTtkZWxldGUgYUYuQnlUYWc7ZGVsZXRlIGFGLlNpbXVsYXRlZDthRi5leHRlbmQucmVmcmVzaCgpO3I9e319T2JqZWN0LmV4dGVuZChhOC5FbGVtZW50LHtleHRlbmQ6YXosYWRkTWV0aG9kczpSfSk7aWYoYXo9PT1Qcm90b3R5cGUuSyl7YTguRWxlbWVudC5leHRlbmQucmVmcmVzaD1Qcm90b3R5cGUuZW1wdHlGdW5jdGlvbn1lbHNle2E4LkVsZW1lbnQuZXh0ZW5kLnJlZnJlc2g9ZnVuY3Rpb24oKXtpZihQcm90b3R5cGUuQnJvd3NlckZlYXR1cmVzLkVsZW1lbnRFeHRlbnNpb25zKXtyZXR1cm59T2JqZWN0LmV4dGVuZChhbixhRi5NZXRob2RzKTtPYmplY3QuZXh0ZW5kKGFuLGFGLk1ldGhvZHMuU2ltdWxhdGVkKTtiaz17fX19ZnVuY3Rpb24gRygpe09iamVjdC5leHRlbmQoRm9ybSxGb3JtLk1ldGhvZHMpO09iamVjdC5leHRlbmQoRm9ybS5FbGVtZW50LEZvcm0uRWxlbWVudC5NZXRob2RzKTtPYmplY3QuZXh0ZW5kKGFGLk1ldGhvZHMuQnlUYWcse0ZPUk06T2JqZWN0LmNsb25lKEZvcm0uTWV0aG9kcyksSU5QVVQ6T2JqZWN0LmNsb25lKEZvcm0uRWxlbWVudC5NZXRob2RzKSxTRUxFQ1Q6T2JqZWN0LmNsb25lKEZvcm0uRWxlbWVudC5NZXRob2RzKSxURVhUQVJFQTpPYmplY3QuY2xvbmUoRm9ybS5FbGVtZW50Lk1ldGhvZHMpLEJVVFRPTjpPYmplY3QuY2xvbmUoRm9ybS5FbGVtZW50Lk1ldGhvZHMpfSl9YUYuYWRkTWV0aG9kcyhhMyk7ZnVuY3Rpb24gbigpe2F2PW51bGw7cj1udWxsfWlmKHdpbmRvdy5hdHRhY2hFdmVudCl7d2luZG93LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsbil9fSkodGhpcyk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gayhHKXt2YXIgRj1HLm1hdGNoKC9eKFxkKyklPyQvaSk7aWYoIUYpe3JldHVybiBudWxsfXJldHVybihOdW1iZXIoRlsxXSkvMTAwKX1mdW5jdGlvbiB5KEcsSCl7Rz0kKEcpO3ZhciBJPUcuc3R5bGVbSF07aWYoIUl8fEk9PT0iYXV0byIpe3ZhciBGPWRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoRyxudWxsKTtJPUY/RltIXTpudWxsfWlmKEg9PT0ib3BhY2l0eSIpe3JldHVybiBJP3BhcnNlRmxvYXQoSSk6MX1yZXR1cm4gST09PSJhdXRvIj9udWxsOkl9ZnVuY3Rpb24gQihGLEcpe3ZhciBIPUYuc3R5bGVbR107aWYoIUgmJkYuY3VycmVudFN0eWxlKXtIPUYuY3VycmVudFN0eWxlW0ddfXJldHVybiBIfWZ1bmN0aW9uIHIoSCxHKXt2YXIgSj1ILm9mZnNldFdpZHRoO3ZhciBMPXUoSCwiYm9yZGVyTGVmdFdpZHRoIixHKXx8MDt2YXIgRj11KEgsImJvcmRlclJpZ2h0V2lkdGgiLEcpfHwwO3ZhciBJPXUoSCwicGFkZGluZ0xlZnQiLEcpfHwwO3ZhciBLPXUoSCwicGFkZGluZ1JpZ2h0IixHKXx8MDtyZXR1cm4gSi1MLUYtSS1LfWlmKCFPYmplY3QuaXNVbmRlZmluZWQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSkmJiFQcm90b3R5cGUuQnJvd3Nlci5PcGVyYSl7eT1CfWZ1bmN0aW9uIHUoUCxRLEcpe3ZhciBKPW51bGw7aWYoT2JqZWN0LmlzRWxlbWVudChQKSl7Sj1QO1A9eShKLFEpfWlmKFA9PT1udWxsfHxPYmplY3QuaXNVbmRlZmluZWQoUCkpe3JldHVybiBudWxsfWlmKCgvXig/Oi0pP1xkKyhcLlxkKyk/KHB4KT8kL2kpLnRlc3QoUCkpe3JldHVybiB3aW5kb3cucGFyc2VGbG9hdChQKX12YXIgSz1QLmluY2x1ZGUoIiUiKSxIPShHPT09ZG9jdW1lbnQudmlld3BvcnQpO2lmKC9cZC8udGVzdChQKSYmSiYmSi5ydW50aW1lU3R5bGUmJiEoSyYmSCkpe3ZhciBGPUouc3R5bGUubGVmdCxPPUoucnVudGltZVN0eWxlLmxlZnQ7Si5ydW50aW1lU3R5bGUubGVmdD1KLmN1cnJlbnRTdHlsZS5sZWZ0O0ouc3R5bGUubGVmdD1QfHwwO1A9Si5zdHlsZS5waXhlbExlZnQ7Si5zdHlsZS5sZWZ0PUY7Si5ydW50aW1lU3R5bGUubGVmdD1PO3JldHVybiBQfWlmKEomJkspe0c9R3x8Si5wYXJlbnROb2RlO3ZhciBJPWsoUCksTD1udWxsO3ZhciBOPVEuaW5jbHVkZSgibGVmdCIpfHxRLmluY2x1ZGUoInJpZ2h0Iil8fFEuaW5jbHVkZSgid2lkdGgiKTt2YXIgTT1RLmluY2x1ZGUoInRvcCIpfHxRLmluY2x1ZGUoImJvdHRvbSIpfHxRLmluY2x1ZGUoImhlaWdodCIpO2lmKEc9PT1kb2N1bWVudC52aWV3cG9ydCl7aWYoTil7TD1kb2N1bWVudC52aWV3cG9ydC5nZXRXaWR0aCgpfWVsc2V7aWYoTSl7TD1kb2N1bWVudC52aWV3cG9ydC5nZXRIZWlnaHQoKX19fWVsc2V7aWYoTil7TD0kKEcpLm1lYXN1cmUoIndpZHRoIil9ZWxzZXtpZihNKXtMPSQoRykubWVhc3VyZSgiaGVpZ2h0Iil9fX1yZXR1cm4oTD09PW51bGwpPzA6TCpJfXJldHVybiAwfWZ1bmN0aW9uIGooRil7aWYoT2JqZWN0LmlzU3RyaW5nKEYpJiZGLmVuZHNXaXRoKCJweCIpKXtyZXR1cm4gRn1yZXR1cm4gRisicHgifWZ1bmN0aW9uIG0oRil7d2hpbGUoRiYmRi5wYXJlbnROb2RlKXt2YXIgRz1GLmdldFN0eWxlKCJkaXNwbGF5Iik7aWYoRz09PSJub25lIil7cmV0dXJuIGZhbHNlfUY9JChGLnBhcmVudE5vZGUpfXJldHVybiB0cnVlfXZhciBnPVByb3RvdHlwZS5LO2lmKCJjdXJyZW50U3R5bGUiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7Zz1mdW5jdGlvbihGKXtpZighRi5jdXJyZW50U3R5bGUuaGFzTGF5b3V0KXtGLnN0eWxlLnpvb209MX1yZXR1cm4gRn19ZnVuY3Rpb24gaShGKXtpZihGLmluY2x1ZGUoImJvcmRlciIpKXtGPUYrIi13aWR0aCJ9cmV0dXJuIEYuY2FtZWxpemUoKX1FbGVtZW50LkxheW91dD1DbGFzcy5jcmVhdGUoSGFzaCx7aW5pdGlhbGl6ZTpmdW5jdGlvbigkc3VwZXIsRyxGKXskc3VwZXIoKTt0aGlzLmVsZW1lbnQ9JChHKTtFbGVtZW50LkxheW91dC5QUk9QRVJUSUVTLmVhY2goZnVuY3Rpb24oSCl7dGhpcy5fc2V0KEgsbnVsbCl9LHRoaXMpO2lmKEYpe3RoaXMuX3ByZUNvbXB1dGluZz10cnVlO3RoaXMuX2JlZ2luKCk7RWxlbWVudC5MYXlvdXQuUFJPUEVSVElFUy5lYWNoKHRoaXMuX2NvbXB1dGUsdGhpcyk7dGhpcy5fZW5kKCk7dGhpcy5fcHJlQ29tcHV0aW5nPWZhbHNlfX0sX3NldDpmdW5jdGlvbihHLEYpe3JldHVybiBIYXNoLnByb3RvdHlwZS5zZXQuY2FsbCh0aGlzLEcsRil9LHNldDpmdW5jdGlvbihHLEYpe3Rocm93IlByb3BlcnRpZXMgb2YgRWxlbWVudC5MYXlvdXQgYXJlIHJlYWQtb25seS4ifSxnZXQ6ZnVuY3Rpb24oJHN1cGVyLEcpe3ZhciBGPSRzdXBlcihHKTtyZXR1cm4gRj09PW51bGw/dGhpcy5fY29tcHV0ZShHKTpGfSxfYmVnaW46ZnVuY3Rpb24oKXtpZih0aGlzLl9pc1ByZXBhcmVkKCkpe3JldHVybn12YXIgSj10aGlzLmVsZW1lbnQ7aWYobShKKSl7dGhpcy5fc2V0UHJlcGFyZWQodHJ1ZSk7cmV0dXJufXZhciBMPXtwb3NpdGlvbjpKLnN0eWxlLnBvc2l0aW9ufHwiIix3aWR0aDpKLnN0eWxlLndpZHRofHwiIix2aXNpYmlsaXR5Okouc3R5bGUudmlzaWJpbGl0eXx8IiIsZGlzcGxheTpKLnN0eWxlLmRpc3BsYXl8fCIifTtKLnN0b3JlKCJwcm90b3R5cGVfb3JpZ2luYWxfc3R5bGVzIixMKTt2YXIgTT15KEosInBvc2l0aW9uIiksRj1KLm9mZnNldFdpZHRoO2lmKEY9PT0wfHxGPT09bnVsbCl7Si5zdHlsZS5kaXNwbGF5PSJibG9jayI7Rj1KLm9mZnNldFdpZHRofXZhciBHPShNPT09ImZpeGVkIik/ZG9jdW1lbnQudmlld3BvcnQ6Si5wYXJlbnROb2RlO3ZhciBOPXt2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn07aWYoTSE9PSJmaXhlZCIpe04ucG9zaXRpb249ImFic29sdXRlIn1KLnNldFN0eWxlKE4pO3ZhciBIPUoub2Zmc2V0V2lkdGgsSTtpZihGJiYoSD09PUYpKXtJPXIoSixHKX1lbHNle2lmKE09PT0iYWJzb2x1dGUifHxNPT09ImZpeGVkIil7ST1yKEosRyl9ZWxzZXt2YXIgTz1KLnBhcmVudE5vZGUsSz0kKE8pLmdldExheW91dCgpO0k9Sy5nZXQoIndpZHRoIiktdGhpcy5nZXQoIm1hcmdpbi1sZWZ0IiktdGhpcy5nZXQoImJvcmRlci1sZWZ0IiktdGhpcy5nZXQoInBhZGRpbmctbGVmdCIpLXRoaXMuZ2V0KCJwYWRkaW5nLXJpZ2h0IiktdGhpcy5nZXQoImJvcmRlci1yaWdodCIpLXRoaXMuZ2V0KCJtYXJnaW4tcmlnaHQiKX19Si5zZXRTdHlsZSh7d2lkdGg6SSsicHgifSk7dGhpcy5fc2V0UHJlcGFyZWQodHJ1ZSl9LF9lbmQ6ZnVuY3Rpb24oKXt2YXIgRz10aGlzLmVsZW1lbnQ7dmFyIEY9Ry5yZXRyaWV2ZSgicHJvdG90eXBlX29yaWdpbmFsX3N0eWxlcyIpO0cuc3RvcmUoInByb3RvdHlwZV9vcmlnaW5hbF9zdHlsZXMiLG51bGwpO0cuc2V0U3R5bGUoRik7dGhpcy5fc2V0UHJlcGFyZWQoZmFsc2UpfSxfY29tcHV0ZTpmdW5jdGlvbihHKXt2YXIgRj1FbGVtZW50LkxheW91dC5DT01QVVRBVElPTlM7aWYoIShHIGluIEYpKXt0aHJvdyJQcm9wZXJ0eSBub3QgZm91bmQuIn1yZXR1cm4gdGhpcy5fc2V0KEcsRltHXS5jYWxsKHRoaXMsdGhpcy5lbGVtZW50KSl9LF9pc1ByZXBhcmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5yZXRyaWV2ZSgicHJvdG90eXBlX2VsZW1lbnRfbGF5b3V0X3ByZXBhcmVkIixmYWxzZSl9LF9zZXRQcmVwYXJlZDpmdW5jdGlvbihGKXtyZXR1cm4gdGhpcy5lbGVtZW50LnN0b3JlKCJwcm90b3R5cGVfZWxlbWVudF9sYXlvdXRfcHJlcGFyZWQiLEYpfSx0b09iamVjdDpmdW5jdGlvbigpe3ZhciBGPSRBKGFyZ3VtZW50cyk7dmFyIEc9KEYubGVuZ3RoPT09MCk/RWxlbWVudC5MYXlvdXQuUFJPUEVSVElFUzpGLmpvaW4oIiAiKS5zcGxpdCgiICIpO3ZhciBIPXt9O0cuZWFjaChmdW5jdGlvbihJKXtpZighRWxlbWVudC5MYXlvdXQuUFJPUEVSVElFUy5pbmNsdWRlKEkpKXtyZXR1cm59dmFyIEo9dGhpcy5nZXQoSSk7aWYoSiE9bnVsbCl7SFtJXT1KfX0sdGhpcyk7cmV0dXJuIEh9LHRvSGFzaDpmdW5jdGlvbigpe3ZhciBGPXRoaXMudG9PYmplY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBuZXcgSGFzaChGKX0sdG9DU1M6ZnVuY3Rpb24oKXt2YXIgRj0kQShhcmd1bWVudHMpO3ZhciBIPShGLmxlbmd0aD09PTApP0VsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVM6Ri5qb2luKCIgIikuc3BsaXQoIiAiKTt2YXIgRz17fTtILmVhY2goZnVuY3Rpb24oSSl7aWYoIUVsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVMuaW5jbHVkZShJKSl7cmV0dXJufWlmKEVsZW1lbnQuTGF5b3V0LkNPTVBPU0lURV9QUk9QRVJUSUVTLmluY2x1ZGUoSSkpe3JldHVybn12YXIgSj10aGlzLmdldChJKTtpZihKIT1udWxsKXtHW2koSSldPUorInB4In19LHRoaXMpO3JldHVybiBHfSxpbnNwZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIiM8RWxlbWVudC5MYXlvdXQ+In19KTtPYmplY3QuZXh0ZW5kKEVsZW1lbnQuTGF5b3V0LHtQUk9QRVJUSUVTOiR3KCJoZWlnaHQgd2lkdGggdG9wIGxlZnQgcmlnaHQgYm90dG9tIGJvcmRlci1sZWZ0IGJvcmRlci1yaWdodCBib3JkZXItdG9wIGJvcmRlci1ib3R0b20gcGFkZGluZy1sZWZ0IHBhZGRpbmctcmlnaHQgcGFkZGluZy10b3AgcGFkZGluZy1ib3R0b20gbWFyZ2luLXRvcCBtYXJnaW4tYm90dG9tIG1hcmdpbi1sZWZ0IG1hcmdpbi1yaWdodCBwYWRkaW5nLWJveC13aWR0aCBwYWRkaW5nLWJveC1oZWlnaHQgYm9yZGVyLWJveC13aWR0aCBib3JkZXItYm94LWhlaWdodCBtYXJnaW4tYm94LXdpZHRoIG1hcmdpbi1ib3gtaGVpZ2h0IiksQ09NUE9TSVRFX1BST1BFUlRJRVM6JHcoInBhZGRpbmctYm94LXdpZHRoIHBhZGRpbmctYm94LWhlaWdodCBtYXJnaW4tYm94LXdpZHRoIG1hcmdpbi1ib3gtaGVpZ2h0IGJvcmRlci1ib3gtd2lkdGggYm9yZGVyLWJveC1oZWlnaHQiKSxDT01QVVRBVElPTlM6e2hlaWdodDpmdW5jdGlvbihIKXtpZighdGhpcy5fcHJlQ29tcHV0aW5nKXt0aGlzLl9iZWdpbigpfXZhciBGPXRoaXMuZ2V0KCJib3JkZXItYm94LWhlaWdodCIpO2lmKEY8PTApe2lmKCF0aGlzLl9wcmVDb21wdXRpbmcpe3RoaXMuX2VuZCgpfXJldHVybiAwfXZhciBJPXRoaXMuZ2V0KCJib3JkZXItdG9wIiksRz10aGlzLmdldCgiYm9yZGVyLWJvdHRvbSIpO3ZhciBLPXRoaXMuZ2V0KCJwYWRkaW5nLXRvcCIpLEo9dGhpcy5nZXQoInBhZGRpbmctYm90dG9tIik7aWYoIXRoaXMuX3ByZUNvbXB1dGluZyl7dGhpcy5fZW5kKCl9cmV0dXJuIEYtSS1HLUstSn0sd2lkdGg6ZnVuY3Rpb24oSCl7aWYoIXRoaXMuX3ByZUNvbXB1dGluZyl7dGhpcy5fYmVnaW4oKX12YXIgRz10aGlzLmdldCgiYm9yZGVyLWJveC13aWR0aCIpO2lmKEc8PTApe2lmKCF0aGlzLl9wcmVDb21wdXRpbmcpe3RoaXMuX2VuZCgpfXJldHVybiAwfXZhciBLPXRoaXMuZ2V0KCJib3JkZXItbGVmdCIpLEY9dGhpcy5nZXQoImJvcmRlci1yaWdodCIpO3ZhciBJPXRoaXMuZ2V0KCJwYWRkaW5nLWxlZnQiKSxKPXRoaXMuZ2V0KCJwYWRkaW5nLXJpZ2h0Iik7aWYoIXRoaXMuX3ByZUNvbXB1dGluZyl7dGhpcy5fZW5kKCl9cmV0dXJuIEctSy1GLUktSn0sInBhZGRpbmctYm94LWhlaWdodCI6ZnVuY3Rpb24oRyl7dmFyIEY9dGhpcy5nZXQoImhlaWdodCIpLEk9dGhpcy5nZXQoInBhZGRpbmctdG9wIiksSD10aGlzLmdldCgicGFkZGluZy1ib3R0b20iKTtyZXR1cm4gRitJK0h9LCJwYWRkaW5nLWJveC13aWR0aCI6ZnVuY3Rpb24oRil7dmFyIEc9dGhpcy5nZXQoIndpZHRoIiksSD10aGlzLmdldCgicGFkZGluZy1sZWZ0IiksST10aGlzLmdldCgicGFkZGluZy1yaWdodCIpO3JldHVybiBHK0grSX0sImJvcmRlci1ib3gtaGVpZ2h0IjpmdW5jdGlvbihHKXtpZighdGhpcy5fcHJlQ29tcHV0aW5nKXt0aGlzLl9iZWdpbigpfXZhciBGPUcub2Zmc2V0SGVpZ2h0O2lmKCF0aGlzLl9wcmVDb21wdXRpbmcpe3RoaXMuX2VuZCgpfXJldHVybiBGfSwiYm9yZGVyLWJveC13aWR0aCI6ZnVuY3Rpb24oRil7aWYoIXRoaXMuX3ByZUNvbXB1dGluZyl7dGhpcy5fYmVnaW4oKX12YXIgRz1GLm9mZnNldFdpZHRoO2lmKCF0aGlzLl9wcmVDb21wdXRpbmcpe3RoaXMuX2VuZCgpfXJldHVybiBHfSwibWFyZ2luLWJveC1oZWlnaHQiOmZ1bmN0aW9uKEcpe3ZhciBGPXRoaXMuZ2V0KCJib3JkZXItYm94LWhlaWdodCIpLEg9dGhpcy5nZXQoIm1hcmdpbi10b3AiKSxJPXRoaXMuZ2V0KCJtYXJnaW4tYm90dG9tIik7aWYoRjw9MCl7cmV0dXJuIDB9cmV0dXJuIEYrSCtJfSwibWFyZ2luLWJveC13aWR0aCI6ZnVuY3Rpb24oSCl7dmFyIEc9dGhpcy5nZXQoImJvcmRlci1ib3gtd2lkdGgiKSxJPXRoaXMuZ2V0KCJtYXJnaW4tbGVmdCIpLEY9dGhpcy5nZXQoIm1hcmdpbi1yaWdodCIpO2lmKEc8PTApe3JldHVybiAwfXJldHVybiBHK0krRn0sdG9wOmZ1bmN0aW9uKEYpe3ZhciBHPUYucG9zaXRpb25lZE9mZnNldCgpO3JldHVybiBHLnRvcH0sYm90dG9tOmZ1bmN0aW9uKEYpe3ZhciBJPUYucG9zaXRpb25lZE9mZnNldCgpLEc9Ri5nZXRPZmZzZXRQYXJlbnQoKSxIPUcubWVhc3VyZSgiaGVpZ2h0Iik7dmFyIEo9dGhpcy5nZXQoImJvcmRlci1ib3gtaGVpZ2h0Iik7cmV0dXJuIEgtSi1JLnRvcH0sbGVmdDpmdW5jdGlvbihGKXt2YXIgRz1GLnBvc2l0aW9uZWRPZmZzZXQoKTtyZXR1cm4gRy5sZWZ0fSxyaWdodDpmdW5jdGlvbihIKXt2YXIgSj1ILnBvc2l0aW9uZWRPZmZzZXQoKSxJPUguZ2V0T2Zmc2V0UGFyZW50KCksRj1JLm1lYXN1cmUoIndpZHRoIik7dmFyIEc9dGhpcy5nZXQoImJvcmRlci1ib3gtd2lkdGgiKTtyZXR1cm4gRi1HLUoubGVmdH0sInBhZGRpbmctdG9wIjpmdW5jdGlvbihGKXtyZXR1cm4gdShGLCJwYWRkaW5nVG9wIil9LCJwYWRkaW5nLWJvdHRvbSI6ZnVuY3Rpb24oRil7cmV0dXJuIHUoRiwicGFkZGluZ0JvdHRvbSIpfSwicGFkZGluZy1sZWZ0IjpmdW5jdGlvbihGKXtyZXR1cm4gdShGLCJwYWRkaW5nTGVmdCIpfSwicGFkZGluZy1yaWdodCI6ZnVuY3Rpb24oRil7cmV0dXJuIHUoRiwicGFkZGluZ1JpZ2h0Iil9LCJib3JkZXItdG9wIjpmdW5jdGlvbihGKXtyZXR1cm4gdShGLCJib3JkZXJUb3BXaWR0aCIpfSwiYm9yZGVyLWJvdHRvbSI6ZnVuY3Rpb24oRil7cmV0dXJuIHUoRiwiYm9yZGVyQm90dG9tV2lkdGgiKX0sImJvcmRlci1sZWZ0IjpmdW5jdGlvbihGKXtyZXR1cm4gdShGLCJib3JkZXJMZWZ0V2lkdGgiKX0sImJvcmRlci1yaWdodCI6ZnVuY3Rpb24oRil7cmV0dXJuIHUoRiwiYm9yZGVyUmlnaHRXaWR0aCIpfSwibWFyZ2luLXRvcCI6ZnVuY3Rpb24oRil7cmV0dXJuIHUoRiwibWFyZ2luVG9wIil9LCJtYXJnaW4tYm90dG9tIjpmdW5jdGlvbihGKXtyZXR1cm4gdShGLCJtYXJnaW5Cb3R0b20iKX0sIm1hcmdpbi1sZWZ0IjpmdW5jdGlvbihGKXtyZXR1cm4gdShGLCJtYXJnaW5MZWZ0Iil9LCJtYXJnaW4tcmlnaHQiOmZ1bmN0aW9uKEYpe3JldHVybiB1KEYsIm1hcmdpblJpZ2h0Iil9fX0pO2lmKCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7T2JqZWN0LmV4dGVuZChFbGVtZW50LkxheW91dC5DT01QVVRBVElPTlMse3JpZ2h0OmZ1bmN0aW9uKEcpe3ZhciBIPWcoRy5nZXRPZmZzZXRQYXJlbnQoKSk7dmFyIEk9Ry5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxGPUguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuKEYucmlnaHQtSS5yaWdodCkucm91bmQoKX0sYm90dG9tOmZ1bmN0aW9uKEcpe3ZhciBIPWcoRy5nZXRPZmZzZXRQYXJlbnQoKSk7dmFyIEk9Ry5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxGPUguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuKEYuYm90dG9tLUkuYm90dG9tKS5yb3VuZCgpfX0pfUVsZW1lbnQuT2Zmc2V0PUNsYXNzLmNyZWF0ZSh7aW5pdGlhbGl6ZTpmdW5jdGlvbihHLEYpe3RoaXMubGVmdD1HLnJvdW5kKCk7dGhpcy50b3A9Ri5yb3VuZCgpO3RoaXNbMF09dGhpcy5sZWZ0O3RoaXNbMV09dGhpcy50b3B9LHJlbGF0aXZlVG86ZnVuY3Rpb24oRil7cmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCh0aGlzLmxlZnQtRi5sZWZ0LHRoaXMudG9wLUYudG9wKX0saW5zcGVjdDpmdW5jdGlvbigpe3JldHVybiIjPEVsZW1lbnQuT2Zmc2V0IGxlZnQ6ICN7bGVmdH0gdG9wOiAje3RvcH0+Ii5pbnRlcnBvbGF0ZSh0aGlzKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4iWyN7bGVmdH0sICN7dG9wfV0iLmludGVycG9sYXRlKHRoaXMpfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMubGVmdCx0aGlzLnRvcF19fSk7ZnVuY3Rpb24geihHLEYpe3JldHVybiBuZXcgRWxlbWVudC5MYXlvdXQoRyxGKX1mdW5jdGlvbiBkKEYsRyl7cmV0dXJuICQoRikuZ2V0TGF5b3V0KCkuZ2V0KEcpfWZ1bmN0aW9uIHEoRil7cmV0dXJuIEVsZW1lbnQuZ2V0RGltZW5zaW9ucyhGKS5oZWlnaHR9ZnVuY3Rpb24gYyhGKXtyZXR1cm4gRWxlbWVudC5nZXREaW1lbnNpb25zKEYpLndpZHRofWZ1bmN0aW9uIHMoRyl7Rz0kKEcpO3ZhciBLPUVsZW1lbnQuZ2V0U3R5bGUoRywiZGlzcGxheSIpO2lmKEsmJkshPT0ibm9uZSIpe3JldHVybnt3aWR0aDpHLm9mZnNldFdpZHRoLGhlaWdodDpHLm9mZnNldEhlaWdodH19dmFyIEg9Ry5zdHlsZTt2YXIgRj17dmlzaWJpbGl0eTpILnZpc2liaWxpdHkscG9zaXRpb246SC5wb3NpdGlvbixkaXNwbGF5OkguZGlzcGxheX07dmFyIEo9e3Zpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifTtpZihGLnBvc2l0aW9uIT09ImZpeGVkIil7Si5wb3NpdGlvbj0iYWJzb2x1dGUifUVsZW1lbnQuc2V0U3R5bGUoRyxKKTt2YXIgST17d2lkdGg6Ry5vZmZzZXRXaWR0aCxoZWlnaHQ6Ry5vZmZzZXRIZWlnaHR9O0VsZW1lbnQuc2V0U3R5bGUoRyxGKTtyZXR1cm4gSX1mdW5jdGlvbiBwKEYpe0Y9JChGKTtmdW5jdGlvbiBIKEkpe3JldHVybiBuKEkpPyQoZG9jdW1lbnQuYm9keSk6JChJKX1pZihoKEYpfHxmKEYpfHxvKEYpfHxuKEYpKXtyZXR1cm4gJChkb2N1bWVudC5ib2R5KX12YXIgRz0oRWxlbWVudC5nZXRTdHlsZShGLCJkaXNwbGF5Iik9PT0iaW5saW5lIik7aWYoIUcmJkYub2Zmc2V0UGFyZW50KXtyZXR1cm4gSChGLm9mZnNldFBhcmVudCl9d2hpbGUoKEY9Ri5wYXJlbnROb2RlKSYmRiE9PWRvY3VtZW50LmJvZHkpe2lmKEVsZW1lbnQuZ2V0U3R5bGUoRiwicG9zaXRpb24iKSE9PSJzdGF0aWMiKXtyZXR1cm4gSChGKX19cmV0dXJuICQoZG9jdW1lbnQuYm9keSl9ZnVuY3Rpb24gQyhHKXtHPSQoRyk7dmFyIEY9MCxIPTA7aWYoRy5wYXJlbnROb2RlKXtkb3tGKz1HLm9mZnNldFRvcHx8MDtIKz1HLm9mZnNldExlZnR8fDA7Rz1HLm9mZnNldFBhcmVudH13aGlsZShHKX1yZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KEgsRil9ZnVuY3Rpb24gdyhHKXtHPSQoRyk7dmFyIEg9Ry5nZXRMYXlvdXQoKTt2YXIgRj0wLEo9MDtkb3tGKz1HLm9mZnNldFRvcHx8MDtKKz1HLm9mZnNldExlZnR8fDA7Rz1HLm9mZnNldFBhcmVudDtpZihHKXtpZihvKEcpKXticmVha312YXIgST1FbGVtZW50LmdldFN0eWxlKEcsInBvc2l0aW9uIik7aWYoSSE9PSJzdGF0aWMiKXticmVha319fXdoaWxlKEcpO0otPUguZ2V0KCJtYXJnaW4tbGVmdCIpO0YtPUguZ2V0KCJtYXJnaW4tdG9wIik7cmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldChKLEYpfWZ1bmN0aW9uIGIoRyl7dmFyIEY9MCxIPTA7ZG97aWYoRz09PWRvY3VtZW50LmJvZHkpe3ZhciBJPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudHx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlfHxkb2N1bWVudC5ib2R5O0YrPSFPYmplY3QuaXNVbmRlZmluZWQod2luZG93LnBhZ2VZT2Zmc2V0KT93aW5kb3cucGFnZVlPZmZzZXQ6SS5zY3JvbGxUb3B8fDA7SCs9IU9iamVjdC5pc1VuZGVmaW5lZCh3aW5kb3cucGFnZVhPZmZzZXQpP3dpbmRvdy5wYWdlWE9mZnNldDpJLnNjcm9sbExlZnR8fDA7YnJlYWt9ZWxzZXtGKz1HLnNjcm9sbFRvcHx8MDtIKz1HLnNjcm9sbExlZnR8fDA7Rz1HLnBhcmVudE5vZGV9fXdoaWxlKEcpO3JldHVybiBuZXcgRWxlbWVudC5PZmZzZXQoSCxGKX1mdW5jdGlvbiBBKEope3ZhciBGPTAsST0wLEg9ZG9jdW1lbnQuYm9keTtKPSQoSik7dmFyIEc9Sjtkb3tGKz1HLm9mZnNldFRvcHx8MDtJKz1HLm9mZnNldExlZnR8fDA7aWYoRy5vZmZzZXRQYXJlbnQ9PUgmJkVsZW1lbnQuZ2V0U3R5bGUoRywicG9zaXRpb24iKT09ImFic29sdXRlIil7YnJlYWt9fXdoaWxlKEc9Ry5vZmZzZXRQYXJlbnQpO0c9Sjtkb3tpZihHIT1IKXtGLT1HLnNjcm9sbFRvcHx8MDtJLT1HLnNjcm9sbExlZnR8fDB9fXdoaWxlKEc9Ry5wYXJlbnROb2RlKTtyZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KEksRil9ZnVuY3Rpb24geChGKXtGPSQoRik7aWYoRWxlbWVudC5nZXRTdHlsZShGLCJwb3NpdGlvbiIpPT09ImFic29sdXRlIil7cmV0dXJuIEZ9dmFyIEo9cChGKTt2YXIgST1GLnZpZXdwb3J0T2Zmc2V0KCksRz1KLnZpZXdwb3J0T2Zmc2V0KCk7dmFyIEs9SS5yZWxhdGl2ZVRvKEcpO3ZhciBIPUYuZ2V0TGF5b3V0KCk7Ri5zdG9yZSgicHJvdG90eXBlX2Fic29sdXRpemVfb3JpZ2luYWxfc3R5bGVzIix7cG9zaXRpb246Ri5nZXRTdHlsZSgicG9zaXRpb24iKSxsZWZ0OkYuZ2V0U3R5bGUoImxlZnQiKSx0b3A6Ri5nZXRTdHlsZSgidG9wIiksd2lkdGg6Ri5nZXRTdHlsZSgid2lkdGgiKSxoZWlnaHQ6Ri5nZXRTdHlsZSgiaGVpZ2h0Iil9KTtGLnNldFN0eWxlKHtwb3NpdGlvbjoiYWJzb2x1dGUiLHRvcDpLLnRvcCsicHgiLGxlZnQ6Sy5sZWZ0KyJweCIsd2lkdGg6SC5nZXQoIndpZHRoIikrInB4IixoZWlnaHQ6SC5nZXQoImhlaWdodCIpKyJweCJ9KTtyZXR1cm4gRn1mdW5jdGlvbiBsKEcpe0c9JChHKTtpZihFbGVtZW50LmdldFN0eWxlKEcsInBvc2l0aW9uIik9PT0icmVsYXRpdmUiKXtyZXR1cm4gR312YXIgRj1HLnJldHJpZXZlKCJwcm90b3R5cGVfYWJzb2x1dGl6ZV9vcmlnaW5hbF9zdHlsZXMiKTtpZihGKXtHLnNldFN0eWxlKEYpfXJldHVybiBHfWZ1bmN0aW9uIGEoRil7Rj0kKEYpO3ZhciBHPUVsZW1lbnQuY3VtdWxhdGl2ZU9mZnNldChGKTt3aW5kb3cuc2Nyb2xsVG8oRy5sZWZ0LEcudG9wKTtyZXR1cm4gRn1mdW5jdGlvbiB2KEcpe0c9JChHKTt2YXIgRj1FbGVtZW50LmdldFN0eWxlKEcsInBvc2l0aW9uIiksSD17fTtpZihGPT09InN0YXRpYyJ8fCFGKXtILnBvc2l0aW9uPSJyZWxhdGl2ZSI7aWYoUHJvdG90eXBlLkJyb3dzZXIuT3BlcmEpe0gudG9wPTA7SC5sZWZ0PTB9RWxlbWVudC5zZXRTdHlsZShHLEgpO0VsZW1lbnQuc3RvcmUoRywicHJvdG90eXBlX21hZGVfcG9zaXRpb25lZCIsdHJ1ZSl9cmV0dXJuIEd9ZnVuY3Rpb24gdChGKXtGPSQoRik7dmFyIEg9RWxlbWVudC5nZXRTdG9yYWdlKEYpLEc9SC5nZXQoInByb3RvdHlwZV9tYWRlX3Bvc2l0aW9uZWQiKTtpZihHKXtILnVuc2V0KCJwcm90b3R5cGVfbWFkZV9wb3NpdGlvbmVkIik7RWxlbWVudC5zZXRTdHlsZShGLHtwb3NpdGlvbjoiIix0b3A6IiIsYm90dG9tOiIiLGxlZnQ6IiIscmlnaHQ6IiJ9KX1yZXR1cm4gRn1mdW5jdGlvbiBlKEcpe0c9JChHKTt2YXIgST1FbGVtZW50LmdldFN0b3JhZ2UoRyksRj1JLmdldCgicHJvdG90eXBlX21hZGVfY2xpcHBpbmciKTtpZihPYmplY3QuaXNVbmRlZmluZWQoRikpe3ZhciBIPUVsZW1lbnQuZ2V0U3R5bGUoRywib3ZlcmZsb3ciKTtJLnNldCgicHJvdG90eXBlX21hZGVfY2xpcHBpbmciLEgpO2lmKEghPT0iaGlkZGVuIil7Ry5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIn19cmV0dXJuIEd9ZnVuY3Rpb24gRChGKXtGPSQoRik7dmFyIEg9RWxlbWVudC5nZXRTdG9yYWdlKEYpLEc9SC5nZXQoInByb3RvdHlwZV9tYWRlX2NsaXBwaW5nIik7aWYoIU9iamVjdC5pc1VuZGVmaW5lZChHKSl7SC51bnNldCgicHJvdG90eXBlX21hZGVfY2xpcHBpbmciKTtGLnN0eWxlLm92ZXJmbG93PUd8fCIifXJldHVybiBGfWZ1bmN0aW9uIEUoSSxGLFEpe1E9T2JqZWN0LmV4dGVuZCh7c2V0TGVmdDp0cnVlLHNldFRvcDp0cnVlLHNldFdpZHRoOnRydWUsc2V0SGVpZ2h0OnRydWUsb2Zmc2V0VG9wOjAsb2Zmc2V0TGVmdDowfSxRfHx7fSk7dmFyIEg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O0Y9JChGKTtJPSQoSSk7dmFyIEcsTyxLLFA9e307aWYoUS5zZXRMZWZ0fHxRLnNldFRvcCl7Rz1FbGVtZW50LnZpZXdwb3J0T2Zmc2V0KEYpO089WzAsMF07aWYoRWxlbWVudC5nZXRTdHlsZShJLCJwb3NpdGlvbiIpPT09ImFic29sdXRlIil7dmFyIE49RWxlbWVudC5nZXRPZmZzZXRQYXJlbnQoSSk7aWYoTiE9PWRvY3VtZW50LmJvZHkpe089RWxlbWVudC52aWV3cG9ydE9mZnNldChOKX19fWZ1bmN0aW9uIEwoKXt2YXIgUj0wLFM9MDtpZihPYmplY3QuaXNOdW1iZXIod2luZG93LnBhZ2VYT2Zmc2V0KSl7Uj13aW5kb3cucGFnZVhPZmZzZXQ7Uz13aW5kb3cucGFnZVlPZmZzZXR9ZWxzZXtpZihkb2N1bWVudC5ib2R5JiYoZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkpe1I9ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1M9ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3B9ZWxzZXtpZihIJiYoSC5zY3JvbGxMZWZ0fHxILnNjcm9sbFRvcCkpe1I9SC5zY3JvbGxMZWZ0O1M9SC5zY3JvbGxUb3B9fX1yZXR1cm57eDpSLHk6U319dmFyIEo9TCgpO2lmKFEuc2V0V2lkdGh8fFEuc2V0SGVpZ2h0KXtLPUVsZW1lbnQuZ2V0TGF5b3V0KEYpfWlmKFEuc2V0TGVmdCl7UC5sZWZ0PShHWzBdK0oueC1PWzBdK1Eub2Zmc2V0TGVmdCkrInB4In1pZihRLnNldFRvcCl7UC50b3A9KEdbMV0rSi55LU9bMV0rUS5vZmZzZXRUb3ApKyJweCJ9dmFyIE09SS5nZXRMYXlvdXQoKTtpZihRLnNldFdpZHRoKXtQLndpZHRoPUsuZ2V0KCJ3aWR0aCIpKyJweCJ9aWYoUS5zZXRIZWlnaHQpe1AuaGVpZ2h0PUsuZ2V0KCJoZWlnaHQiKSsicHgifXJldHVybiBFbGVtZW50LnNldFN0eWxlKEksUCl9aWYoUHJvdG90eXBlLkJyb3dzZXIuSUUpe3A9cC53cmFwKGZ1bmN0aW9uKEgsRyl7Rz0kKEcpO2lmKGgoRyl8fGYoRyl8fG8oRyl8fG4oRykpe3JldHVybiAkKGRvY3VtZW50LmJvZHkpfXZhciBGPUcuZ2V0U3R5bGUoInBvc2l0aW9uIik7aWYoRiE9PSJzdGF0aWMiKXtyZXR1cm4gSChHKX1HLnNldFN0eWxlKHtwb3NpdGlvbjoicmVsYXRpdmUifSk7dmFyIEk9SChHKTtHLnNldFN0eWxlKHtwb3NpdGlvbjpGfSk7cmV0dXJuIEl9KTt3PXcud3JhcChmdW5jdGlvbihJLEcpe0c9JChHKTtpZighRy5wYXJlbnROb2RlKXtyZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KDAsMCl9dmFyIEY9Ry5nZXRTdHlsZSgicG9zaXRpb24iKTtpZihGIT09InN0YXRpYyIpe3JldHVybiBJKEcpfXZhciBIPUcuZ2V0T2Zmc2V0UGFyZW50KCk7aWYoSCYmSC5nZXRTdHlsZSgicG9zaXRpb24iKT09PSJmaXhlZCIpe2coSCl9Ry5zZXRTdHlsZSh7cG9zaXRpb246InJlbGF0aXZlIn0pO3ZhciBKPUkoRyk7Ry5zZXRTdHlsZSh7cG9zaXRpb246Rn0pO3JldHVybiBKfSl9ZWxzZXtpZihQcm90b3R5cGUuQnJvd3Nlci5XZWJraXQpe0M9ZnVuY3Rpb24oRyl7Rz0kKEcpO3ZhciBGPTAsSD0wO2Rve0YrPUcub2Zmc2V0VG9wfHwwO0grPUcub2Zmc2V0TGVmdHx8MDtpZihHLm9mZnNldFBhcmVudD09ZG9jdW1lbnQuYm9keSl7aWYoRWxlbWVudC5nZXRTdHlsZShHLCJwb3NpdGlvbiIpPT0iYWJzb2x1dGUiKXticmVha319Rz1HLm9mZnNldFBhcmVudH13aGlsZShHKTtyZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KEgsRil9fX1FbGVtZW50LmFkZE1ldGhvZHMoe2dldExheW91dDp6LG1lYXN1cmU6ZCxnZXRXaWR0aDpjLGdldEhlaWdodDpxLGdldERpbWVuc2lvbnM6cyxnZXRPZmZzZXRQYXJlbnQ6cCxjdW11bGF0aXZlT2Zmc2V0OkMscG9zaXRpb25lZE9mZnNldDp3LGN1bXVsYXRpdmVTY3JvbGxPZmZzZXQ6Yix2aWV3cG9ydE9mZnNldDpBLGFic29sdXRpemU6eCxyZWxhdGl2aXplOmwsc2Nyb2xsVG86YSxtYWtlUG9zaXRpb25lZDp2LHVuZG9Qb3NpdGlvbmVkOnQsbWFrZUNsaXBwaW5nOmUsdW5kb0NsaXBwaW5nOkQsY2xvbmVQb3NpdGlvbjpFfSk7ZnVuY3Rpb24gbyhGKXtyZXR1cm4gRi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT09IkJPRFkifWZ1bmN0aW9uIG4oRil7cmV0dXJuIEYubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PSJIVE1MIn1mdW5jdGlvbiBoKEYpe3JldHVybiBGLm5vZGVUeXBlPT09Tm9kZS5ET0NVTUVOVF9OT0RFfWZ1bmN0aW9uIGYoRil7cmV0dXJuIEYhPT1kb2N1bWVudC5ib2R5JiYhRWxlbWVudC5kZXNjZW5kYW50T2YoRixkb2N1bWVudC5ib2R5KX1pZigiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpe0VsZW1lbnQuYWRkTWV0aG9kcyh7dmlld3BvcnRPZmZzZXQ6ZnVuY3Rpb24oRil7Rj0kKEYpO2lmKGYoRikpe3JldHVybiBuZXcgRWxlbWVudC5PZmZzZXQoMCwwKX12YXIgRz1GLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLEg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3JldHVybiBuZXcgRWxlbWVudC5PZmZzZXQoRy5sZWZ0LUguY2xpZW50TGVmdCxHLnRvcC1ILmNsaWVudFRvcCl9fSl9fSkoKTsoZnVuY3Rpb24oKXt2YXIgYz1Qcm90b3R5cGUuQnJvd3Nlci5PcGVyYSYmKHdpbmRvdy5wYXJzZUZsb2F0KHdpbmRvdy5vcGVyYS52ZXJzaW9uKCkpPDkuNSk7dmFyIGY9bnVsbDtmdW5jdGlvbiBiKCl7aWYoZil7cmV0dXJuIGZ9Zj1jP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3JldHVybiBmfWZ1bmN0aW9uIGQoKXtyZXR1cm57d2lkdGg6dGhpcy5nZXRXaWR0aCgpLGhlaWdodDp0aGlzLmdldEhlaWdodCgpfX1mdW5jdGlvbiBhKCl7cmV0dXJuIGIoKS5jbGllbnRXaWR0aH1mdW5jdGlvbiBnKCl7cmV0dXJuIGIoKS5jbGllbnRIZWlnaHR9ZnVuY3Rpb24gZSgpe3ZhciBoPXdpbmRvdy5wYWdlWE9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDt2YXIgaT13aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO3JldHVybiBuZXcgRWxlbWVudC5PZmZzZXQoaCxpKX1kb2N1bWVudC52aWV3cG9ydD17Z2V0RGltZW5zaW9uczpkLGdldFdpZHRoOmEsZ2V0SGVpZ2h0OmcsZ2V0U2Nyb2xsT2Zmc2V0czplfX0pKCk7d2luZG93LiQkPWZ1bmN0aW9uKCl7dmFyIGE9JEEoYXJndW1lbnRzKS5qb2luKCIsICIpO3JldHVybiBQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0KGEsZG9jdW1lbnQpfTtQcm90b3R5cGUuU2VsZWN0b3I9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3Rocm93IG5ldyBFcnJvcignTWV0aG9kICJQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0IiBtdXN0IGJlIGRlZmluZWQuJyl9ZnVuY3Rpb24gYygpe3Rocm93IG5ldyBFcnJvcignTWV0aG9kICJQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2giIG11c3QgYmUgZGVmaW5lZC4nKX1mdW5jdGlvbiBkKGwsbSxoKXtoPWh8fDA7dmFyIGc9UHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoLGs9bC5sZW5ndGgsZj0wLGo7Zm9yKGo9MDtqPGs7aisrKXtpZihnKGxbal0sbSkmJmg9PWYrKyl7cmV0dXJuIEVsZW1lbnQuZXh0ZW5kKGxbal0pfX19ZnVuY3Rpb24gZShoKXtmb3IodmFyIGY9MCxnPWgubGVuZ3RoO2Y8ZztmKyspe0VsZW1lbnQuZXh0ZW5kKGhbZl0pfXJldHVybiBofXZhciBiPVByb3RvdHlwZS5LO3JldHVybntzZWxlY3Q6YSxtYXRjaDpjLGZpbmQ6ZCxleHRlbmRFbGVtZW50czooRWxlbWVudC5leHRlbmQ9PT1iKT9iOmUsZXh0ZW5kRWxlbWVudDpFbGVtZW50LmV4dGVuZH19KSgpO1Byb3RvdHlwZS5fb3JpZ2luYWxfcHJvcGVydHk9d2luZG93LlNpenpsZTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe1Byb3RvdHlwZS5fYWN0dWFsX3NpenpsZT1iKCl9YS5hbWQ9dHJ1ZTtpZih0eXBlb2YgZGVmaW5lIT09InVuZGVmaW5lZCImJmRlZmluZS5hbWQpe1Byb3RvdHlwZS5fb3JpZ2luYWxfZGVmaW5lPWRlZmluZTtQcm90b3R5cGUuX2FjdHVhbF9zaXp6bGU9bnVsbDt3aW5kb3cuZGVmaW5lPWF9fSkoKTsKLyohCiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYxLjEwLjE4CiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCiAqCiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogRGF0ZTogMjAxNC0wMi0wNQogKi8KKGZ1bmN0aW9uKGF2KXt2YXIgRCxheSx0LE0sUCxhYixheCxhQyxOLGFjLGFlLEgsdSxhbixhaSxhdyxrLEssYXA9InNpenpsZSIrLShuZXcgRGF0ZSgpKSxPPWF2LmRvY3VtZW50LGF6PTAsYWo9MCxkPUYoKSxhbz1GKCksTD1GKCksSj1mdW5jdGlvbihpLGUpe2lmKGk9PT1lKXthYz10cnVlfXJldHVybiAwfSxhdT10eXBlb2YgdW5kZWZpbmVkLFY9MTw8MzEsVD0oe30pLmhhc093blByb3BlcnR5LGFyPVtdLGF0PWFyLnBvcCxSPWFyLnB1c2gsYj1hci5wdXNoLHM9YXIuc2xpY2Usaj1hci5pbmRleE9mfHxmdW5jdGlvbihhRSl7dmFyIGFEPTAsZT10aGlzLmxlbmd0aDtmb3IoO2FEPGU7YUQrKyl7aWYodGhpc1thRF09PT1hRSl7cmV0dXJuIGFEfX1yZXR1cm4gLTF9LGM9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIix2PSJbXFx4MjBcXHRcXHJcXG5cXGZdIixhPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsUT1hLnJlcGxhY2UoInciLCJ3IyIpLGFsPSJcXFsiK3YrIiooIithKyIpIit2KyIqKD86KFsqXiR8IX5dPz0pIit2KyIqKD86KFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcM3woIitRKyIpfCl8KSIrdisiKlxcXSIscT0iOigiK2ErIikoPzpcXCgoKFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcM3woKD86XFxcXC58W15cXFxcKClbXFxdXXwiK2FsLnJlcGxhY2UoMyw4KSsiKSopfC4qKVxcKXwpIix4PW5ldyBSZWdFeHAoIl4iK3YrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrdisiKyQiLCJnIiksQT1uZXcgUmVnRXhwKCJeIit2KyIqLCIrdisiKiIpLEc9bmV3IFJlZ0V4cCgiXiIrdisiKihbPit+XXwiK3YrIikiK3YrIioiKSx6PW5ldyBSZWdFeHAoIj0iK3YrIiooW15cXF0nXCJdKj8pIit2KyIqXFxdIiwiZyIpLFg9bmV3IFJlZ0V4cChxKSxaPW5ldyBSZWdFeHAoIl4iK1ErIiQiKSxhaD17SUQ6bmV3IFJlZ0V4cCgiXiMoIithKyIpIiksQ0xBU1M6bmV3IFJlZ0V4cCgiXlxcLigiK2ErIikiKSxUQUc6bmV3IFJlZ0V4cCgiXigiK2EucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK2FsKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrcSksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIit2KyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIit2KyIqKD86KFsrLV18KSIrdisiKihcXGQrKXwpKSIrdisiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrYysiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK3YrIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrdisiKigoPzotXFxkKT9cXGQqKSIrdisiKlxcKXwpKD89W14tXXwkKSIsImkiKX0saD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLHI9L15oXGQkL2ksVT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sVz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGFnPS9bK35dLyxTPS8nfFxcL2cseT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK3YrIj98KCIrdisiKXwuKSIsImlnIiksYWs9ZnVuY3Rpb24oZSxhRSxpKXt2YXIgYUQ9IjB4IithRS02NTUzNjtyZXR1cm4gYUQhPT1hRHx8aT9hRTphRDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoYUQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoYUQ+PjEwfDU1Mjk2LGFEJjEwMjN8NTYzMjApfTt0cnl7Yi5hcHBseSgoYXI9cy5jYWxsKE8uY2hpbGROb2RlcykpLE8uY2hpbGROb2Rlcyk7YXJbTy5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goSSl7Yj17YXBwbHk6YXIubGVuZ3RoP2Z1bmN0aW9uKGksZSl7Ui5hcHBseShpLHMuY2FsbChlKSl9OmZ1bmN0aW9uKGFGLGFFKXt2YXIgZT1hRi5sZW5ndGgsYUQ9MDt3aGlsZSgoYUZbZSsrXT1hRVthRCsrXSkpe31hRi5sZW5ndGg9ZS0xfX19ZnVuY3Rpb24gQihhSyxhRCxhTyxhUSl7dmFyIGFQLGFILGFJLGFNLGFOLGFHLGFGLGUsYUUsYUw7aWYoKGFEP2FELm93bmVyRG9jdW1lbnR8fGFEOk8pIT09SCl7YWUoYUQpfWFEPWFEfHxIO2FPPWFPfHxbXTtpZighYUt8fHR5cGVvZiBhSyE9PSJzdHJpbmciKXtyZXR1cm4gYU99aWYoKGFNPWFELm5vZGVUeXBlKSE9PTEmJmFNIT09OSl7cmV0dXJuW119aWYoYW4mJiFhUSl7aWYoKGFQPVcuZXhlYyhhSykpKXtpZigoYUk9YVBbMV0pKXtpZihhTT09PTkpe2FIPWFELmdldEVsZW1lbnRCeUlkKGFJKTtpZihhSCYmYUgucGFyZW50Tm9kZSl7aWYoYUguaWQ9PT1hSSl7YU8ucHVzaChhSCk7cmV0dXJuIGFPfX1lbHNle3JldHVybiBhT319ZWxzZXtpZihhRC5vd25lckRvY3VtZW50JiYoYUg9YUQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhSSkpJiZLKGFELGFIKSYmYUguaWQ9PT1hSSl7YU8ucHVzaChhSCk7cmV0dXJuIGFPfX19ZWxzZXtpZihhUFsyXSl7Yi5hcHBseShhTyxhRC5nZXRFbGVtZW50c0J5VGFnTmFtZShhSykpO3JldHVybiBhT31lbHNle2lmKChhST1hUFszXSkmJmF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmFELmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe2IuYXBwbHkoYU8sYUQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhSSkpO3JldHVybiBhT319fX1pZihheS5xc2EmJighYWl8fCFhaS50ZXN0KGFLKSkpe2U9YUY9YXA7YUU9YUQ7YUw9YU09PT05JiZhSztpZihhTT09PTEmJmFELm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ib2JqZWN0Iil7YUc9bihhSyk7aWYoKGFGPWFELmdldEF0dHJpYnV0ZSgiaWQiKSkpe2U9YUYucmVwbGFjZShTLCJcXCQmIil9ZWxzZXthRC5zZXRBdHRyaWJ1dGUoImlkIixlKX1lPSJbaWQ9JyIrZSsiJ10gIjthTj1hRy5sZW5ndGg7d2hpbGUoYU4tLSl7YUdbYU5dPWUrbyhhR1thTl0pfWFFPWFnLnRlc3QoYUspJiZZKGFELnBhcmVudE5vZGUpfHxhRDthTD1hRy5qb2luKCIsIil9aWYoYUwpe3RyeXtiLmFwcGx5KGFPLGFFLnF1ZXJ5U2VsZWN0b3JBbGwoYUwpKTtyZXR1cm4gYU99Y2F0Y2goYUope31maW5hbGx5e2lmKCFhRil7YUQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19fX1yZXR1cm4gYXgoYUsucmVwbGFjZSh4LCIkMSIpLGFELGFPLGFRKX1mdW5jdGlvbiBGKCl7dmFyIGk9W107ZnVuY3Rpb24gZShhRCxhRSl7aWYoaS5wdXNoKGFEKyIgIik+dC5jYWNoZUxlbmd0aCl7ZGVsZXRlIGVbaS5zaGlmdCgpXX1yZXR1cm4oZVthRCsiICJdPWFFKX1yZXR1cm4gZX1mdW5jdGlvbiBwKGUpe2VbYXBdPXRydWU7cmV0dXJuIGV9ZnVuY3Rpb24gbChpKXt2YXIgYUU9SC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuICEhaShhRSl9Y2F0Y2goYUQpe3JldHVybiBmYWxzZX1maW5hbGx5e2lmKGFFLnBhcmVudE5vZGUpe2FFLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYUUpfWFFPW51bGx9fWZ1bmN0aW9uIGFBKGFELGFGKXt2YXIgZT1hRC5zcGxpdCgifCIpLGFFPWFELmxlbmd0aDt3aGlsZShhRS0tKXt0LmF0dHJIYW5kbGVbZVthRV1dPWFGfX1mdW5jdGlvbiBmKGksZSl7dmFyIGFFPWUmJmksYUQ9YUUmJmkubm9kZVR5cGU9PT0xJiZlLm5vZGVUeXBlPT09MSYmKH5lLnNvdXJjZUluZGV4fHxWKS0ofmkuc291cmNlSW5kZXh8fFYpO2lmKGFEKXtyZXR1cm4gYUR9aWYoYUUpe3doaWxlKChhRT1hRS5uZXh0U2libGluZykpe2lmKGFFPT09ZSl7cmV0dXJuIC0xfX19cmV0dXJuIGk/MTotMX1mdW5jdGlvbiBDKGUpe3JldHVybiBmdW5jdGlvbihhRCl7dmFyIGk9YUQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gaT09PSJpbnB1dCImJmFELnR5cGU9PT1lfX1mdW5jdGlvbiBnKGUpe3JldHVybiBmdW5jdGlvbihhRCl7dmFyIGk9YUQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oaT09PSJpbnB1dCJ8fGk9PT0iYnV0dG9uIikmJmFELnR5cGU9PT1lfX1mdW5jdGlvbiBhbShlKXtyZXR1cm4gcChmdW5jdGlvbihpKXtpPStpO3JldHVybiBwKGZ1bmN0aW9uKGFELGFIKXt2YXIgYUYsYUU9ZShbXSxhRC5sZW5ndGgsaSksYUc9YUUubGVuZ3RoO3doaWxlKGFHLS0pe2lmKGFEWyhhRj1hRVthR10pXSl7YURbYUZdPSEoYUhbYUZdPWFEW2FGXSl9fX0pfSl9ZnVuY3Rpb24gWShlKXtyZXR1cm4gZSYmdHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1hdSYmZX1heT1CLnN1cHBvcnQ9e307UD1CLmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciBpPWUmJihlLm93bmVyRG9jdW1lbnR8fGUpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gaT9pLm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlfTthZT1CLnNldERvY3VtZW50PWZ1bmN0aW9uKGFEKXt2YXIgZSxhRT1hRD9hRC5vd25lckRvY3VtZW50fHxhRDpPLGk9YUUuZGVmYXVsdFZpZXc7aWYoYUU9PT1IfHxhRS5ub2RlVHlwZSE9PTl8fCFhRS5kb2N1bWVudEVsZW1lbnQpe3JldHVybiBIfUg9YUU7dT1hRS5kb2N1bWVudEVsZW1lbnQ7YW49IVAoYUUpO2lmKGkmJmkhPT1pLnRvcCl7aWYoaS5hZGRFdmVudExpc3RlbmVyKXtpLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZnVuY3Rpb24oKXthZSgpfSxmYWxzZSl9ZWxzZXtpZihpLmF0dGFjaEV2ZW50KXtpLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZnVuY3Rpb24oKXthZSgpfSl9fX1heS5hdHRyaWJ1dGVzPWwoZnVuY3Rpb24oYUYpe2FGLmNsYXNzTmFtZT0iaSI7cmV0dXJuICFhRi5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSk7YXkuZ2V0RWxlbWVudHNCeVRhZ05hbWU9bChmdW5jdGlvbihhRil7YUYuYXBwZW5kQ2hpbGQoYUUuY3JlYXRlQ29tbWVudCgiIikpO3JldHVybiAhYUYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KTtheS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVUudGVzdChhRS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSYmbChmdW5jdGlvbihhRil7YUYuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PiI7YUYuZmlyc3RDaGlsZC5jbGFzc05hbWU9ImkiO3JldHVybiBhRi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RoPT09Mn0pO2F5LmdldEJ5SWQ9bChmdW5jdGlvbihhRil7dS5hcHBlbmRDaGlsZChhRikuaWQ9YXA7cmV0dXJuICFhRS5nZXRFbGVtZW50c0J5TmFtZXx8IWFFLmdldEVsZW1lbnRzQnlOYW1lKGFwKS5sZW5ndGh9KTtpZihheS5nZXRCeUlkKXt0LmZpbmQuSUQ9ZnVuY3Rpb24oYUgsYUcpe2lmKHR5cGVvZiBhRy5nZXRFbGVtZW50QnlJZCE9PWF1JiZhbil7dmFyIGFGPWFHLmdldEVsZW1lbnRCeUlkKGFIKTtyZXR1cm4gYUYmJmFGLnBhcmVudE5vZGU/W2FGXTpbXX19O3QuZmlsdGVyLklEPWZ1bmN0aW9uKGFHKXt2YXIgYUY9YUcucmVwbGFjZSh5LGFrKTtyZXR1cm4gZnVuY3Rpb24oYUgpe3JldHVybiBhSC5nZXRBdHRyaWJ1dGUoImlkIik9PT1hRn19fWVsc2V7ZGVsZXRlIHQuZmluZC5JRDt0LmZpbHRlci5JRD1mdW5jdGlvbihhRyl7dmFyIGFGPWFHLnJlcGxhY2UoeSxhayk7cmV0dXJuIGZ1bmN0aW9uKGFJKXt2YXIgYUg9dHlwZW9mIGFJLmdldEF0dHJpYnV0ZU5vZGUhPT1hdSYmYUkuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYUgmJmFILnZhbHVlPT09YUZ9fX10LmZpbmQuVEFHPWF5LmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGFGLGFHKXtpZih0eXBlb2YgYUcuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1hdSl7cmV0dXJuIGFHLmdldEVsZW1lbnRzQnlUYWdOYW1lKGFGKX19OmZ1bmN0aW9uKGFGLGFKKXt2YXIgYUssYUk9W10sYUg9MCxhRz1hSi5nZXRFbGVtZW50c0J5VGFnTmFtZShhRik7aWYoYUY9PT0iKiIpe3doaWxlKChhSz1hR1thSCsrXSkpe2lmKGFLLm5vZGVUeXBlPT09MSl7YUkucHVzaChhSyl9fXJldHVybiBhSX1yZXR1cm4gYUd9O3QuZmluZC5DTEFTUz1heS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhRyxhRil7aWYodHlwZW9mIGFGLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1hdSYmYW4pe3JldHVybiBhRi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGFHKX19O2F3PVtdO2FpPVtdO2lmKChheS5xc2E9VS50ZXN0KGFFLnF1ZXJ5U2VsZWN0b3JBbGwpKSl7bChmdW5jdGlvbihhRil7YUYuaW5uZXJIVE1MPSI8c2VsZWN0IHQ9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iO2lmKGFGLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0Xj0nJ10iKS5sZW5ndGgpe2FpLnB1c2goIlsqXiRdPSIrdisiKig/OicnfFwiXCIpIil9aWYoIWFGLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGgpe2FpLnB1c2goIlxcWyIrdisiKig/OnZhbHVlfCIrYysiKSIpfWlmKCFhRi5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aCl7YWkucHVzaCgiOmNoZWNrZWQiKX19KTtsKGZ1bmN0aW9uKGFHKXt2YXIgYUY9YUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthRi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKTthRy5hcHBlbmRDaGlsZChhRikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpO2lmKGFHLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoKXthaS5wdXNoKCJuYW1lIit2KyIqWypeJHwhfl0/PSIpfWlmKCFhRy5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCl7YWkucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKX1hRy5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4Iik7YWkucHVzaCgiLC4qOiIpfSl9aWYoKGF5Lm1hdGNoZXNTZWxlY3Rvcj1VLnRlc3QoKGs9dS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHUubW96TWF0Y2hlc1NlbGVjdG9yfHx1Lm9NYXRjaGVzU2VsZWN0b3J8fHUubXNNYXRjaGVzU2VsZWN0b3IpKSkpe2woZnVuY3Rpb24oYUYpe2F5LmRpc2Nvbm5lY3RlZE1hdGNoPWsuY2FsbChhRiwiZGl2Iik7ay5jYWxsKGFGLCJbcyE9JyddOngiKTthdy5wdXNoKCIhPSIscSl9KX1haT1haS5sZW5ndGgmJm5ldyBSZWdFeHAoYWkuam9pbigifCIpKTthdz1hdy5sZW5ndGgmJm5ldyBSZWdFeHAoYXcuam9pbigifCIpKTtlPVUudGVzdCh1LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKTtLPWV8fFUudGVzdCh1LmNvbnRhaW5zKT9mdW5jdGlvbihhRyxhRil7dmFyIGFJPWFHLm5vZGVUeXBlPT09OT9hRy5kb2N1bWVudEVsZW1lbnQ6YUcsYUg9YUYmJmFGLnBhcmVudE5vZGU7cmV0dXJuIGFHPT09YUh8fCEhKGFIJiZhSC5ub2RlVHlwZT09PTEmJihhSS5jb250YWlucz9hSS5jb250YWlucyhhSCk6YUcuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmFHLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGFIKSYxNikpfTpmdW5jdGlvbihhRyxhRil7aWYoYUYpe3doaWxlKChhRj1hRi5wYXJlbnROb2RlKSl7aWYoYUY9PT1hRyl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9O0o9ZT9mdW5jdGlvbihhRyxhRil7aWYoYUc9PT1hRil7YWM9dHJ1ZTtyZXR1cm4gMH12YXIgYUg9IWFHLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFhRi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtpZihhSCl7cmV0dXJuIGFIfWFIPShhRy5vd25lckRvY3VtZW50fHxhRyk9PT0oYUYub3duZXJEb2N1bWVudHx8YUYpP2FHLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGFGKToxO2lmKGFIJjF8fCghYXkuc29ydERldGFjaGVkJiZhRi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhRyk9PT1hSCkpe2lmKGFHPT09YUV8fGFHLm93bmVyRG9jdW1lbnQ9PT1PJiZLKE8sYUcpKXtyZXR1cm4gLTF9aWYoYUY9PT1hRXx8YUYub3duZXJEb2N1bWVudD09PU8mJksoTyxhRikpe3JldHVybiAxfXJldHVybiBOPyhqLmNhbGwoTixhRyktai5jYWxsKE4sYUYpKTowfXJldHVybiBhSCY0Py0xOjF9OmZ1bmN0aW9uKGFHLGFGKXtpZihhRz09PWFGKXthYz10cnVlO3JldHVybiAwfXZhciBhTSxhSj0wLGFMPWFHLnBhcmVudE5vZGUsYUk9YUYucGFyZW50Tm9kZSxhSD1bYUddLGFLPVthRl07aWYoIWFMfHwhYUkpe3JldHVybiBhRz09PWFFPy0xOmFGPT09YUU/MTphTD8tMTphST8xOk4/KGouY2FsbChOLGFHKS1qLmNhbGwoTixhRikpOjB9ZWxzZXtpZihhTD09PWFJKXtyZXR1cm4gZihhRyxhRil9fWFNPWFHO3doaWxlKChhTT1hTS5wYXJlbnROb2RlKSl7YUgudW5zaGlmdChhTSl9YU09YUY7d2hpbGUoKGFNPWFNLnBhcmVudE5vZGUpKXthSy51bnNoaWZ0KGFNKX13aGlsZShhSFthSl09PT1hS1thSl0pe2FKKyt9cmV0dXJuIGFKP2YoYUhbYUpdLGFLW2FKXSk6YUhbYUpdPT09Tz8tMTphS1thSl09PT1PPzE6MH07cmV0dXJuIGFFfTtCLm1hdGNoZXM9ZnVuY3Rpb24oaSxlKXtyZXR1cm4gQihpLG51bGwsbnVsbCxlKX07Qi5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYUQsYUYpe2lmKChhRC5vd25lckRvY3VtZW50fHxhRCkhPT1IKXthZShhRCl9YUY9YUYucmVwbGFjZSh6LCI9JyQxJ10iKTtpZihheS5tYXRjaGVzU2VsZWN0b3ImJmFuJiYoIWF3fHwhYXcudGVzdChhRikpJiYoIWFpfHwhYWkudGVzdChhRikpKXt0cnl7dmFyIGk9ay5jYWxsKGFELGFGKTtpZihpfHxheS5kaXNjb25uZWN0ZWRNYXRjaHx8YUQuZG9jdW1lbnQmJmFELmRvY3VtZW50Lm5vZGVUeXBlIT09MTEpe3JldHVybiBpfX1jYXRjaChhRSl7fX1yZXR1cm4gQihhRixILG51bGwsW2FEXSkubGVuZ3RoPjB9O0IuY29udGFpbnM9ZnVuY3Rpb24oZSxpKXtpZigoZS5vd25lckRvY3VtZW50fHxlKSE9PUgpe2FlKGUpfXJldHVybiBLKGUsaSl9O0IuYXR0cj1mdW5jdGlvbihhRCxlKXtpZigoYUQub3duZXJEb2N1bWVudHx8YUQpIT09SCl7YWUoYUQpfXZhciBpPXQuYXR0ckhhbmRsZVtlLnRvTG93ZXJDYXNlKCldLGFFPWkmJlQuY2FsbCh0LmF0dHJIYW5kbGUsZS50b0xvd2VyQ2FzZSgpKT9pKGFELGUsIWFuKTp1bmRlZmluZWQ7cmV0dXJuIGFFIT09dW5kZWZpbmVkP2FFOmF5LmF0dHJpYnV0ZXN8fCFhbj9hRC5nZXRBdHRyaWJ1dGUoZSk6KGFFPWFELmdldEF0dHJpYnV0ZU5vZGUoZSkpJiZhRS5zcGVjaWZpZWQ/YUUudmFsdWU6bnVsbH07Qi5lcnJvcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9O0IudW5pcXVlU29ydD1mdW5jdGlvbihhRSl7dmFyIGFGLGFHPVtdLGU9MCxhRD0wO2FjPSFheS5kZXRlY3REdXBsaWNhdGVzO049IWF5LnNvcnRTdGFibGUmJmFFLnNsaWNlKDApO2FFLnNvcnQoSik7aWYoYWMpe3doaWxlKChhRj1hRVthRCsrXSkpe2lmKGFGPT09YUVbYURdKXtlPWFHLnB1c2goYUQpfX13aGlsZShlLS0pe2FFLnNwbGljZShhR1tlXSwxKX19Tj1udWxsO3JldHVybiBhRX07TT1CLmdldFRleHQ9ZnVuY3Rpb24oYUcpe3ZhciBhRixhRD0iIixhRT0wLGU9YUcubm9kZVR5cGU7aWYoIWUpe3doaWxlKChhRj1hR1thRSsrXSkpe2FEKz1NKGFGKX19ZWxzZXtpZihlPT09MXx8ZT09PTl8fGU9PT0xMSl7aWYodHlwZW9mIGFHLnRleHRDb250ZW50PT09InN0cmluZyIpe3JldHVybiBhRy50ZXh0Q29udGVudH1lbHNle2ZvcihhRz1hRy5maXJzdENoaWxkO2FHO2FHPWFHLm5leHRTaWJsaW5nKXthRCs9TShhRyl9fX1lbHNle2lmKGU9PT0zfHxlPT09NCl7cmV0dXJuIGFHLm5vZGVWYWx1ZX19fXJldHVybiBhRH07dD1CLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOnAsbWF0Y2g6YWgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6dHJ1ZX0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDp0cnVlfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihlKXtlWzFdPWVbMV0ucmVwbGFjZSh5LGFrKTtlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh5LGFrKTtpZihlWzJdPT09In49Iil7ZVszXT0iICIrZVszXSsiICJ9cmV0dXJuIGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7ZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCk7aWYoZVsxXS5zbGljZSgwLDMpPT09Im50aCIpe2lmKCFlWzNdKXtCLmVycm9yKGVbMF0pfWVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKGVbM109PT0iZXZlbiJ8fGVbM109PT0ib2RkIikpO2VbNV09KygoZVs3XStlWzhdKXx8ZVszXT09PSJvZGQiKX1lbHNle2lmKGVbM10pe0IuZXJyb3IoZVswXSl9fXJldHVybiBlfSxQU0VVRE86ZnVuY3Rpb24oaSl7dmFyIGUsYUQ9IWlbNV0mJmlbMl07aWYoYWguQ0hJTEQudGVzdChpWzBdKSl7cmV0dXJuIG51bGx9aWYoaVszXSYmaVs0XSE9PXVuZGVmaW5lZCl7aVsyXT1pWzRdfWVsc2V7aWYoYUQmJlgudGVzdChhRCkmJihlPW4oYUQsdHJ1ZSkpJiYoZT1hRC5pbmRleE9mKCIpIixhRC5sZW5ndGgtZSktYUQubGVuZ3RoKSl7aVswXT1pWzBdLnNsaWNlKDAsZSk7aVsyXT1hRC5zbGljZSgwLGUpfX1yZXR1cm4gaS5zbGljZSgwLDMpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oaSl7dmFyIGU9aS5yZXBsYWNlKHksYWspLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGk9PT0iKiI/ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX06ZnVuY3Rpb24oYUQpe3JldHVybiBhRC5ub2RlTmFtZSYmYUQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWV9fSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgaT1kW2UrIiAiXTtyZXR1cm4gaXx8KGk9bmV3IFJlZ0V4cCgiKF58Iit2KyIpIitlKyIoIit2KyJ8JCkiKSkmJmQoZSxmdW5jdGlvbihhRCl7cmV0dXJuIGkudGVzdCh0eXBlb2YgYUQuY2xhc3NOYW1lPT09InN0cmluZyImJmFELmNsYXNzTmFtZXx8dHlwZW9mIGFELmdldEF0dHJpYnV0ZSE9PWF1JiZhRC5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGFELGksZSl7cmV0dXJuIGZ1bmN0aW9uKGFGKXt2YXIgYUU9Qi5hdHRyKGFGLGFEKTtpZihhRT09bnVsbCl7cmV0dXJuIGk9PT0iIT0ifWlmKCFpKXtyZXR1cm4gdHJ1ZX1hRSs9IiI7cmV0dXJuIGk9PT0iPSI/YUU9PT1lOmk9PT0iIT0iP2FFIT09ZTppPT09Il49Ij9lJiZhRS5pbmRleE9mKGUpPT09MDppPT09Iio9Ij9lJiZhRS5pbmRleE9mKGUpPi0xOmk9PT0iJD0iP2UmJmFFLnNsaWNlKC1lLmxlbmd0aCk9PT1lOmk9PT0ifj0iPygiICIrYUUrIiAiKS5pbmRleE9mKGUpPi0xOmk9PT0ifD0iP2FFPT09ZXx8YUUuc2xpY2UoMCxlLmxlbmd0aCsxKT09PWUrIi0iOmZhbHNlfX0sQ0hJTEQ6ZnVuY3Rpb24oaSxhRixhRSxhRyxhRCl7dmFyIGFJPWkuc2xpY2UoMCwzKSE9PSJudGgiLGU9aS5zbGljZSgtNCkhPT0ibGFzdCIsYUg9YUY9PT0ib2YtdHlwZSI7cmV0dXJuIGFHPT09MSYmYUQ9PT0wP2Z1bmN0aW9uKGFKKXtyZXR1cm4gISFhSi5wYXJlbnROb2RlfTpmdW5jdGlvbihhUCxhTixhUyl7dmFyIGFKLGFWLGFRLGFVLGFSLGFNLGFPPWFJIT09ZT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLGFUPWFQLnBhcmVudE5vZGUsYUw9YUgmJmFQLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksYUs9IWFTJiYhYUg7aWYoYVQpe2lmKGFJKXt3aGlsZShhTyl7YVE9YVA7d2hpbGUoKGFRPWFRW2FPXSkpe2lmKGFIP2FRLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1hTDphUS5ub2RlVHlwZT09PTEpe3JldHVybiBmYWxzZX19YU09YU89aT09PSJvbmx5IiYmIWFNJiYibmV4dFNpYmxpbmcifXJldHVybiB0cnVlfWFNPVtlP2FULmZpcnN0Q2hpbGQ6YVQubGFzdENoaWxkXTtpZihlJiZhSyl7YVY9YVRbYXBdfHwoYVRbYXBdPXt9KTthSj1hVltpXXx8W107YVI9YUpbMF09PT1heiYmYUpbMV07YVU9YUpbMF09PT1heiYmYUpbMl07YVE9YVImJmFULmNoaWxkTm9kZXNbYVJdO3doaWxlKChhUT0rK2FSJiZhUSYmYVFbYU9dfHwoYVU9YVI9MCl8fGFNLnBvcCgpKSl7aWYoYVEubm9kZVR5cGU9PT0xJiYrK2FVJiZhUT09PWFQKXthVltpXT1bYXosYVIsYVVdO2JyZWFrfX19ZWxzZXtpZihhSyYmKGFKPShhUFthcF18fChhUFthcF09e30pKVtpXSkmJmFKWzBdPT09YXope2FVPWFKWzFdfWVsc2V7d2hpbGUoKGFRPSsrYVImJmFRJiZhUVthT118fChhVT1hUj0wKXx8YU0ucG9wKCkpKXtpZigoYUg/YVEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWFMOmFRLm5vZGVUeXBlPT09MSkmJisrYVUpe2lmKGFLKXsoYVFbYXBdfHwoYVFbYXBdPXt9KSlbaV09W2F6LGFVXX1pZihhUT09PWFQKXticmVha319fX19YVUtPWFEO3JldHVybiBhVT09PWFHfHwoYVUlYUc9PT0wJiZhVS9hRz49MCl9fX0sUFNFVURPOmZ1bmN0aW9uKGFFLGFEKXt2YXIgZSxpPXQucHNldWRvc1thRV18fHQuc2V0RmlsdGVyc1thRS50b0xvd2VyQ2FzZSgpXXx8Qi5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2FFKTtpZihpW2FwXSl7cmV0dXJuIGkoYUQpfWlmKGkubGVuZ3RoPjEpe2U9W2FFLGFFLCIiLGFEXTtyZXR1cm4gdC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGFFLnRvTG93ZXJDYXNlKCkpP3AoZnVuY3Rpb24oYUgsYUope3ZhciBhRyxhRj1pKGFILGFEKSxhST1hRi5sZW5ndGg7d2hpbGUoYUktLSl7YUc9ai5jYWxsKGFILGFGW2FJXSk7YUhbYUddPSEoYUpbYUddPWFGW2FJXSl9fSk6ZnVuY3Rpb24oYUYpe3JldHVybiBpKGFGLDAsZSl9fXJldHVybiBpfX0scHNldWRvczp7bm90OnAoZnVuY3Rpb24oZSl7dmFyIGk9W10sYUQ9W10sYUU9YWIoZS5yZXBsYWNlKHgsIiQxIikpO3JldHVybiBhRVthcF0/cChmdW5jdGlvbihhRyxhTCxhSixhSCl7dmFyIGFLLGFGPWFFKGFHLG51bGwsYUgsW10pLGFJPWFHLmxlbmd0aDt3aGlsZShhSS0tKXtpZigoYUs9YUZbYUldKSl7YUdbYUldPSEoYUxbYUldPWFLKX19fSk6ZnVuY3Rpb24oYUgsYUcsYUYpe2lbMF09YUg7YUUoaSxudWxsLGFGLGFEKTtyZXR1cm4gIWFELnBvcCgpfX0pLGhhczpwKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4gQihlLGkpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOnAoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybihpLnRleHRDb250ZW50fHxpLmlubmVyVGV4dHx8TShpKSkuaW5kZXhPZihlKT4tMX19KSxsYW5nOnAoZnVuY3Rpb24oZSl7aWYoIVoudGVzdChlfHwiIikpe0IuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSl9ZT1lLnJlcGxhY2UoeSxhaykudG9Mb3dlckNhc2UoKTtyZXR1cm4gZnVuY3Rpb24oYUQpe3ZhciBpO2Rve2lmKChpPWFuP2FELmxhbmc6YUQuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxhRC5nZXRBdHRyaWJ1dGUoImxhbmciKSkpe2k9aS50b0xvd2VyQ2FzZSgpO3JldHVybiBpPT09ZXx8aS5pbmRleE9mKGUrIi0iKT09PTB9fXdoaWxlKChhRD1hRC5wYXJlbnROb2RlKSYmYUQubm9kZVR5cGU9PT0xKTtyZXR1cm4gZmFsc2V9fSksdGFyZ2V0OmZ1bmN0aW9uKGUpe3ZhciBpPWF2LmxvY2F0aW9uJiZhdi5sb2NhdGlvbi5oYXNoO3JldHVybiBpJiZpLnNsaWNlKDEpPT09ZS5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXV9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09SC5hY3RpdmVFbGVtZW50JiYoIUguaGFzRm9jdXN8fEguaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT1mYWxzZX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT10cnVlfSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciBpPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oaT09PSJpbnB1dCImJiEhZS5jaGVja2VkKXx8KGk9PT0ib3B0aW9uIiYmISFlLnNlbGVjdGVkKX0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7aWYoZS5wYXJlbnROb2RlKXtlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleH1yZXR1cm4gZS5zZWxlY3RlZD09PXRydWV9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyl7aWYoZS5ub2RlVHlwZTw2KXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSxwYXJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuICF0LnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gci50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gaC50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oaSl7dmFyIGU9aS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBlPT09ImlucHV0IiYmaS50eXBlPT09ImJ1dHRvbiJ8fGU9PT0iYnV0dG9uIn0sdGV4dDpmdW5jdGlvbihpKXt2YXIgZTtyZXR1cm4gaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmaS50eXBlPT09InRleHQiJiYoKGU9aS5nZXRBdHRyaWJ1dGUoInR5cGUiKSk9PW51bGx8fGUudG9Mb3dlckNhc2UoKT09PSJ0ZXh0Iil9LGZpcnN0OmFtKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDphbShmdW5jdGlvbihlLGkpe3JldHVybltpLTFdfSksZXE6YW0oZnVuY3Rpb24oZSxhRCxpKXtyZXR1cm5baTwwP2krYUQ6aV19KSxldmVuOmFtKGZ1bmN0aW9uKGUsYUUpe3ZhciBhRD0wO2Zvcig7YUQ8YUU7YUQrPTIpe2UucHVzaChhRCl9cmV0dXJuIGV9KSxvZGQ6YW0oZnVuY3Rpb24oZSxhRSl7dmFyIGFEPTE7Zm9yKDthRDxhRTthRCs9Mil7ZS5wdXNoKGFEKX1yZXR1cm4gZX0pLGx0OmFtKGZ1bmN0aW9uKGUsYUYsYUUpe3ZhciBhRD1hRTwwP2FFK2FGOmFFO2Zvcig7LS1hRD49MDspe2UucHVzaChhRCl9cmV0dXJuIGV9KSxndDphbShmdW5jdGlvbihlLGFGLGFFKXt2YXIgYUQ9YUU8MD9hRSthRjphRTtmb3IoOysrYUQ8YUY7KXtlLnB1c2goYUQpfXJldHVybiBlfSl9fTt0LnBzZXVkb3MubnRoPXQucHNldWRvcy5lcTtmb3IoRCBpbiB7cmFkaW86dHJ1ZSxjaGVja2JveDp0cnVlLGZpbGU6dHJ1ZSxwYXNzd29yZDp0cnVlLGltYWdlOnRydWV9KXt0LnBzZXVkb3NbRF09QyhEKX1mb3IoRCBpbiB7c3VibWl0OnRydWUscmVzZXQ6dHJ1ZX0pe3QucHNldWRvc1tEXT1nKEQpfWZ1bmN0aW9uIGFhKCl7fWFhLnByb3RvdHlwZT10LmZpbHRlcnM9dC5wc2V1ZG9zO3Quc2V0RmlsdGVycz1uZXcgYWEoKTtmdW5jdGlvbiBuKGFGLGFLKXt2YXIgaSxhRyxhSSxhSixhSCxhRCxlLGFFPWFvW2FGKyIgIl07aWYoYUUpe3JldHVybiBhSz8wOmFFLnNsaWNlKDApfWFIPWFGO2FEPVtdO2U9dC5wcmVGaWx0ZXI7d2hpbGUoYUgpe2lmKCFpfHwoYUc9QS5leGVjKGFIKSkpe2lmKGFHKXthSD1hSC5zbGljZShhR1swXS5sZW5ndGgpfHxhSH1hRC5wdXNoKChhST1bXSkpfWk9ZmFsc2U7aWYoKGFHPUcuZXhlYyhhSCkpKXtpPWFHLnNoaWZ0KCk7YUkucHVzaCh7dmFsdWU6aSx0eXBlOmFHWzBdLnJlcGxhY2UoeCwiICIpfSk7YUg9YUguc2xpY2UoaS5sZW5ndGgpfWZvcihhSiBpbiB0LmZpbHRlcil7aWYoKGFHPWFoW2FKXS5leGVjKGFIKSkmJighZVthSl18fChhRz1lW2FKXShhRykpKSl7aT1hRy5zaGlmdCgpO2FJLnB1c2goe3ZhbHVlOmksdHlwZTphSixtYXRjaGVzOmFHfSk7YUg9YUguc2xpY2UoaS5sZW5ndGgpfX1pZighaSl7YnJlYWt9fXJldHVybiBhSz9hSC5sZW5ndGg6YUg/Qi5lcnJvcihhRik6YW8oYUYsYUQpLnNsaWNlKDApfWZ1bmN0aW9uIG8oYUYpe3ZhciBhRT0wLGFEPWFGLmxlbmd0aCxlPSIiO2Zvcig7YUU8YUQ7YUUrKyl7ZSs9YUZbYUVdLnZhbHVlfXJldHVybiBlfWZ1bmN0aW9uIHcoYUYsYUQsYUUpe3ZhciBlPWFELmRpcixhRz1hRSYmZT09PSJwYXJlbnROb2RlIixpPWFqKys7cmV0dXJuIGFELmZpcnN0P2Z1bmN0aW9uKGFKLGFJLGFIKXt3aGlsZSgoYUo9YUpbZV0pKXtpZihhSi5ub2RlVHlwZT09PTF8fGFHKXtyZXR1cm4gYUYoYUosYUksYUgpfX19OmZ1bmN0aW9uKGFMLGFKLGFJKXt2YXIgYU0sYUssYUg9W2F6LGldO2lmKGFJKXt3aGlsZSgoYUw9YUxbZV0pKXtpZihhTC5ub2RlVHlwZT09PTF8fGFHKXtpZihhRihhTCxhSixhSSkpe3JldHVybiB0cnVlfX19fWVsc2V7d2hpbGUoKGFMPWFMW2VdKSl7aWYoYUwubm9kZVR5cGU9PT0xfHxhRyl7YUs9YUxbYXBdfHwoYUxbYXBdPXt9KTtpZigoYU09YUtbZV0pJiZhTVswXT09PWF6JiZhTVsxXT09PWkpe3JldHVybihhSFsyXT1hTVsyXSl9ZWxzZXthS1tlXT1hSDtpZigoYUhbMl09YUYoYUwsYUosYUkpKSl7cmV0dXJuIHRydWV9fX19fX19ZnVuY3Rpb24gYUIoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24oYUcsYUYsYUQpe3ZhciBhRT1lLmxlbmd0aDt3aGlsZShhRS0tKXtpZighZVthRV0oYUcsYUYsYUQpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTplWzBdfWZ1bmN0aW9uIEUoYUQsYUcsYUYpe3ZhciBhRT0wLGU9YUcubGVuZ3RoO2Zvcig7YUU8ZTthRSsrKXtCKGFELGFHW2FFXSxhRil9cmV0dXJuIGFGfWZ1bmN0aW9uIGFmKGUsYUQsYUUsYUYsYUkpe3ZhciBhRyxhTD1bXSxhSD0wLGFKPWUubGVuZ3RoLGFLPWFEIT1udWxsO2Zvcig7YUg8YUo7YUgrKyl7aWYoKGFHPWVbYUhdKSl7aWYoIWFFfHxhRShhRyxhRixhSSkpe2FMLnB1c2goYUcpO2lmKGFLKXthRC5wdXNoKGFIKX19fX1yZXR1cm4gYUx9ZnVuY3Rpb24gbShhRCxpLGFGLGFFLGFHLGUpe2lmKGFFJiYhYUVbYXBdKXthRT1tKGFFKX1pZihhRyYmIWFHW2FwXSl7YUc9bShhRyxlKX1yZXR1cm4gcChmdW5jdGlvbihhUixhTyxhSixhUSl7dmFyIGFULGFQLGFMLGFLPVtdLGFTPVtdLGFJPWFPLmxlbmd0aCxhSD1hUnx8RShpfHwiKiIsYUoubm9kZVR5cGU/W2FKXTphSixbXSksYU09YUQmJihhUnx8IWkpP2FmKGFILGFLLGFELGFKLGFRKTphSCxhTj1hRj9hR3x8KGFSP2FEOmFJfHxhRSk/W106YU86YU07aWYoYUYpe2FGKGFNLGFOLGFKLGFRKX1pZihhRSl7YVQ9YWYoYU4sYVMpO2FFKGFULFtdLGFKLGFRKTthUD1hVC5sZW5ndGg7d2hpbGUoYVAtLSl7aWYoKGFMPWFUW2FQXSkpe2FOW2FTW2FQXV09IShhTVthU1thUF1dPWFMKX19fWlmKGFSKXtpZihhR3x8YUQpe2lmKGFHKXthVD1bXTthUD1hTi5sZW5ndGg7d2hpbGUoYVAtLSl7aWYoKGFMPWFOW2FQXSkpe2FULnB1c2goKGFNW2FQXT1hTCkpfX1hRyhudWxsLChhTj1bXSksYVQsYVEpfWFQPWFOLmxlbmd0aDt3aGlsZShhUC0tKXtpZigoYUw9YU5bYVBdKSYmKGFUPWFHP2ouY2FsbChhUixhTCk6YUtbYVBdKT4tMSl7YVJbYVRdPSEoYU9bYVRdPWFMKX19fX1lbHNle2FOPWFmKGFOPT09YU8/YU4uc3BsaWNlKGFJLGFOLmxlbmd0aCk6YU4pO2lmKGFHKXthRyhudWxsLGFPLGFOLGFRKX1lbHNle2IuYXBwbHkoYU8sYU4pfX19KX1mdW5jdGlvbiBhcShhSSl7dmFyIGFELGFHLGFFLGFIPWFJLmxlbmd0aCxhTD10LnJlbGF0aXZlW2FJWzBdLnR5cGVdLGFNPWFMfHx0LnJlbGF0aXZlWyIgIl0sYUY9YUw/MTowLGFKPXcoZnVuY3Rpb24oaSl7cmV0dXJuIGk9PT1hRH0sYU0sdHJ1ZSksYUs9dyhmdW5jdGlvbihpKXtyZXR1cm4gai5jYWxsKGFELGkpPi0xfSxhTSx0cnVlKSxlPVtmdW5jdGlvbihhTyxhTixpKXtyZXR1cm4oIWFMJiYoaXx8YU4hPT1hQykpfHwoKGFEPWFOKS5ub2RlVHlwZT9hSihhTyxhTixpKTphSyhhTyxhTixpKSl9XTtmb3IoO2FGPGFIO2FGKyspe2lmKChhRz10LnJlbGF0aXZlW2FJW2FGXS50eXBlXSkpe2U9W3coYUIoZSksYUcpXX1lbHNle2FHPXQuZmlsdGVyW2FJW2FGXS50eXBlXS5hcHBseShudWxsLGFJW2FGXS5tYXRjaGVzKTtpZihhR1thcF0pe2FFPSsrYUY7Zm9yKDthRTxhSDthRSsrKXtpZih0LnJlbGF0aXZlW2FJW2FFXS50eXBlXSl7YnJlYWt9fXJldHVybiBtKGFGPjEmJmFCKGUpLGFGPjEmJm8oYUkuc2xpY2UoMCxhRi0xKS5jb25jYXQoe3ZhbHVlOmFJW2FGLTJdLnR5cGU9PT0iICI/IioiOiIifSkpLnJlcGxhY2UoeCwiJDEiKSxhRyxhRjxhRSYmYXEoYUkuc2xpY2UoYUYsYUUpKSxhRTxhSCYmYXEoKGFJPWFJLnNsaWNlKGFFKSkpLGFFPGFIJiZvKGFJKSl9ZS5wdXNoKGFHKX19cmV0dXJuIGFCKGUpfWZ1bmN0aW9uIGFkKGFFLGFEKXt2YXIgZT1hRC5sZW5ndGg+MCxhRj1hRS5sZW5ndGg+MCxpPWZ1bmN0aW9uKGFQLGFKLGFPLGFOLGFTKXt2YXIgYUssYUwsYVEsYVU9MCxhTT0iMCIsYUc9YVAmJltdLGFWPVtdLGFUPWFDLGFJPWFQfHxhRiYmdC5maW5kLlRBRygiKiIsYVMpLGFIPShheis9YVQ9PW51bGw/MTpNYXRoLnJhbmRvbSgpfHwwLjEpLGFSPWFJLmxlbmd0aDtpZihhUyl7YUM9YUohPT1IJiZhSn1mb3IoO2FNIT09YVImJihhSz1hSVthTV0pIT1udWxsO2FNKyspe2lmKGFGJiZhSyl7YUw9MDt3aGlsZSgoYVE9YUVbYUwrK10pKXtpZihhUShhSyxhSixhTykpe2FOLnB1c2goYUspO2JyZWFrfX1pZihhUyl7YXo9YUh9fWlmKGUpe2lmKChhSz0hYVEmJmFLKSl7YVUtLX1pZihhUCl7YUcucHVzaChhSyl9fX1hVSs9YU07aWYoZSYmYU0hPT1hVSl7YUw9MDt3aGlsZSgoYVE9YURbYUwrK10pKXthUShhRyxhVixhSixhTyl9aWYoYVApe2lmKGFVPjApe3doaWxlKGFNLS0pe2lmKCEoYUdbYU1dfHxhVlthTV0pKXthVlthTV09YXQuY2FsbChhTil9fX1hVj1hZihhVil9Yi5hcHBseShhTixhVik7aWYoYVMmJiFhUCYmYVYubGVuZ3RoPjAmJihhVSthRC5sZW5ndGgpPjEpe0IudW5pcXVlU29ydChhTil9fWlmKGFTKXthej1hSDthQz1hVH1yZXR1cm4gYUd9O3JldHVybiBlP3AoaSk6aX1hYj1CLmNvbXBpbGU9ZnVuY3Rpb24oZSxhRSl7dmFyIGFGLGFEPVtdLGFIPVtdLGFHPUxbZSsiICJdO2lmKCFhRyl7aWYoIWFFKXthRT1uKGUpfWFGPWFFLmxlbmd0aDt3aGlsZShhRi0tKXthRz1hcShhRVthRl0pO2lmKGFHW2FwXSl7YUQucHVzaChhRyl9ZWxzZXthSC5wdXNoKGFHKX19YUc9TChlLGFkKGFILGFEKSk7YUcuc2VsZWN0b3I9ZX1yZXR1cm4gYUd9O2F4PUIuc2VsZWN0PWZ1bmN0aW9uKGFFLGUsYUYsYUkpe3ZhciBhRyxhTCxhRCxhTSxhSixhSz10eXBlb2YgYUU9PT0iZnVuY3Rpb24iJiZhRSxhSD0hYUkmJm4oKGFFPWFLLnNlbGVjdG9yfHxhRSkpO2FGPWFGfHxbXTtpZihhSC5sZW5ndGg9PT0xKXthTD1hSFswXT1hSFswXS5zbGljZSgwKTtpZihhTC5sZW5ndGg+MiYmKGFEPWFMWzBdKS50eXBlPT09IklEIiYmYXkuZ2V0QnlJZCYmZS5ub2RlVHlwZT09PTkmJmFuJiZ0LnJlbGF0aXZlW2FMWzFdLnR5cGVdKXtlPSh0LmZpbmQuSUQoYUQubWF0Y2hlc1swXS5yZXBsYWNlKHksYWspLGUpfHxbXSlbMF07aWYoIWUpe3JldHVybiBhRn1lbHNle2lmKGFLKXtlPWUucGFyZW50Tm9kZX19YUU9YUUuc2xpY2UoYUwuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWFHPWFoLm5lZWRzQ29udGV4dC50ZXN0KGFFKT8wOmFMLmxlbmd0aDt3aGlsZShhRy0tKXthRD1hTFthR107aWYodC5yZWxhdGl2ZVsoYU09YUQudHlwZSldKXticmVha31pZigoYUo9dC5maW5kW2FNXSkpe2lmKChhST1hSihhRC5tYXRjaGVzWzBdLnJlcGxhY2UoeSxhayksYWcudGVzdChhTFswXS50eXBlKSYmWShlLnBhcmVudE5vZGUpfHxlKSkpe2FMLnNwbGljZShhRywxKTthRT1hSS5sZW5ndGgmJm8oYUwpO2lmKCFhRSl7Yi5hcHBseShhRixhSSk7cmV0dXJuIGFGfWJyZWFrfX19fShhS3x8YWIoYUUsYUgpKShhSSxlLCFhbixhRixhZy50ZXN0KGFFKSYmWShlLnBhcmVudE5vZGUpfHxlKTtyZXR1cm4gYUZ9O2F5LnNvcnRTdGFibGU9YXAuc3BsaXQoIiIpLnNvcnQoSikuam9pbigiIik9PT1hcDtheS5kZXRlY3REdXBsaWNhdGVzPSEhYWM7YWUoKTtheS5zb3J0RGV0YWNoZWQ9bChmdW5jdGlvbihlKXtyZXR1cm4gZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihILmNyZWF0ZUVsZW1lbnQoImRpdiIpKSYxfSk7aWYoIWwoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO3JldHVybiBlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIik9PT0iIyJ9KSl7YUEoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGksZSxhRCl7aWYoIWFEKXtyZXR1cm4gaS5nZXRBdHRyaWJ1dGUoZSxlLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKX19KX1pZighYXkuYXR0cmlidXRlc3x8IWwoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxpbnB1dC8+IjtlLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpO3JldHVybiBlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09IiJ9KSl7YUEoInZhbHVlIixmdW5jdGlvbihpLGUsYUQpe2lmKCFhRCYmaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0Iil7cmV0dXJuIGkuZGVmYXVsdFZhbHVlfX0pfWlmKCFsKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09bnVsbH0pKXthQShjLGZ1bmN0aW9uKGksZSxhRSl7dmFyIGFEO2lmKCFhRSl7cmV0dXJuIGlbZV09PT10cnVlP2UudG9Mb3dlckNhc2UoKTooYUQ9aS5nZXRBdHRyaWJ1dGVOb2RlKGUpKSYmYUQuc3BlY2lmaWVkP2FELnZhbHVlOm51bGx9fSl9aWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShmdW5jdGlvbigpe3JldHVybiBCfSl9ZWxzZXtpZih0eXBlb2YgbW9kdWxlIT09InVuZGVmaW5lZCImJm1vZHVsZS5leHBvcnRzKXttb2R1bGUuZXhwb3J0cz1CfWVsc2V7YXYuU2l6emxlPUJ9fX0pKHdpbmRvdyk7KGZ1bmN0aW9uKCl7aWYodHlwZW9mIFNpenpsZSE9PSJ1bmRlZmluZWQiKXtyZXR1cm59aWYodHlwZW9mIGRlZmluZSE9PSJ1bmRlZmluZWQiJiZkZWZpbmUuYW1kKXt3aW5kb3cuU2l6emxlPVByb3RvdHlwZS5fYWN0dWFsX3NpenpsZTt3aW5kb3cuZGVmaW5lPVByb3RvdHlwZS5fb3JpZ2luYWxfZGVmaW5lO2RlbGV0ZSBQcm90b3R5cGUuX2FjdHVhbF9zaXp6bGU7ZGVsZXRlIFByb3RvdHlwZS5fb3JpZ2luYWxfZGVmaW5lfWVsc2V7aWYodHlwZW9mIG1vZHVsZSE9PSJ1bmRlZmluZWQiJiZtb2R1bGUuZXhwb3J0cyl7d2luZG93LlNpenpsZT1tb2R1bGUuZXhwb3J0czttb2R1bGUuZXhwb3J0cz17fX19fSkoKTsoZnVuY3Rpb24oYyl7dmFyIGQ9UHJvdG90eXBlLlNlbGVjdG9yLmV4dGVuZEVsZW1lbnRzO2Z1bmN0aW9uIGEoZSxmKXtyZXR1cm4gZChjKGUsZnx8ZG9jdW1lbnQpKX1mdW5jdGlvbiBiKGYsZSl7cmV0dXJuIGMubWF0Y2hlcyhlLFtmXSkubGVuZ3RoPT0xfVByb3RvdHlwZS5TZWxlY3Rvci5lbmdpbmU9YztQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0PWE7UHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoPWJ9KShTaXp6bGUpO3dpbmRvdy5TaXp6bGU9UHJvdG90eXBlLl9vcmlnaW5hbF9wcm9wZXJ0eTtkZWxldGUgUHJvdG90eXBlLl9vcmlnaW5hbF9wcm9wZXJ0eTt2YXIgRm9ybT17cmVzZXQ6ZnVuY3Rpb24oYSl7YT0kKGEpO2EucmVzZXQoKTtyZXR1cm4gYX0sc2VyaWFsaXplRWxlbWVudHM6ZnVuY3Rpb24oaCxkKXtpZih0eXBlb2YgZCE9Im9iamVjdCIpe2Q9e2hhc2g6ISFkfX1lbHNle2lmKE9iamVjdC5pc1VuZGVmaW5lZChkLmhhc2gpKXtkLmhhc2g9dHJ1ZX19dmFyIGUsZyxhPWZhbHNlLGY9ZC5zdWJtaXQsYixjO2lmKGQuaGFzaCl7Yz17fTtiPWZ1bmN0aW9uKGksaixrKXtpZihqIGluIGkpe2lmKCFPYmplY3QuaXNBcnJheShpW2pdKSl7aVtqXT1baVtqXV19aVtqXT1pW2pdLmNvbmNhdChrKX1lbHNle2lbal09a31yZXR1cm4gaX19ZWxzZXtjPSIiO2I9ZnVuY3Rpb24oaSxrLGope2lmKCFPYmplY3QuaXNBcnJheShqKSl7aj1bal19aWYoIWoubGVuZ3RoKXtyZXR1cm4gaX12YXIgbD1lbmNvZGVVUklDb21wb25lbnQoaykuZ3N1YigvJTIwLywiKyIpO3JldHVybiBpKyhpPyImIjoiIikrai5tYXAoZnVuY3Rpb24obSl7bT1tLmdzdWIoLyhccik/XG4vLCJcclxuIik7bT1lbmNvZGVVUklDb21wb25lbnQobSk7bT1tLmdzdWIoLyUyMC8sIisiKTtyZXR1cm4gbCsiPSIrbX0pLmpvaW4oIiYiKX19cmV0dXJuIGguaW5qZWN0KGMsZnVuY3Rpb24oaSxqKXtpZighai5kaXNhYmxlZCYmai5uYW1lKXtlPWoubmFtZTtnPSQoaikuZ2V0VmFsdWUoKTtpZihnIT1udWxsJiZqLnR5cGUhPSJmaWxlIiYmKGoudHlwZSE9InN1Ym1pdCJ8fCghYSYmZiE9PWZhbHNlJiYoIWZ8fGU9PWYpJiYoYT10cnVlKSkpKXtpPWIoaSxlLGcpfX1yZXR1cm4gaX0pfX07Rm9ybS5NZXRob2RzPXtzZXJpYWxpemU6ZnVuY3Rpb24oYixhKXtyZXR1cm4gRm9ybS5zZXJpYWxpemVFbGVtZW50cyhGb3JtLmdldEVsZW1lbnRzKGIpLGEpfSxnZXRFbGVtZW50czpmdW5jdGlvbihlKXt2YXIgZj0kKGUpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7dmFyIGQsYz1bXSxiPUZvcm0uRWxlbWVudC5TZXJpYWxpemVycztmb3IodmFyIGE9MDtkPWZbYV07YSsrKXtpZihiW2QudGFnTmFtZS50b0xvd2VyQ2FzZSgpXSl7Yy5wdXNoKEVsZW1lbnQuZXh0ZW5kKGQpKX19cmV0dXJuIGN9LGdldElucHV0czpmdW5jdGlvbihnLGMsZCl7Zz0kKGcpO3ZhciBhPWcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7aWYoIWMmJiFkKXtyZXR1cm4gJEEoYSkubWFwKEVsZW1lbnQuZXh0ZW5kKX1mb3IodmFyIGU9MCxoPVtdLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dmFyIGI9YVtlXTtpZigoYyYmYi50eXBlIT1jKXx8KGQmJmIubmFtZSE9ZCkpe2NvbnRpbnVlfWgucHVzaChFbGVtZW50LmV4dGVuZChiKSl9cmV0dXJuIGh9LGRpc2FibGU6ZnVuY3Rpb24oYSl7YT0kKGEpO0Zvcm0uZ2V0RWxlbWVudHMoYSkuaW52b2tlKCJkaXNhYmxlIik7cmV0dXJuIGF9LGVuYWJsZTpmdW5jdGlvbihhKXthPSQoYSk7Rm9ybS5nZXRFbGVtZW50cyhhKS5pbnZva2UoImVuYWJsZSIpO3JldHVybiBhfSxmaW5kRmlyc3RFbGVtZW50OmZ1bmN0aW9uKGIpe3ZhciBjPSQoYikuZ2V0RWxlbWVudHMoKS5maW5kQWxsKGZ1bmN0aW9uKGQpe3JldHVybiJoaWRkZW4iIT1kLnR5cGUmJiFkLmRpc2FibGVkfSk7dmFyIGE9Yy5maW5kQWxsKGZ1bmN0aW9uKGQpe3JldHVybiBkLmhhc0F0dHJpYnV0ZSgidGFiSW5kZXgiKSYmZC50YWJJbmRleD49MH0pLnNvcnRCeShmdW5jdGlvbihkKXtyZXR1cm4gZC50YWJJbmRleH0pLmZpcnN0KCk7cmV0dXJuIGE/YTpjLmZpbmQoZnVuY3Rpb24oZCl7cmV0dXJuL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLnRlc3QoZC50YWdOYW1lKX0pfSxmb2N1c0ZpcnN0RWxlbWVudDpmdW5jdGlvbihiKXtiPSQoYik7dmFyIGE9Yi5maW5kRmlyc3RFbGVtZW50KCk7aWYoYSl7YS5hY3RpdmF0ZSgpfXJldHVybiBifSxyZXF1ZXN0OmZ1bmN0aW9uKGIsYSl7Yj0kKGIpLGE9T2JqZWN0LmNsb25lKGF8fHt9KTt2YXIgZD1hLnBhcmFtZXRlcnMsYz1iLnJlYWRBdHRyaWJ1dGUoImFjdGlvbiIpfHwiIjtpZihjLmJsYW5rKCkpe2M9d2luZG93LmxvY2F0aW9uLmhyZWZ9YS5wYXJhbWV0ZXJzPWIuc2VyaWFsaXplKHRydWUpO2lmKGQpe2lmKE9iamVjdC5pc1N0cmluZyhkKSl7ZD1kLnRvUXVlcnlQYXJhbXMoKX1PYmplY3QuZXh0ZW5kKGEucGFyYW1ldGVycyxkKX1pZihiLmhhc0F0dHJpYnV0ZSgibWV0aG9kIikmJiFhLm1ldGhvZCl7YS5tZXRob2Q9Yi5tZXRob2R9cmV0dXJuIG5ldyBBamF4LlJlcXVlc3QoYyxhKX19O0Zvcm0uRWxlbWVudD17Zm9jdXM6ZnVuY3Rpb24oYSl7JChhKS5mb2N1cygpO3JldHVybiBhfSxzZWxlY3Q6ZnVuY3Rpb24oYSl7JChhKS5zZWxlY3QoKTtyZXR1cm4gYX19O0Zvcm0uRWxlbWVudC5NZXRob2RzPXtzZXJpYWxpemU6ZnVuY3Rpb24oYSl7YT0kKGEpO2lmKCFhLmRpc2FibGVkJiZhLm5hbWUpe3ZhciBiPWEuZ2V0VmFsdWUoKTtpZihiIT11bmRlZmluZWQpe3ZhciBjPXt9O2NbYS5uYW1lXT1iO3JldHVybiBPYmplY3QudG9RdWVyeVN0cmluZyhjKX19cmV0dXJuIiJ9LGdldFZhbHVlOmZ1bmN0aW9uKGEpe2E9JChhKTt2YXIgYj1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gRm9ybS5FbGVtZW50LlNlcmlhbGl6ZXJzW2JdKGEpfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe2E9JChhKTt2YXIgYz1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtGb3JtLkVsZW1lbnQuU2VyaWFsaXplcnNbY10oYSxiKTtyZXR1cm4gYX0sY2xlYXI6ZnVuY3Rpb24oYSl7JChhKS52YWx1ZT0iIjtyZXR1cm4gYX0scHJlc2VudDpmdW5jdGlvbihhKXtyZXR1cm4gJChhKS52YWx1ZSE9IiJ9LGFjdGl2YXRlOmZ1bmN0aW9uKGEpe2E9JChhKTt0cnl7YS5mb2N1cygpO2lmKGEuc2VsZWN0JiYoYS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPSJpbnB1dCJ8fCEoL14oPzpidXR0b258cmVzZXR8c3VibWl0KSQvaS50ZXN0KGEudHlwZSkpKSl7YS5zZWxlY3QoKX19Y2F0Y2goYil7fXJldHVybiBhfSxkaXNhYmxlOmZ1bmN0aW9uKGEpe2E9JChhKTthLmRpc2FibGVkPXRydWU7cmV0dXJuIGF9LGVuYWJsZTpmdW5jdGlvbihhKXthPSQoYSk7YS5kaXNhYmxlZD1mYWxzZTtyZXR1cm4gYX19O3ZhciBGaWVsZD1Gb3JtLkVsZW1lbnQ7dmFyICRGPUZvcm0uRWxlbWVudC5NZXRob2RzLmdldFZhbHVlO0Zvcm0uRWxlbWVudC5TZXJpYWxpemVycz0oZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGgsaSl7c3dpdGNoKGgudHlwZS50b0xvd2VyQ2FzZSgpKXtjYXNlImNoZWNrYm94IjpjYXNlInJhZGlvIjpyZXR1cm4gZihoLGkpO2RlZmF1bHQ6cmV0dXJuIGUoaCxpKX19ZnVuY3Rpb24gZihoLGkpe2lmKE9iamVjdC5pc1VuZGVmaW5lZChpKSl7cmV0dXJuIGguY2hlY2tlZD9oLnZhbHVlOm51bGx9ZWxzZXtoLmNoZWNrZWQ9ISFpfX1mdW5jdGlvbiBlKGgsaSl7aWYoT2JqZWN0LmlzVW5kZWZpbmVkKGkpKXtyZXR1cm4gaC52YWx1ZX1lbHNle2gudmFsdWU9aX19ZnVuY3Rpb24gYShrLG4pe2lmKE9iamVjdC5pc1VuZGVmaW5lZChuKSl7cmV0dXJuKGsudHlwZT09PSJzZWxlY3Qtb25lIj9jOmQpKGspfXZhciBqLGwsbz0hT2JqZWN0LmlzQXJyYXkobik7Zm9yKHZhciBoPTAsbT1rLmxlbmd0aDtoPG07aCsrKXtqPWsub3B0aW9uc1toXTtsPXRoaXMub3B0aW9uVmFsdWUoaik7aWYobyl7aWYobD09bil7ai5zZWxlY3RlZD10cnVlO3JldHVybn19ZWxzZXtqLnNlbGVjdGVkPW4uaW5jbHVkZShsKX19fWZ1bmN0aW9uIGMoaSl7dmFyIGg9aS5zZWxlY3RlZEluZGV4O3JldHVybiBoPj0wP2coaS5vcHRpb25zW2hdKTpudWxsfWZ1bmN0aW9uIGQobCl7dmFyIGgsbT1sLmxlbmd0aDtpZighbSl7cmV0dXJuIG51bGx9Zm9yKHZhciBrPTAsaD1bXTtrPG07aysrKXt2YXIgaj1sLm9wdGlvbnNba107aWYoai5zZWxlY3RlZCl7aC5wdXNoKGcoaikpfX1yZXR1cm4gaH1mdW5jdGlvbiBnKGgpe3JldHVybiBFbGVtZW50Lmhhc0F0dHJpYnV0ZShoLCJ2YWx1ZSIpP2gudmFsdWU6aC50ZXh0fXJldHVybntpbnB1dDpiLGlucHV0U2VsZWN0b3I6Zix0ZXh0YXJlYTplLHNlbGVjdDphLHNlbGVjdE9uZTpjLHNlbGVjdE1hbnk6ZCxvcHRpb25WYWx1ZTpnLGJ1dHRvbjplfX0pKCk7QWJzdHJhY3QuVGltZWRPYnNlcnZlcj1DbGFzcy5jcmVhdGUoUGVyaW9kaWNhbEV4ZWN1dGVyLHtpbml0aWFsaXplOmZ1bmN0aW9uKCRzdXBlcixhLGIsYyl7JHN1cGVyKGMsYik7dGhpcy5lbGVtZW50PSQoYSk7dGhpcy5sYXN0VmFsdWU9dGhpcy5nZXRWYWx1ZSgpfSxleGVjdXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRWYWx1ZSgpO2lmKE9iamVjdC5pc1N0cmluZyh0aGlzLmxhc3RWYWx1ZSkmJk9iamVjdC5pc1N0cmluZyhhKT90aGlzLmxhc3RWYWx1ZSE9YTpTdHJpbmcodGhpcy5sYXN0VmFsdWUpIT1TdHJpbmcoYSkpe3RoaXMuY2FsbGJhY2sodGhpcy5lbGVtZW50LGEpO3RoaXMubGFzdFZhbHVlPWF9fX0pO0Zvcm0uRWxlbWVudC5PYnNlcnZlcj1DbGFzcy5jcmVhdGUoQWJzdHJhY3QuVGltZWRPYnNlcnZlcix7Z2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gRm9ybS5FbGVtZW50LmdldFZhbHVlKHRoaXMuZWxlbWVudCl9fSk7Rm9ybS5PYnNlcnZlcj1DbGFzcy5jcmVhdGUoQWJzdHJhY3QuVGltZWRPYnNlcnZlcix7Z2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gRm9ybS5zZXJpYWxpemUodGhpcy5lbGVtZW50KX19KTtBYnN0cmFjdC5FdmVudE9ic2VydmVyPUNsYXNzLmNyZWF0ZSh7aW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMuZWxlbWVudD0kKGEpO3RoaXMuY2FsbGJhY2s9Yjt0aGlzLmxhc3RWYWx1ZT10aGlzLmdldFZhbHVlKCk7aWYodGhpcy5lbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImZvcm0iKXt0aGlzLnJlZ2lzdGVyRm9ybUNhbGxiYWNrcygpfWVsc2V7dGhpcy5yZWdpc3RlckNhbGxiYWNrKHRoaXMuZWxlbWVudCl9fSxvbkVsZW1lbnRFdmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0VmFsdWUoKTtpZih0aGlzLmxhc3RWYWx1ZSE9YSl7dGhpcy5jYWxsYmFjayh0aGlzLmVsZW1lbnQsYSk7dGhpcy5sYXN0VmFsdWU9YX19LHJlZ2lzdGVyRm9ybUNhbGxiYWNrczpmdW5jdGlvbigpe0Zvcm0uZ2V0RWxlbWVudHModGhpcy5lbGVtZW50KS5lYWNoKHRoaXMucmVnaXN0ZXJDYWxsYmFjayx0aGlzKX0scmVnaXN0ZXJDYWxsYmFjazpmdW5jdGlvbihhKXtpZihhLnR5cGUpe3N3aXRjaChhLnR5cGUudG9Mb3dlckNhc2UoKSl7Y2FzZSJjaGVja2JveCI6Y2FzZSJyYWRpbyI6RXZlbnQub2JzZXJ2ZShhLCJjbGljayIsdGhpcy5vbkVsZW1lbnRFdmVudC5iaW5kKHRoaXMpKTticmVhaztkZWZhdWx0OkV2ZW50Lm9ic2VydmUoYSwiY2hhbmdlIix0aGlzLm9uRWxlbWVudEV2ZW50LmJpbmQodGhpcykpO2JyZWFrfX19fSk7Rm9ybS5FbGVtZW50LkV2ZW50T2JzZXJ2ZXI9Q2xhc3MuY3JlYXRlKEFic3RyYWN0LkV2ZW50T2JzZXJ2ZXIse2dldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEZvcm0uRWxlbWVudC5nZXRWYWx1ZSh0aGlzLmVsZW1lbnQpfX0pO0Zvcm0uRXZlbnRPYnNlcnZlcj1DbGFzcy5jcmVhdGUoQWJzdHJhY3QuRXZlbnRPYnNlcnZlcix7Z2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gRm9ybS5zZXJpYWxpemUodGhpcy5lbGVtZW50KX19KTsoZnVuY3Rpb24oRCl7dmFyIHU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3ZhciBrPSJvbm1vdXNlZW50ZXIiIGluIGQmJiJvbm1vdXNlbGVhdmUiIGluIGQ7dmFyIEw9e0tFWV9CQUNLU1BBQ0U6OCxLRVlfVEFCOjksS0VZX1JFVFVSTjoxMyxLRVlfRVNDOjI3LEtFWV9MRUZUOjM3LEtFWV9VUDozOCxLRVlfUklHSFQ6MzksS0VZX0RPV046NDAsS0VZX0RFTEVURTo0NixLRVlfSE9NRTozNixLRVlfRU5EOjM1LEtFWV9QQUdFVVA6MzMsS0VZX1BBR0VET1dOOjM0LEtFWV9JTlNFUlQ6NDV9O3ZhciBBPWZ1bmN0aW9uKFgpe3JldHVybiBmYWxzZX07aWYod2luZG93LmF0dGFjaEV2ZW50KXtpZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7QT1mdW5jdGlvbihYKXtyZXR1cm4gIShYIGluc3RhbmNlb2Ygd2luZG93LkV2ZW50KX19ZWxzZXtBPWZ1bmN0aW9uKFgpe3JldHVybiB0cnVlfX19dmFyIE87ZnVuY3Rpb24gTShZLFgpe3JldHVybiBZLndoaWNoPyhZLndoaWNoPT09WCsxKTooWS5idXR0b249PT1YKX12YXIgVz17MDoxLDE6NCwyOjJ9O2Z1bmN0aW9uIFMoWSxYKXtyZXR1cm4gWS5idXR0b249PT1XW1hdfWZ1bmN0aW9uIFAoWSxYKXtzd2l0Y2goWCl7Y2FzZSAwOnJldHVybiBZLndoaWNoPT0xJiYhWS5tZXRhS2V5O2Nhc2UgMTpyZXR1cm4gWS53aGljaD09Mnx8KFkud2hpY2g9PTEmJlkubWV0YUtleSk7Y2FzZSAyOnJldHVybiBZLndoaWNoPT0zO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1pZih3aW5kb3cuYXR0YWNoRXZlbnQpe2lmKCF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7Tz1TfWVsc2V7Tz1mdW5jdGlvbihZLFgpe3JldHVybiBBKFkpP1MoWSxYKTpNKFksWCl9fX1lbHNle2lmKFByb3RvdHlwZS5Ccm93c2VyLldlYktpdCl7Tz1QfWVsc2V7Tz1NfX1mdW5jdGlvbiBCKFgpe3JldHVybiBPKFgsMCl9ZnVuY3Rpb24gaShYKXtyZXR1cm4gTyhYLDEpfWZ1bmN0aW9uIGUoWCl7cmV0dXJuIE8oWCwyKX1mdW5jdGlvbiBvKFgpe3JldHVybiBFbGVtZW50LmV4dGVuZChLKFgpKX1mdW5jdGlvbiBLKFope1o9TC5leHRlbmQoWik7dmFyIFk9Wi50YXJnZXQsWD1aLnR5cGUsYWE9Wi5jdXJyZW50VGFyZ2V0O2lmKGFhJiZhYS50YWdOYW1lKXtpZihYPT09ImxvYWQifHxYPT09ImVycm9yInx8KFg9PT0iY2xpY2siJiZhYS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiJiZhYS50eXBlPT09InJhZGlvIikpe1k9YWF9fXJldHVybiBZLm5vZGVUeXBlPT1Ob2RlLlRFWFRfTk9ERT9ZLnBhcmVudE5vZGU6WX1mdW5jdGlvbiBqKFosYWEpe3ZhciBZPUsoWiksWD1Qcm90b3R5cGUuU2VsZWN0b3I7aWYoIWFhKXtyZXR1cm4gRWxlbWVudC5leHRlbmQoWSl9d2hpbGUoWSl7aWYoT2JqZWN0LmlzRWxlbWVudChZKSYmWC5tYXRjaChZLGFhKSl7cmV0dXJuIEVsZW1lbnQuZXh0ZW5kKFkpfVk9WS5wYXJlbnROb2RlfX1mdW5jdGlvbiB0KFgpe3JldHVybnt4OlUoWCkseTpUKFgpfX1mdW5jdGlvbiBVKFope3ZhciBZPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxYPWRvY3VtZW50LmJvZHl8fHtzY3JvbGxMZWZ0OjB9O3JldHVybiBaLnBhZ2VYfHwoWi5jbGllbnRYKyhZLnNjcm9sbExlZnR8fFguc2Nyb2xsTGVmdCktKFkuY2xpZW50TGVmdHx8MCkpfWZ1bmN0aW9uIFQoWil7dmFyIFk9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFg9ZG9jdW1lbnQuYm9keXx8e3Njcm9sbFRvcDowfTtyZXR1cm4gWi5wYWdlWXx8KFouY2xpZW50WSsoWS5zY3JvbGxUb3B8fFguc2Nyb2xsVG9wKS0oWS5jbGllbnRUb3B8fDApKX1mdW5jdGlvbiByKFgpe0wuZXh0ZW5kKFgpO1gucHJldmVudERlZmF1bHQoKTtYLnN0b3BQcm9wYWdhdGlvbigpO1guc3RvcHBlZD10cnVlfUwuTWV0aG9kcz17aXNMZWZ0Q2xpY2s6Qixpc01pZGRsZUNsaWNrOmksaXNSaWdodENsaWNrOmUsZWxlbWVudDpvLGZpbmRFbGVtZW50OmoscG9pbnRlcjp0LHBvaW50ZXJYOlUscG9pbnRlclk6VCxzdG9wOnJ9O3ZhciBIPU9iamVjdC5rZXlzKEwuTWV0aG9kcykuaW5qZWN0KHt9LGZ1bmN0aW9uKFgsWSl7WFtZXT1MLk1ldGhvZHNbWV0ubWV0aG9kaXplKCk7cmV0dXJuIFh9KTtpZih3aW5kb3cuYXR0YWNoRXZlbnQpe2Z1bmN0aW9uIFYoWSl7dmFyIFg7c3dpdGNoKFkudHlwZSl7Y2FzZSJtb3VzZW92ZXIiOmNhc2UibW91c2VlbnRlciI6WD1ZLmZyb21FbGVtZW50O2JyZWFrO2Nhc2UibW91c2VvdXQiOmNhc2UibW91c2VsZWF2ZSI6WD1ZLnRvRWxlbWVudDticmVhaztkZWZhdWx0OnJldHVybiBudWxsfXJldHVybiBFbGVtZW50LmV4dGVuZChYKX12YXIgUT17c3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxCdWJibGU9dHJ1ZX0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLnJldHVyblZhbHVlPWZhbHNlfSxpbnNwZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgRXZlbnRdIn19O0wuZXh0ZW5kPWZ1bmN0aW9uKFksWCl7aWYoIVkpe3JldHVybiBmYWxzZX1pZighQShZKSl7cmV0dXJuIFl9aWYoWS5fZXh0ZW5kZWRCeVByb3RvdHlwZSl7cmV0dXJuIFl9WS5fZXh0ZW5kZWRCeVByb3RvdHlwZT1Qcm90b3R5cGUuZW1wdHlGdW5jdGlvbjt2YXIgWj1MLnBvaW50ZXIoWSk7T2JqZWN0LmV4dGVuZChZLHt0YXJnZXQ6WS5zcmNFbGVtZW50fHxYLHJlbGF0ZWRUYXJnZXQ6VihZKSxwYWdlWDpaLngscGFnZVk6Wi55fSk7T2JqZWN0LmV4dGVuZChZLEgpO09iamVjdC5leHRlbmQoWSxRKTtyZXR1cm4gWX19ZWxzZXtMLmV4dGVuZD1Qcm90b3R5cGUuS31pZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7TC5wcm90b3R5cGU9d2luZG93LkV2ZW50LnByb3RvdHlwZXx8ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKS5fX3Byb3RvX187T2JqZWN0LmV4dGVuZChMLnByb3RvdHlwZSxIKX12YXIgdj17bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9O2Z1bmN0aW9uIGYoWCl7cmV0dXJuIHZbWF18fFh9aWYoayl7Zj1Qcm90b3R5cGUuS31mdW5jdGlvbiBSKFgpe2lmKFg9PT13aW5kb3cpe3JldHVybiAwfWlmKHR5cGVvZiBYLl9wcm90b3R5cGVVSUQ9PT0idW5kZWZpbmVkIil7WC5fcHJvdG90eXBlVUlEPUVsZW1lbnQuU3RvcmFnZS5VSUQrK31yZXR1cm4gWC5fcHJvdG90eXBlVUlEfWZ1bmN0aW9uIEkoWCl7aWYoWD09PXdpbmRvdyl7cmV0dXJuIDB9aWYoWD09ZG9jdW1lbnQpe3JldHVybiAxfXJldHVybiBYLnVuaXF1ZUlEfWlmKCJ1bmlxdWVJRCIgaW4gdSl7Uj1JfWZ1bmN0aW9uIHgoWCl7cmV0dXJuIFguaW5jbHVkZSgiOiIpfUwuX2lzQ3VzdG9tRXZlbnQ9eDtmdW5jdGlvbiB6KFosWSl7dmFyIFg9RC5FdmVudC5jYWNoZTtpZihPYmplY3QuaXNVbmRlZmluZWQoWSkpe1k9UihaKX1pZighWFtZXSl7WFtZXT17ZWxlbWVudDpafX1yZXR1cm4gWFtZXX1mdW5jdGlvbiBFKFksWCl7aWYoT2JqZWN0LmlzVW5kZWZpbmVkKFgpKXtYPVIoWSl9ZGVsZXRlIEQuRXZlbnQuY2FjaGVbWF19ZnVuY3Rpb24gaChaLGFjLGFmKXt2YXIgWD16KFopO2lmKCFYW2FjXSl7WFthY109W119dmFyIGFiPVhbYWNdO3ZhciBhYT1hYi5sZW5ndGg7d2hpbGUoYWEtLSl7aWYoYWJbYWFdLmhhbmRsZXI9PT1hZil7cmV0dXJuIG51bGx9fXZhciBhZD1SKFopO3ZhciBZPUQuRXZlbnQuX2NyZWF0ZVJlc3BvbmRlcihhZCxhYyxhZik7dmFyIGFlPXtyZXNwb25kZXI6WSxoYW5kbGVyOmFmfTthYi5wdXNoKGFlKTtyZXR1cm4gYWV9ZnVuY3Rpb24gcyhhYyxaLGFkKXt2YXIgWT16KGFjKTt2YXIgWD1ZW1pdfHxbXTt2YXIgYWI9WC5sZW5ndGgsYWU7d2hpbGUoYWItLSl7aWYoWFthYl0uaGFuZGxlcj09PWFkKXthZT1YW2FiXTticmVha319aWYoYWUpe3ZhciBhYT1YLmluZGV4T2YoYWUpO1guc3BsaWNlKGFhLDEpfWlmKFgubGVuZ3RoPT09MCl7ZGVsZXRlIFlbWl07aWYoT2JqZWN0LmtleXMoWSkubGVuZ3RoPT09MSYmKCJlbGVtZW50IiBpbiBZKSl7RShhYyl9fXJldHVybiBhZX1mdW5jdGlvbiBjKFosWSxhYSl7Wj0kKFopO3ZhciBhYj1oKFosWSxhYSk7aWYoYWI9PT1udWxsKXtyZXR1cm4gWn12YXIgWD1hYi5yZXNwb25kZXI7aWYoeChZKSl7cChaLFksWCl9ZWxzZXttKFosWSxYKX1yZXR1cm4gWn1mdW5jdGlvbiBtKGFhLFosWSl7dmFyIFg9ZihaKTtpZihhYS5hZGRFdmVudExpc3RlbmVyKXthYS5hZGRFdmVudExpc3RlbmVyKFgsWSxmYWxzZSl9ZWxzZXthYS5hdHRhY2hFdmVudCgib24iK1gsWSl9fWZ1bmN0aW9uIHAoWixZLFgpe2lmKFouYWRkRXZlbnRMaXN0ZW5lcil7Wi5hZGRFdmVudExpc3RlbmVyKCJkYXRhYXZhaWxhYmxlIixYLGZhbHNlKX1lbHNle1ouYXR0YWNoRXZlbnQoIm9uZGF0YWF2YWlsYWJsZSIsWCk7Wi5hdHRhY2hFdmVudCgib25sb3NlY2FwdHVyZSIsWCl9fWZ1bmN0aW9uIEooWSxYLFope1k9JChZKTt2YXIgYWI9IU9iamVjdC5pc1VuZGVmaW5lZChaKSxhYz0hT2JqZWN0LmlzVW5kZWZpbmVkKFgpO2lmKCFhYyYmIWFiKXt5KFkpO3JldHVybiBZfWlmKCFhYil7RyhZLFgpO3JldHVybiBZfXZhciBhYT1zKFksWCxaKTtpZighYWEpe3JldHVybiBZfWEoWSxYLGFhLnJlc3BvbmRlcik7cmV0dXJuIFl9ZnVuY3Rpb24gQyhhYSxaLFkpe3ZhciBYPWYoWik7aWYoYWEucmVtb3ZlRXZlbnRMaXN0ZW5lcil7YWEucmVtb3ZlRXZlbnRMaXN0ZW5lcihYLFksZmFsc2UpfWVsc2V7YWEuZGV0YWNoRXZlbnQoIm9uIitYLFkpfX1mdW5jdGlvbiBiKFosWSxYKXtpZihaLnJlbW92ZUV2ZW50TGlzdGVuZXIpe1oucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZGF0YWF2YWlsYWJsZSIsWCxmYWxzZSl9ZWxzZXtaLmRldGFjaEV2ZW50KCJvbmRhdGFhdmFpbGFibGUiLFgpO1ouZGV0YWNoRXZlbnQoIm9ubG9zZWNhcHR1cmUiLFgpfX1mdW5jdGlvbiB5KGFjKXt2YXIgYWI9UihhYyksWj1ELkV2ZW50LmNhY2hlW2FiXTtpZighWil7cmV0dXJufUUoYWMsYWIpO3ZhciBYLGFhO2Zvcih2YXIgWSBpbiBaKXtpZihZPT09ImVsZW1lbnQiKXtjb250aW51ZX1YPVpbWV07YWE9WC5sZW5ndGg7d2hpbGUoYWEtLSl7YShhYyxZLFhbYWFdLnJlc3BvbmRlcil9fX1mdW5jdGlvbiBHKGFjLFope3ZhciBZPXooYWMpO3ZhciBYPVlbWl07aWYoWCl7ZGVsZXRlIFlbWl19WD1YfHxbXTt2YXIgYWI9WC5sZW5ndGg7d2hpbGUoYWItLSl7YShhYyxaLFhbYWJdLnJlc3BvbmRlcil9Zm9yKHZhciBhYSBpbiBZKXtpZihhYT09PSJlbGVtZW50Iil7Y29udGludWV9cmV0dXJufUUoYWMpfWZ1bmN0aW9uIGEoWSxYLFope2lmKHgoWCkpe2IoWSxYLFopfWVsc2V7QyhZLFgsWil9fWZ1bmN0aW9uIGcoWCl7aWYoWCE9PWRvY3VtZW50KXtyZXR1cm4gWH1pZihkb2N1bWVudC5jcmVhdGVFdmVudCYmIVguZGlzcGF0Y2hFdmVudCl7cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudH1yZXR1cm4gWH1mdW5jdGlvbiB3KGFhLFosWSxYKXthYT1nKCQoYWEpKTtpZihPYmplY3QuaXNVbmRlZmluZWQoWCkpe1g9dHJ1ZX1ZPVl8fHt9O3ZhciBhYj1OKGFhLFosWSxYKTtyZXR1cm4gTC5leHRlbmQoYWIpfWZ1bmN0aW9uIGwoYWEsWixZLFgpe3ZhciBhYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO2FiLmluaXRFdmVudCgiZGF0YWF2YWlsYWJsZSIsWCx0cnVlKTthYi5ldmVudE5hbWU9WjthYi5tZW1vPVk7YWEuZGlzcGF0Y2hFdmVudChhYik7cmV0dXJuIGFifWZ1bmN0aW9uIG4oYWEsWixZLFgpe3ZhciBhYj1kb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO2FiLmV2ZW50VHlwZT1YPyJvbmRhdGFhdmFpbGFibGUiOiJvbmxvc2VjYXB0dXJlIjthYi5ldmVudE5hbWU9WjthYi5tZW1vPVk7YWEuZmlyZUV2ZW50KGFiLmV2ZW50VHlwZSxhYik7cmV0dXJuIGFifXZhciBOPWRvY3VtZW50LmNyZWF0ZUV2ZW50P2w6bjtMLkhhbmRsZXI9Q2xhc3MuY3JlYXRlKHtpbml0aWFsaXplOmZ1bmN0aW9uKFosWSxYLGFhKXt0aGlzLmVsZW1lbnQ9JChaKTt0aGlzLmV2ZW50TmFtZT1ZO3RoaXMuc2VsZWN0b3I9WDt0aGlzLmNhbGxiYWNrPWFhO3RoaXMuaGFuZGxlcj10aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyl9LHN0YXJ0OmZ1bmN0aW9uKCl7TC5vYnNlcnZlKHRoaXMuZWxlbWVudCx0aGlzLmV2ZW50TmFtZSx0aGlzLmhhbmRsZXIpO3JldHVybiB0aGlzfSxzdG9wOmZ1bmN0aW9uKCl7TC5zdG9wT2JzZXJ2aW5nKHRoaXMuZWxlbWVudCx0aGlzLmV2ZW50TmFtZSx0aGlzLmhhbmRsZXIpO3JldHVybiB0aGlzfSxoYW5kbGVFdmVudDpmdW5jdGlvbihZKXt2YXIgWD1MLmZpbmRFbGVtZW50KFksdGhpcy5zZWxlY3Rvcik7aWYoWCl7dGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuZWxlbWVudCxZLFgpfX19KTtmdW5jdGlvbiBGKFosWSxYLGFhKXtaPSQoWik7aWYoT2JqZWN0LmlzRnVuY3Rpb24oWCkmJk9iamVjdC5pc1VuZGVmaW5lZChhYSkpe2FhPVgsWD1udWxsfXJldHVybiBuZXcgTC5IYW5kbGVyKFosWSxYLGFhKS5zdGFydCgpfU9iamVjdC5leHRlbmQoTCxMLk1ldGhvZHMpO09iamVjdC5leHRlbmQoTCx7ZmlyZTp3LG9ic2VydmU6YyxzdG9wT2JzZXJ2aW5nOkosb246Rn0pO0VsZW1lbnQuYWRkTWV0aG9kcyh7ZmlyZTp3LG9ic2VydmU6YyxzdG9wT2JzZXJ2aW5nOkosb246Rn0pO09iamVjdC5leHRlbmQoZG9jdW1lbnQse2ZpcmU6dy5tZXRob2RpemUoKSxvYnNlcnZlOmMubWV0aG9kaXplKCksc3RvcE9ic2VydmluZzpKLm1ldGhvZGl6ZSgpLG9uOkYubWV0aG9kaXplKCksbG9hZGVkOmZhbHNlfSk7aWYoRC5FdmVudCl7T2JqZWN0LmV4dGVuZCh3aW5kb3cuRXZlbnQsTCl9ZWxzZXtELkV2ZW50PUx9RC5FdmVudC5jYWNoZT17fTtmdW5jdGlvbiBxKCl7RC5FdmVudC5jYWNoZT1udWxsfWlmKHdpbmRvdy5hdHRhY2hFdmVudCl7d2luZG93LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIscSl9dT1udWxsO2Q9bnVsbH0pKHRoaXMpOyhmdW5jdGlvbihjKXt2YXIgZz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7dmFyIGI9Im9ubW91c2VlbnRlciIgaW4gZyYmIm9ubW91c2VsZWF2ZSIgaW4gZztmdW5jdGlvbiBmKGgpe3JldHVybiAhYiYmKGg9PT0ibW91c2VlbnRlciJ8fGg9PT0ibW91c2VsZWF2ZSIpfWZ1bmN0aW9uIGQoaSxoLGope2lmKEV2ZW50Ll9pc0N1c3RvbUV2ZW50KGgpKXtyZXR1cm4gZShpLGgsail9aWYoZihoKSl7cmV0dXJuIGEoaSxoLGopfXJldHVybiBmdW5jdGlvbihsKXtpZighRXZlbnQuY2FjaGUpe3JldHVybn12YXIgaz1FdmVudC5jYWNoZVtpXS5lbGVtZW50O0V2ZW50LmV4dGVuZChsLGspO2ouY2FsbChrLGwpfX1mdW5jdGlvbiBlKGksaCxqKXtyZXR1cm4gZnVuY3Rpb24obSl7dmFyIGs9RXZlbnQuY2FjaGVbaV07dmFyIGw9ayYmay5lbGVtZW50O2lmKE9iamVjdC5pc1VuZGVmaW5lZChtLmV2ZW50TmFtZSkpe3JldHVybiBmYWxzZX1pZihtLmV2ZW50TmFtZSE9PWgpe3JldHVybiBmYWxzZX1FdmVudC5leHRlbmQobSxsKTtqLmNhbGwobCxtKX19ZnVuY3Rpb24gYShpLGgsail7cmV0dXJuIGZ1bmN0aW9uKG0pe3ZhciBrPUV2ZW50LmNhY2hlW2ldLmVsZW1lbnQ7RXZlbnQuZXh0ZW5kKG0sayk7dmFyIGw9bS5yZWxhdGVkVGFyZ2V0O3doaWxlKGwmJmwhPT1rKXt0cnl7bD1sLnBhcmVudE5vZGV9Y2F0Y2gobil7bD1rfX1pZihsPT09ayl7cmV0dXJufWouY2FsbChrLG0pfX1jLkV2ZW50Ll9jcmVhdGVSZXNwb25kZXI9ZDtnPW51bGx9KSh0aGlzKTsoZnVuY3Rpb24oYSl7dmFyIGU7ZnVuY3Rpb24gYigpe2lmKGRvY3VtZW50LmxvYWRlZCl7cmV0dXJufWlmKGUpe3dpbmRvdy5jbGVhclRpbWVvdXQoZSl9ZG9jdW1lbnQubG9hZGVkPXRydWU7ZG9jdW1lbnQuZmlyZSgiZG9tOmxvYWRlZCIpfWZ1bmN0aW9uIGQoKXtpZihkb2N1bWVudC5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7ZG9jdW1lbnQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsZCk7YigpfX1mdW5jdGlvbiBjKCl7dHJ5e2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGYpe2U9Yy5kZWZlcigpO3JldHVybn1iKCl9aWYoZG9jdW1lbnQucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpe2IoKTtyZXR1cm59aWYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsYixmYWxzZSl9ZWxzZXtkb2N1bWVudC5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixkKTtpZih3aW5kb3c9PXRvcCl7ZT1jLmRlZmVyKCl9fUV2ZW50Lm9ic2VydmUod2luZG93LCJsb2FkIixiKX0pKHRoaXMpO0VsZW1lbnQuYWRkTWV0aG9kcygpO0hhc2gudG9RdWVyeVN0cmluZz1PYmplY3QudG9RdWVyeVN0cmluZzt2YXIgVG9nZ2xlPXtkaXNwbGF5OkVsZW1lbnQudG9nZ2xlfTtFbGVtZW50LmFkZE1ldGhvZHMoe2NoaWxkT2Y6RWxlbWVudC5NZXRob2RzLmRlc2NlbmRhbnRPZn0pO3ZhciBJbnNlcnRpb249e0JlZm9yZTpmdW5jdGlvbihhLGIpe3JldHVybiBFbGVtZW50Lmluc2VydChhLHtiZWZvcmU6Yn0pfSxUb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRWxlbWVudC5pbnNlcnQoYSx7dG9wOmJ9KX0sQm90dG9tOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEVsZW1lbnQuaW5zZXJ0KGEse2JvdHRvbTpifSl9LEFmdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEVsZW1lbnQuaW5zZXJ0KGEse2FmdGVyOmJ9KX19O3ZhciAkY29udGludWU9bmV3IEVycm9yKCcidGhyb3cgJGNvbnRpbnVlIiBpcyBkZXByZWNhdGVkLCB1c2UgInJldHVybiIgaW5zdGVhZCcpO3ZhciBQb3NpdGlvbj17aW5jbHVkZVNjcm9sbE9mZnNldHM6ZmFsc2UscHJlcGFyZTpmdW5jdGlvbigpe3RoaXMuZGVsdGFYPXdpbmRvdy5wYWdlWE9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdHx8MDt0aGlzLmRlbHRhWT13aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wfHwwfSx3aXRoaW46ZnVuY3Rpb24oYixhLGMpe2lmKHRoaXMuaW5jbHVkZVNjcm9sbE9mZnNldHMpe3JldHVybiB0aGlzLndpdGhpbkluY2x1ZGluZ1Njcm9sbG9mZnNldHMoYixhLGMpfXRoaXMueGNvbXA9YTt0aGlzLnljb21wPWM7dGhpcy5vZmZzZXQ9RWxlbWVudC5jdW11bGF0aXZlT2Zmc2V0KGIpO3JldHVybihjPj10aGlzLm9mZnNldFsxXSYmYzx0aGlzLm9mZnNldFsxXStiLm9mZnNldEhlaWdodCYmYT49dGhpcy5vZmZzZXRbMF0mJmE8dGhpcy5vZmZzZXRbMF0rYi5vZmZzZXRXaWR0aCl9LHdpdGhpbkluY2x1ZGluZ1Njcm9sbG9mZnNldHM6ZnVuY3Rpb24oYixhLGQpe3ZhciBjPUVsZW1lbnQuY3VtdWxhdGl2ZVNjcm9sbE9mZnNldChiKTt0aGlzLnhjb21wPWErY1swXS10aGlzLmRlbHRhWDt0aGlzLnljb21wPWQrY1sxXS10aGlzLmRlbHRhWTt0aGlzLm9mZnNldD1FbGVtZW50LmN1bXVsYXRpdmVPZmZzZXQoYik7cmV0dXJuKHRoaXMueWNvbXA+PXRoaXMub2Zmc2V0WzFdJiZ0aGlzLnljb21wPHRoaXMub2Zmc2V0WzFdK2Iub2Zmc2V0SGVpZ2h0JiZ0aGlzLnhjb21wPj10aGlzLm9mZnNldFswXSYmdGhpcy54Y29tcDx0aGlzLm9mZnNldFswXStiLm9mZnNldFdpZHRoKX0sb3ZlcmxhcDpmdW5jdGlvbihiLGEpe2lmKCFiKXtyZXR1cm4gMH1pZihiPT0idmVydGljYWwiKXtyZXR1cm4oKHRoaXMub2Zmc2V0WzFdK2Eub2Zmc2V0SGVpZ2h0KS10aGlzLnljb21wKS9hLm9mZnNldEhlaWdodH1pZihiPT0iaG9yaXpvbnRhbCIpe3JldHVybigodGhpcy5vZmZzZXRbMF0rYS5vZmZzZXRXaWR0aCktdGhpcy54Y29tcCkvYS5vZmZzZXRXaWR0aH19LGN1bXVsYXRpdmVPZmZzZXQ6RWxlbWVudC5NZXRob2RzLmN1bXVsYXRpdmVPZmZzZXQscG9zaXRpb25lZE9mZnNldDpFbGVtZW50Lk1ldGhvZHMucG9zaXRpb25lZE9mZnNldCxhYnNvbHV0aXplOmZ1bmN0aW9uKGEpe1Bvc2l0aW9uLnByZXBhcmUoKTtyZXR1cm4gRWxlbWVudC5hYnNvbHV0aXplKGEpfSxyZWxhdGl2aXplOmZ1bmN0aW9uKGEpe1Bvc2l0aW9uLnByZXBhcmUoKTtyZXR1cm4gRWxlbWVudC5yZWxhdGl2aXplKGEpfSxyZWFsT2Zmc2V0OkVsZW1lbnQuTWV0aG9kcy5jdW11bGF0aXZlU2Nyb2xsT2Zmc2V0LG9mZnNldFBhcmVudDpFbGVtZW50Lk1ldGhvZHMuZ2V0T2Zmc2V0UGFyZW50LHBhZ2U6RWxlbWVudC5NZXRob2RzLnZpZXdwb3J0T2Zmc2V0LGNsb25lOmZ1bmN0aW9uKGIsYyxhKXthPWF8fHt9O3JldHVybiBFbGVtZW50LmNsb25lUG9zaXRpb24oYyxiLGEpfX07aWYoIWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe2RvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWU9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYShjKXtyZXR1cm4gYy5ibGFuaygpP251bGw6Iltjb250YWlucyhjb25jYXQoJyAnLCBAY2xhc3MsICcgJyksICcgIitjKyIgJyldIn1iLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9UHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlcy5YUGF0aD9mdW5jdGlvbihjLGUpe2U9ZS50b1N0cmluZygpLnN0cmlwKCk7dmFyIGQ9L1xzLy50ZXN0KGUpPyR3KGUpLm1hcChhKS5qb2luKCIiKTphKGUpO3JldHVybiBkP2RvY3VtZW50Ll9nZXRFbGVtZW50c0J5WFBhdGgoIi4vLyoiK2QsYyk6W119OmZ1bmN0aW9uKGUsZil7Zj1mLnRvU3RyaW5nKCkuc3RyaXAoKTt2YXIgZz1bXSxoPSgvXHMvLnRlc3QoZik/JHcoZik6bnVsbCk7aWYoIWgmJiFmKXtyZXR1cm4gZ312YXIgYz0kKGUpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7Zj0iICIrZisiICI7Zm9yKHZhciBkPTAsayxqO2s9Y1tkXTtkKyspe2lmKGsuY2xhc3NOYW1lJiYoaj0iICIray5jbGFzc05hbWUrIiAiKSYmKGouaW5jbHVkZShmKXx8KGgmJmguYWxsKGZ1bmN0aW9uKGkpe3JldHVybiAhaS50b1N0cmluZygpLmJsYW5rKCkmJmouaW5jbHVkZSgiICIraSsiICIpfSkpKSl7Zy5wdXNoKEVsZW1lbnQuZXh0ZW5kKGspKX19cmV0dXJuIGd9O3JldHVybiBmdW5jdGlvbihkLGMpe3JldHVybiAkKGN8fGRvY3VtZW50LmJvZHkpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZCl9fShFbGVtZW50Lk1ldGhvZHMpfUVsZW1lbnQuQ2xhc3NOYW1lcz1DbGFzcy5jcmVhdGUoKTtFbGVtZW50LkNsYXNzTmFtZXMucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudD0kKGEpfSxfZWFjaDpmdW5jdGlvbihiLGEpe3RoaXMuZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoL1xzKy8pLnNlbGVjdChmdW5jdGlvbihjKXtyZXR1cm4gYy5sZW5ndGg+MH0pLl9lYWNoKGIsYSl9LHNldDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuY2xhc3NOYW1lPWF9LGFkZDpmdW5jdGlvbihhKXtpZih0aGlzLmluY2x1ZGUoYSkpe3JldHVybn10aGlzLnNldCgkQSh0aGlzKS5jb25jYXQoYSkuam9pbigiICIpKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmluY2x1ZGUoYSkpe3JldHVybn10aGlzLnNldCgkQSh0aGlzKS53aXRob3V0KGEpLmpvaW4oIiAiKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuICRBKHRoaXMpLmpvaW4oIiAiKX19O09iamVjdC5leHRlbmQoRWxlbWVudC5DbGFzc05hbWVzLnByb3RvdHlwZSxFbnVtZXJhYmxlKTsoZnVuY3Rpb24oKXt3aW5kb3cuU2VsZWN0b3I9Q2xhc3MuY3JlYXRlKHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuZXhwcmVzc2lvbj1hLnN0cmlwKCl9LGZpbmRFbGVtZW50czpmdW5jdGlvbihhKXtyZXR1cm4gUHJvdG90eXBlLlNlbGVjdG9yLnNlbGVjdCh0aGlzLmV4cHJlc3Npb24sYSl9LG1hdGNoOmZ1bmN0aW9uKGEpe3JldHVybiBQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2goYSx0aGlzLmV4cHJlc3Npb24pfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4cHJlc3Npb259LGluc3BlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4iIzxTZWxlY3RvcjogIit0aGlzLmV4cHJlc3Npb24rIj4ifX0pO09iamVjdC5leHRlbmQoU2VsZWN0b3Ise21hdGNoRWxlbWVudHM6ZnVuY3Rpb24oZixnKXt2YXIgYT1Qcm90b3R5cGUuU2VsZWN0b3IubWF0Y2gsZD1bXTtmb3IodmFyIGM9MCxlPWYubGVuZ3RoO2M8ZTtjKyspe3ZhciBiPWZbY107aWYoYShiLGcpKXtkLnB1c2goRWxlbWVudC5leHRlbmQoYikpfX1yZXR1cm4gZH0sZmluZEVsZW1lbnQ6ZnVuY3Rpb24oZixnLGIpe2I9Ynx8MDt2YXIgYT0wLGQ7Zm9yKHZhciBjPTAsZT1mLmxlbmd0aDtjPGU7YysrKXtkPWZbY107aWYoUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoKGQsZykmJmI9PT1hKyspe3JldHVybiBFbGVtZW50LmV4dGVuZChkKX19fSxmaW5kQ2hpbGRFbGVtZW50czpmdW5jdGlvbihiLGMpe3ZhciBhPWMudG9BcnJheSgpLmpvaW4oIiwgIik7cmV0dXJuIFByb3RvdHlwZS5TZWxlY3Rvci5zZWxlY3QoYSxifHxkb2N1bWVudCl9fSl9KSgpOw=="></script>
    <script src="data:text/javascript;base64,Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtCi8vIGFiaWxpdHkvc2NvcmVzLmpzIC8vIHZlcnNpb24gMS4wLjEKLy8KLy8gd3JpdHRlbiBieSBkcm93IDxkcm93QGJpbi5zaD4KLy8gY29uY2VwdCBieSBKdXN0aXNhdXIgPGp1c3Rpc2F1ckBnbWFpbC5jb20+Ci8vIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC8KCid1c2Ugc3RyaWN0JzsoKGgsZik9PmYoaCkpKHdpbmRvdyxoPT57ZnVuY3Rpb24gZigpe2xldCBnPVtmaXJzdF9zdW0sc2Vjb25kX3N1bSx0aGlyZF9zdW1dLGU9W10sYjtmb3IoYj0wOzM+YjtiKyspe2xldCBjPWsoMyw2KSxkPWdbYl0tYztpZigxODxkKXt2YXIgYT1kLTE4O2E9aygxLDE4LWMtYSkrYTtjKz1hO2QtPWF9MTA+YyYmKGM9YCAke2N9YCk7MTA+ZCYmKGQ9YCAke2R9YCk7ZS5wdXNoKGMsZCl9ZS5zb3J0KCk7ZS5yZXZlcnNlKCk7JCgiYWJpbGl0eV9zY29yZXMiKS5zZXRWYWx1ZShlLmpvaW4oIiwgIikpfWZ1bmN0aW9uIGsoZyxlKXtsZXQgYj0wLGE7Zm9yKGE9MDthPGc7YSsrKWIrPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSplKSsxO3JldHVybiBifWRvY3VtZW50Lm9ic2VydmUoImRvbTpsb2FkZWQiLCgpPT57ZigpOyQoInJlcm9sbCIpLm9ic2VydmUoImNsaWNrIixmKX0pfSk7Cg=="></script>
  </body>
</html>
